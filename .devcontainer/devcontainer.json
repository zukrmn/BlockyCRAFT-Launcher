{
    "name": "BlockyCRAFT Launcher Dev",
    "build": {
        "dockerfile": "Dockerfile"
    },
    
    // Instala dependências npm e configura permissões X11
    "postCreateCommand": "npm install && sudo chmod -R 777 /tmp/.X11-unix 2>/dev/null || true",
    
    "customizations": {
        "vscode": {
            "extensions": [
                "svelte.svelte-vscode",
                "dbaeumer.vscode-eslint",
                "esbenp.prettier-vscode",
                "bradlc.vscode-tailwindcss"
            ],
            "settings": {
                "editor.formatOnSave": true
            }
        }
    },
    // Mounts para X11 e Wayland (baseado no devcontainer que funciona)
    "mounts": [
        "source=/tmp/.X11-unix,target=/tmp/.X11-unix,type=bind",
        "source=${localEnv:XDG_RUNTIME_DIR},target=/tmp/xdg-runtime,type=bind"
    ],
    // Configurações de rede e segurança
    "runArgs": [
        "--net=host",
        "--ipc=host",
        "--security-opt",
        "seccomp=unconfined",
        "--device=/dev/dri:/dev/dri",
        "--device=/dev/snd:/dev/snd",
        "--device=/dev/input:/dev/input"
    ],
    // Variáveis de ambiente para X11, Wayland, Electron e Java GUI
    "containerEnv": {
        "DISPLAY": ":0",
        "WAYLAND_DISPLAY": "wayland-0",
        "XDG_RUNTIME_DIR": "/tmp/xdg-runtime",
        "ELECTRON_DISABLE_SANDBOX": "1",
        "ELECTRON_ENABLE_LOGGING": "1"
    },
    
    // Expõe a porta do Vite/Svelte (HMR)
    "forwardPorts": [
        4321
    ],
    
    // Usuário padrão do container (node)
    "remoteUser": "node"
}