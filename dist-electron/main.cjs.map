{
  "version": 3,
  "sources": ["../node_modules/adm-zip/util/constants.js", "../node_modules/adm-zip/util/errors.js", "../node_modules/adm-zip/util/utils.js", "../node_modules/adm-zip/util/fattr.js", "../node_modules/adm-zip/util/decoder.js", "../node_modules/adm-zip/util/index.js", "../node_modules/adm-zip/headers/entryHeader.js", "../node_modules/adm-zip/headers/mainHeader.js", "../node_modules/adm-zip/headers/index.js", "../node_modules/adm-zip/methods/deflater.js", "../node_modules/adm-zip/methods/inflater.js", "../node_modules/adm-zip/methods/zipcrypto.js", "../node_modules/adm-zip/methods/index.js", "../node_modules/adm-zip/zipEntry.js", "../node_modules/adm-zip/zipFile.js", "../node_modules/adm-zip/adm-zip.js", "../electron/main.ts", "../electron/handlers/Logger.ts", "../electron/handlers/GameHandler.ts", "../electron/handlers/JavaManager.ts", "../electron/handlers/UpdateManager.ts", "../electron/handlers/ModHandler.ts", "../electron/handlers/OverlayHandler.ts"],
  "sourcesContent": ["module.exports = {\n    /* The local file header */\n    LOCHDR           : 30, // LOC header size\n    LOCSIG           : 0x04034b50, // \"PK\\003\\004\"\n    LOCVER           : 4,\t// version needed to extract\n    LOCFLG           : 6, // general purpose bit flag\n    LOCHOW           : 8, // compression method\n    LOCTIM           : 10, // modification time (2 bytes time, 2 bytes date)\n    LOCCRC           : 14, // uncompressed file crc-32 value\n    LOCSIZ           : 18, // compressed size\n    LOCLEN           : 22, // uncompressed size\n    LOCNAM           : 26, // filename length\n    LOCEXT           : 28, // extra field length\n\n    /* The Data descriptor */\n    EXTSIG           : 0x08074b50, // \"PK\\007\\008\"\n    EXTHDR           : 16, // EXT header size\n    EXTCRC           : 4, // uncompressed file crc-32 value\n    EXTSIZ           : 8, // compressed size\n    EXTLEN           : 12, // uncompressed size\n\n    /* The central directory file header */\n    CENHDR           : 46, // CEN header size\n    CENSIG           : 0x02014b50, // \"PK\\001\\002\"\n    CENVEM           : 4, // version made by\n    CENVER           : 6, // version needed to extract\n    CENFLG           : 8, // encrypt, decrypt flags\n    CENHOW           : 10, // compression method\n    CENTIM           : 12, // modification time (2 bytes time, 2 bytes date)\n    CENCRC           : 16, // uncompressed file crc-32 value\n    CENSIZ           : 20, // compressed size\n    CENLEN           : 24, // uncompressed size\n    CENNAM           : 28, // filename length\n    CENEXT           : 30, // extra field length\n    CENCOM           : 32, // file comment length\n    CENDSK           : 34, // volume number start\n    CENATT           : 36, // internal file attributes\n    CENATX           : 38, // external file attributes (host system dependent)\n    CENOFF           : 42, // LOC header offset\n\n    /* The entries in the end of central directory */\n    ENDHDR           : 22, // END header size\n    ENDSIG           : 0x06054b50, // \"PK\\005\\006\"\n    ENDSUB           : 8, // number of entries on this disk\n    ENDTOT           : 10, // total number of entries\n    ENDSIZ           : 12, // central directory size in bytes\n    ENDOFF           : 16, // offset of first CEN header\n    ENDCOM           : 20, // zip file comment length\n\n    END64HDR         : 20, // zip64 END header size\n    END64SIG         : 0x07064b50, // zip64 Locator signature, \"PK\\006\\007\"\n    END64START       : 4, // number of the disk with the start of the zip64\n    END64OFF         : 8, // relative offset of the zip64 end of central directory\n    END64NUMDISKS    : 16, // total number of disks\n\n    ZIP64SIG         : 0x06064b50, // zip64 signature, \"PK\\006\\006\"\n    ZIP64HDR         : 56, // zip64 record minimum size\n    ZIP64LEAD        : 12, // leading bytes at the start of the record, not counted by the value stored in ZIP64SIZE\n    ZIP64SIZE        : 4, // zip64 size of the central directory record\n    ZIP64VEM         : 12, // zip64 version made by\n    ZIP64VER         : 14, // zip64 version needed to extract\n    ZIP64DSK         : 16, // zip64 number of this disk\n    ZIP64DSKDIR      : 20, // number of the disk with the start of the record directory\n    ZIP64SUB         : 24, // number of entries on this disk\n    ZIP64TOT         : 32, // total number of entries\n    ZIP64SIZB        : 40, // zip64 central directory size in bytes\n    ZIP64OFF         : 48, // offset of start of central directory with respect to the starting disk number\n    ZIP64EXTRA       : 56, // extensible data sector\n\n    /* Compression methods */\n    STORED           : 0, // no compression\n    SHRUNK           : 1, // shrunk\n    REDUCED1         : 2, // reduced with compression factor 1\n    REDUCED2         : 3, // reduced with compression factor 2\n    REDUCED3         : 4, // reduced with compression factor 3\n    REDUCED4         : 5, // reduced with compression factor 4\n    IMPLODED         : 6, // imploded\n    // 7 reserved for Tokenizing compression algorithm\n    DEFLATED         : 8, // deflated\n    ENHANCED_DEFLATED: 9, // enhanced deflated\n    PKWARE           : 10,// PKWare DCL imploded\n    // 11 reserved by PKWARE\n    BZIP2            : 12, //  compressed using BZIP2\n    // 13 reserved by PKWARE\n    LZMA             : 14, // LZMA\n    // 15-17 reserved by PKWARE\n    IBM_TERSE        : 18, // compressed using IBM TERSE\n    IBM_LZ77         : 19, // IBM LZ77 z\n    AES_ENCRYPT      : 99, // WinZIP AES encryption method\n\n    /* General purpose bit flag */\n    // values can obtained with expression 2**bitnr\n    FLG_ENC          : 1,    // Bit 0: encrypted file\n    FLG_COMP1        : 2,    // Bit 1, compression option\n    FLG_COMP2        : 4,    // Bit 2, compression option\n    FLG_DESC         : 8,    // Bit 3, data descriptor\n    FLG_ENH          : 16,   // Bit 4, enhanced deflating\n    FLG_PATCH        : 32,   // Bit 5, indicates that the file is compressed patched data.\n    FLG_STR          : 64,   // Bit 6, strong encryption (patented)\n                             // Bits 7-10: Currently unused.\n    FLG_EFS          : 2048, // Bit 11: Language encoding flag (EFS)\n                             // Bit 12: Reserved by PKWARE for enhanced compression.\n                             // Bit 13: encrypted the Central Directory (patented).\n                             // Bits 14-15: Reserved by PKWARE.\n    FLG_MSK          : 4096, // mask header values\n\n    /* Load type */\n    FILE             : 2,\n    BUFFER           : 1,\n    NONE             : 0,\n\n    /* 4.5 Extensible data fields */\n    EF_ID            : 0,\n    EF_SIZE          : 2,\n\n    /* Header IDs */\n    ID_ZIP64         : 0x0001,\n    ID_AVINFO        : 0x0007,\n    ID_PFS           : 0x0008,\n    ID_OS2           : 0x0009,\n    ID_NTFS          : 0x000a,\n    ID_OPENVMS       : 0x000c,\n    ID_UNIX          : 0x000d,\n    ID_FORK          : 0x000e,\n    ID_PATCH         : 0x000f,\n    ID_X509_PKCS7    : 0x0014,\n    ID_X509_CERTID_F : 0x0015,\n    ID_X509_CERTID_C : 0x0016,\n    ID_STRONGENC     : 0x0017,\n    ID_RECORD_MGT    : 0x0018,\n    ID_X509_PKCS7_RL : 0x0019,\n    ID_IBM1          : 0x0065,\n    ID_IBM2          : 0x0066,\n    ID_POSZIP        : 0x4690,\n\n    EF_ZIP64_OR_32   : 0xffffffff,\n    EF_ZIP64_OR_16   : 0xffff,\n    EF_ZIP64_SUNCOMP : 0,\n    EF_ZIP64_SCOMP   : 8,\n    EF_ZIP64_RHO     : 16,\n    EF_ZIP64_DSN     : 24\n};\n", "const errors = {\n    /* Header error messages */\n    INVALID_LOC: \"Invalid LOC header (bad signature)\",\n    INVALID_CEN: \"Invalid CEN header (bad signature)\",\n    INVALID_END: \"Invalid END header (bad signature)\",\n\n    /* Descriptor */\n    DESCRIPTOR_NOT_EXIST: \"No descriptor present\",\n    DESCRIPTOR_UNKNOWN: \"Unknown descriptor format\",\n    DESCRIPTOR_FAULTY: \"Descriptor data is malformed\",\n\n    /* ZipEntry error messages*/\n    NO_DATA: \"Nothing to decompress\",\n    BAD_CRC: \"CRC32 checksum failed {0}\",\n    FILE_IN_THE_WAY: \"There is a file in the way: {0}\",\n    UNKNOWN_METHOD: \"Invalid/unsupported compression method\",\n\n    /* Inflater error messages */\n    AVAIL_DATA: \"inflate::Available inflate data did not terminate\",\n    INVALID_DISTANCE: \"inflate::Invalid literal/length or distance code in fixed or dynamic block\",\n    TO_MANY_CODES: \"inflate::Dynamic block code description: too many length or distance codes\",\n    INVALID_REPEAT_LEN: \"inflate::Dynamic block code description: repeat more than specified lengths\",\n    INVALID_REPEAT_FIRST: \"inflate::Dynamic block code description: repeat lengths with no first length\",\n    INCOMPLETE_CODES: \"inflate::Dynamic block code description: code lengths codes incomplete\",\n    INVALID_DYN_DISTANCE: \"inflate::Dynamic block code description: invalid distance code lengths\",\n    INVALID_CODES_LEN: \"inflate::Dynamic block code description: invalid literal/length code lengths\",\n    INVALID_STORE_BLOCK: \"inflate::Stored block length did not match one's complement\",\n    INVALID_BLOCK_TYPE: \"inflate::Invalid block type (type == 3)\",\n\n    /* ADM-ZIP error messages */\n    CANT_EXTRACT_FILE: \"Could not extract the file\",\n    CANT_OVERRIDE: \"Target file already exists\",\n    DISK_ENTRY_TOO_LARGE: \"Number of disk entries is too large\",\n    NO_ZIP: \"No zip file was loaded\",\n    NO_ENTRY: \"Entry doesn't exist\",\n    DIRECTORY_CONTENT_ERROR: \"A directory cannot have content\",\n    FILE_NOT_FOUND: 'File not found: \"{0}\"',\n    NOT_IMPLEMENTED: \"Not implemented\",\n    INVALID_FILENAME: \"Invalid filename\",\n    INVALID_FORMAT: \"Invalid or unsupported zip format. No END header found\",\n    INVALID_PASS_PARAM: \"Incompatible password parameter\",\n    WRONG_PASSWORD: \"Wrong Password\",\n\n    /* ADM-ZIP */\n    COMMENT_TOO_LONG: \"Comment is too long\", // Comment can be max 65535 bytes long (NOTE: some non-US characters may take more space)\n    EXTRA_FIELD_PARSE_ERROR: \"Extra field parsing error\"\n};\n\n// template\nfunction E(message) {\n    return function (...args) {\n        if (args.length) { // Allow {0} .. {9} arguments in error message, based on argument number\n            message = message.replace(/\\{(\\d)\\}/g, (_, n) => args[n] || '');\n        }\n\n        return new Error('ADM-ZIP: ' + message);\n    };\n}\n\n// Init errors with template\nfor (const msg of Object.keys(errors)) {\n    exports[msg] = E(errors[msg]);\n}\n", "const fsystem = require(\"fs\");\nconst pth = require(\"path\");\nconst Constants = require(\"./constants\");\nconst Errors = require(\"./errors\");\nconst isWin = typeof process === \"object\" && \"win32\" === process.platform;\n\nconst is_Obj = (obj) => typeof obj === \"object\" && obj !== null;\n\n// generate CRC32 lookup table\nconst crcTable = new Uint32Array(256).map((t, c) => {\n    for (let k = 0; k < 8; k++) {\n        if ((c & 1) !== 0) {\n            c = 0xedb88320 ^ (c >>> 1);\n        } else {\n            c >>>= 1;\n        }\n    }\n    return c >>> 0;\n});\n\n// UTILS functions\n\nfunction Utils(opts) {\n    this.sep = pth.sep;\n    this.fs = fsystem;\n\n    if (is_Obj(opts)) {\n        // custom filesystem\n        if (is_Obj(opts.fs) && typeof opts.fs.statSync === \"function\") {\n            this.fs = opts.fs;\n        }\n    }\n}\n\nmodule.exports = Utils;\n\n// INSTANTIABLE functions\n\nUtils.prototype.makeDir = function (/*String*/ folder) {\n    const self = this;\n\n    // Sync - make directories tree\n    function mkdirSync(/*String*/ fpath) {\n        let resolvedPath = fpath.split(self.sep)[0];\n        fpath.split(self.sep).forEach(function (name) {\n            if (!name || name.substr(-1, 1) === \":\") return;\n            resolvedPath += self.sep + name;\n            var stat;\n            try {\n                stat = self.fs.statSync(resolvedPath);\n            } catch (e) {\n                self.fs.mkdirSync(resolvedPath);\n            }\n            if (stat && stat.isFile()) throw Errors.FILE_IN_THE_WAY(`\"${resolvedPath}\"`);\n        });\n    }\n\n    mkdirSync(folder);\n};\n\nUtils.prototype.writeFileTo = function (/*String*/ path, /*Buffer*/ content, /*Boolean*/ overwrite, /*Number*/ attr) {\n    const self = this;\n    if (self.fs.existsSync(path)) {\n        if (!overwrite) return false; // cannot overwrite\n\n        var stat = self.fs.statSync(path);\n        if (stat.isDirectory()) {\n            return false;\n        }\n    }\n    var folder = pth.dirname(path);\n    if (!self.fs.existsSync(folder)) {\n        self.makeDir(folder);\n    }\n\n    var fd;\n    try {\n        fd = self.fs.openSync(path, \"w\", 0o666); // 0666\n    } catch (e) {\n        self.fs.chmodSync(path, 0o666);\n        fd = self.fs.openSync(path, \"w\", 0o666);\n    }\n    if (fd) {\n        try {\n            self.fs.writeSync(fd, content, 0, content.length, 0);\n        } finally {\n            self.fs.closeSync(fd);\n        }\n    }\n    self.fs.chmodSync(path, attr || 0o666);\n    return true;\n};\n\nUtils.prototype.writeFileToAsync = function (/*String*/ path, /*Buffer*/ content, /*Boolean*/ overwrite, /*Number*/ attr, /*Function*/ callback) {\n    if (typeof attr === \"function\") {\n        callback = attr;\n        attr = undefined;\n    }\n\n    const self = this;\n\n    self.fs.exists(path, function (exist) {\n        if (exist && !overwrite) return callback(false);\n\n        self.fs.stat(path, function (err, stat) {\n            if (exist && stat.isDirectory()) {\n                return callback(false);\n            }\n\n            var folder = pth.dirname(path);\n            self.fs.exists(folder, function (exists) {\n                if (!exists) self.makeDir(folder);\n\n                self.fs.open(path, \"w\", 0o666, function (err, fd) {\n                    if (err) {\n                        self.fs.chmod(path, 0o666, function () {\n                            self.fs.open(path, \"w\", 0o666, function (err, fd) {\n                                self.fs.write(fd, content, 0, content.length, 0, function () {\n                                    self.fs.close(fd, function () {\n                                        self.fs.chmod(path, attr || 0o666, function () {\n                                            callback(true);\n                                        });\n                                    });\n                                });\n                            });\n                        });\n                    } else if (fd) {\n                        self.fs.write(fd, content, 0, content.length, 0, function () {\n                            self.fs.close(fd, function () {\n                                self.fs.chmod(path, attr || 0o666, function () {\n                                    callback(true);\n                                });\n                            });\n                        });\n                    } else {\n                        self.fs.chmod(path, attr || 0o666, function () {\n                            callback(true);\n                        });\n                    }\n                });\n            });\n        });\n    });\n};\n\nUtils.prototype.findFiles = function (/*String*/ path) {\n    const self = this;\n\n    function findSync(/*String*/ dir, /*RegExp*/ pattern, /*Boolean*/ recursive) {\n        if (typeof pattern === \"boolean\") {\n            recursive = pattern;\n            pattern = undefined;\n        }\n        let files = [];\n        self.fs.readdirSync(dir).forEach(function (file) {\n            const path = pth.join(dir, file);\n            const stat = self.fs.statSync(path);\n\n            if (!pattern || pattern.test(path)) {\n                files.push(pth.normalize(path) + (stat.isDirectory() ? self.sep : \"\"));\n            }\n\n            if (stat.isDirectory() && recursive) files = files.concat(findSync(path, pattern, recursive));\n        });\n        return files;\n    }\n\n    return findSync(path, undefined, true);\n};\n\n/**\n * Callback for showing if everything was done.\n *\n * @callback filelistCallback\n * @param {Error} err - Error object\n * @param {string[]} list - was request fully completed\n */\n\n/**\n *\n * @param {string} dir\n * @param {filelistCallback} cb\n */\nUtils.prototype.findFilesAsync = function (dir, cb) {\n    const self = this;\n    let results = [];\n    self.fs.readdir(dir, function (err, list) {\n        if (err) return cb(err);\n        let list_length = list.length;\n        if (!list_length) return cb(null, results);\n        list.forEach(function (file) {\n            file = pth.join(dir, file);\n            self.fs.stat(file, function (err, stat) {\n                if (err) return cb(err);\n                if (stat) {\n                    results.push(pth.normalize(file) + (stat.isDirectory() ? self.sep : \"\"));\n                    if (stat.isDirectory()) {\n                        self.findFilesAsync(file, function (err, res) {\n                            if (err) return cb(err);\n                            results = results.concat(res);\n                            if (!--list_length) cb(null, results);\n                        });\n                    } else {\n                        if (!--list_length) cb(null, results);\n                    }\n                }\n            });\n        });\n    });\n};\n\nUtils.prototype.getAttributes = function () {};\n\nUtils.prototype.setAttributes = function () {};\n\n// STATIC functions\n\n// crc32 single update (it is part of crc32)\nUtils.crc32update = function (crc, byte) {\n    return crcTable[(crc ^ byte) & 0xff] ^ (crc >>> 8);\n};\n\nUtils.crc32 = function (buf) {\n    if (typeof buf === \"string\") {\n        buf = Buffer.from(buf, \"utf8\");\n    }\n\n    let len = buf.length;\n    let crc = ~0;\n    for (let off = 0; off < len; ) crc = Utils.crc32update(crc, buf[off++]);\n    // xor and cast as uint32 number\n    return ~crc >>> 0;\n};\n\nUtils.methodToString = function (/*Number*/ method) {\n    switch (method) {\n        case Constants.STORED:\n            return \"STORED (\" + method + \")\";\n        case Constants.DEFLATED:\n            return \"DEFLATED (\" + method + \")\";\n        default:\n            return \"UNSUPPORTED (\" + method + \")\";\n    }\n};\n\n/**\n * removes \"..\" style path elements\n * @param {string} path - fixable path\n * @returns string - fixed filepath\n */\nUtils.canonical = function (/*string*/ path) {\n    if (!path) return \"\";\n    // trick normalize think path is absolute\n    const safeSuffix = pth.posix.normalize(\"/\" + path.split(\"\\\\\").join(\"/\"));\n    return pth.join(\".\", safeSuffix);\n};\n\n/**\n * fix file names in achive\n * @param {string} path - fixable path\n * @returns string - fixed filepath\n */\n\nUtils.zipnamefix = function (path) {\n    if (!path) return \"\";\n    // trick normalize think path is absolute\n    const safeSuffix = pth.posix.normalize(\"/\" + path.split(\"\\\\\").join(\"/\"));\n    return pth.posix.join(\".\", safeSuffix);\n};\n\n/**\n *\n * @param {Array} arr\n * @param {function} callback\n * @returns\n */\nUtils.findLast = function (arr, callback) {\n    if (!Array.isArray(arr)) throw new TypeError(\"arr is not array\");\n\n    const len = arr.length >>> 0;\n    for (let i = len - 1; i >= 0; i--) {\n        if (callback(arr[i], i, arr)) {\n            return arr[i];\n        }\n    }\n    return void 0;\n};\n\n// make abolute paths taking prefix as root folder\nUtils.sanitize = function (/*string*/ prefix, /*string*/ name) {\n    prefix = pth.resolve(pth.normalize(prefix));\n    var parts = name.split(\"/\");\n    for (var i = 0, l = parts.length; i < l; i++) {\n        var path = pth.normalize(pth.join(prefix, parts.slice(i, l).join(pth.sep)));\n        if (path.indexOf(prefix) === 0) {\n            return path;\n        }\n    }\n    return pth.normalize(pth.join(prefix, pth.basename(name)));\n};\n\n// converts buffer, Uint8Array, string types to buffer\nUtils.toBuffer = function toBuffer(/*buffer, Uint8Array, string*/ input, /* function */ encoder) {\n    if (Buffer.isBuffer(input)) {\n        return input;\n    } else if (input instanceof Uint8Array) {\n        return Buffer.from(input);\n    } else {\n        // expect string all other values are invalid and return empty buffer\n        return typeof input === \"string\" ? encoder(input) : Buffer.alloc(0);\n    }\n};\n\nUtils.readBigUInt64LE = function (/*Buffer*/ buffer, /*int*/ index) {\n    var slice = Buffer.from(buffer.slice(index, index + 8));\n    slice.swap64();\n\n    return parseInt(`0x${slice.toString(\"hex\")}`);\n};\n\nUtils.fromDOS2Date = function (val) {\n    return new Date(((val >> 25) & 0x7f) + 1980, Math.max(((val >> 21) & 0x0f) - 1, 0), Math.max((val >> 16) & 0x1f, 1), (val >> 11) & 0x1f, (val >> 5) & 0x3f, (val & 0x1f) << 1);\n};\n\nUtils.fromDate2DOS = function (val) {\n    let date = 0;\n    let time = 0;\n    if (val.getFullYear() > 1979) {\n        date = (((val.getFullYear() - 1980) & 0x7f) << 9) | ((val.getMonth() + 1) << 5) | val.getDate();\n        time = (val.getHours() << 11) | (val.getMinutes() << 5) | (val.getSeconds() >> 1);\n    }\n    return (date << 16) | time;\n};\n\nUtils.isWin = isWin; // Do we have windows system\nUtils.crcTable = crcTable;\n", "const pth = require(\"path\");\n\nmodule.exports = function (/*String*/ path, /*Utils object*/ { fs }) {\n    var _path = path || \"\",\n        _obj = newAttr(),\n        _stat = null;\n\n    function newAttr() {\n        return {\n            directory: false,\n            readonly: false,\n            hidden: false,\n            executable: false,\n            mtime: 0,\n            atime: 0\n        };\n    }\n\n    if (_path && fs.existsSync(_path)) {\n        _stat = fs.statSync(_path);\n        _obj.directory = _stat.isDirectory();\n        _obj.mtime = _stat.mtime;\n        _obj.atime = _stat.atime;\n        _obj.executable = (0o111 & _stat.mode) !== 0; // file is executable who ever har right not just owner\n        _obj.readonly = (0o200 & _stat.mode) === 0; // readonly if owner has no write right\n        _obj.hidden = pth.basename(_path)[0] === \".\";\n    } else {\n        console.warn(\"Invalid path: \" + _path);\n    }\n\n    return {\n        get directory() {\n            return _obj.directory;\n        },\n\n        get readOnly() {\n            return _obj.readonly;\n        },\n\n        get hidden() {\n            return _obj.hidden;\n        },\n\n        get mtime() {\n            return _obj.mtime;\n        },\n\n        get atime() {\n            return _obj.atime;\n        },\n\n        get executable() {\n            return _obj.executable;\n        },\n\n        decodeAttributes: function () {},\n\n        encodeAttributes: function () {},\n\n        toJSON: function () {\n            return {\n                path: _path,\n                isDirectory: _obj.directory,\n                isReadOnly: _obj.readonly,\n                isHidden: _obj.hidden,\n                isExecutable: _obj.executable,\n                mTime: _obj.mtime,\n                aTime: _obj.atime\n            };\n        },\n\n        toString: function () {\n            return JSON.stringify(this.toJSON(), null, \"\\t\");\n        }\n    };\n};\n", "module.exports = {\n    efs: true,\n    encode: (data) => Buffer.from(data, \"utf8\"),\n    decode: (data) => data.toString(\"utf8\")\n};\n", "module.exports = require(\"./utils\");\nmodule.exports.Constants = require(\"./constants\");\nmodule.exports.Errors = require(\"./errors\");\nmodule.exports.FileAttr = require(\"./fattr\");\nmodule.exports.decoder = require(\"./decoder\");\n", "var Utils = require(\"../util\"),\n    Constants = Utils.Constants;\n\n/* The central directory file header */\nmodule.exports = function () {\n    var _verMade = 20, // v2.0\n        _version = 10, // v1.0\n        _flags = 0,\n        _method = 0,\n        _time = 0,\n        _crc = 0,\n        _compressedSize = 0,\n        _size = 0,\n        _fnameLen = 0,\n        _extraLen = 0,\n        _comLen = 0,\n        _diskStart = 0,\n        _inattr = 0,\n        _attr = 0,\n        _offset = 0;\n\n    _verMade |= Utils.isWin ? 0x0a00 : 0x0300;\n\n    // Set EFS flag since filename and comment fields are all by default encoded using UTF-8.\n    // Without it file names may be corrupted for other apps when file names use unicode chars\n    _flags |= Constants.FLG_EFS;\n\n    const _localHeader = {\n        extraLen: 0\n    };\n\n    // casting\n    const uint32 = (val) => Math.max(0, val) >>> 0;\n    const uint16 = (val) => Math.max(0, val) & 0xffff;\n    const uint8 = (val) => Math.max(0, val) & 0xff;\n\n    _time = Utils.fromDate2DOS(new Date());\n\n    return {\n        get made() {\n            return _verMade;\n        },\n        set made(val) {\n            _verMade = val;\n        },\n\n        get version() {\n            return _version;\n        },\n        set version(val) {\n            _version = val;\n        },\n\n        get flags() {\n            return _flags;\n        },\n        set flags(val) {\n            _flags = val;\n        },\n\n        get flags_efs() {\n            return (_flags & Constants.FLG_EFS) > 0;\n        },\n        set flags_efs(val) {\n            if (val) {\n                _flags |= Constants.FLG_EFS;\n            } else {\n                _flags &= ~Constants.FLG_EFS;\n            }\n        },\n\n        get flags_desc() {\n            return (_flags & Constants.FLG_DESC) > 0;\n        },\n        set flags_desc(val) {\n            if (val) {\n                _flags |= Constants.FLG_DESC;\n            } else {\n                _flags &= ~Constants.FLG_DESC;\n            }\n        },\n\n        get method() {\n            return _method;\n        },\n        set method(val) {\n            switch (val) {\n                case Constants.STORED:\n                    this.version = 10;\n                case Constants.DEFLATED:\n                default:\n                    this.version = 20;\n            }\n            _method = val;\n        },\n\n        get time() {\n            return Utils.fromDOS2Date(this.timeval);\n        },\n        set time(val) {\n            this.timeval = Utils.fromDate2DOS(val);\n        },\n\n        get timeval() {\n            return _time;\n        },\n        set timeval(val) {\n            _time = uint32(val);\n        },\n\n        get timeHighByte() {\n            return uint8(_time >>> 8);\n        },\n        get crc() {\n            return _crc;\n        },\n        set crc(val) {\n            _crc = uint32(val);\n        },\n\n        get compressedSize() {\n            return _compressedSize;\n        },\n        set compressedSize(val) {\n            _compressedSize = uint32(val);\n        },\n\n        get size() {\n            return _size;\n        },\n        set size(val) {\n            _size = uint32(val);\n        },\n\n        get fileNameLength() {\n            return _fnameLen;\n        },\n        set fileNameLength(val) {\n            _fnameLen = val;\n        },\n\n        get extraLength() {\n            return _extraLen;\n        },\n        set extraLength(val) {\n            _extraLen = val;\n        },\n\n        get extraLocalLength() {\n            return _localHeader.extraLen;\n        },\n        set extraLocalLength(val) {\n            _localHeader.extraLen = val;\n        },\n\n        get commentLength() {\n            return _comLen;\n        },\n        set commentLength(val) {\n            _comLen = val;\n        },\n\n        get diskNumStart() {\n            return _diskStart;\n        },\n        set diskNumStart(val) {\n            _diskStart = uint32(val);\n        },\n\n        get inAttr() {\n            return _inattr;\n        },\n        set inAttr(val) {\n            _inattr = uint32(val);\n        },\n\n        get attr() {\n            return _attr;\n        },\n        set attr(val) {\n            _attr = uint32(val);\n        },\n\n        // get Unix file permissions\n        get fileAttr() {\n            return (_attr || 0) >> 16 & 0xfff;\n        },\n\n        get offset() {\n            return _offset;\n        },\n        set offset(val) {\n            _offset = uint32(val);\n        },\n\n        get encrypted() {\n            return (_flags & Constants.FLG_ENC) === Constants.FLG_ENC;\n        },\n\n        get centralHeaderSize() {\n            return Constants.CENHDR + _fnameLen + _extraLen + _comLen;\n        },\n\n        get realDataOffset() {\n            return _offset + Constants.LOCHDR + _localHeader.fnameLen + _localHeader.extraLen;\n        },\n\n        get localHeader() {\n            return _localHeader;\n        },\n\n        loadLocalHeaderFromBinary: function (/*Buffer*/ input) {\n            var data = input.slice(_offset, _offset + Constants.LOCHDR);\n            // 30 bytes and should start with \"PK\\003\\004\"\n            if (data.readUInt32LE(0) !== Constants.LOCSIG) {\n                throw Utils.Errors.INVALID_LOC();\n            }\n\n            // version needed to extract\n            _localHeader.version = data.readUInt16LE(Constants.LOCVER);\n            // general purpose bit flag\n            _localHeader.flags = data.readUInt16LE(Constants.LOCFLG);\n            // compression method\n            _localHeader.method = data.readUInt16LE(Constants.LOCHOW);\n            // modification time (2 bytes time, 2 bytes date)\n            _localHeader.time = data.readUInt32LE(Constants.LOCTIM);\n            // uncompressed file crc-32 valu\n            _localHeader.crc = data.readUInt32LE(Constants.LOCCRC);\n            // compressed size\n            _localHeader.compressedSize = data.readUInt32LE(Constants.LOCSIZ);\n            // uncompressed size\n            _localHeader.size = data.readUInt32LE(Constants.LOCLEN);\n            // filename length\n            _localHeader.fnameLen = data.readUInt16LE(Constants.LOCNAM);\n            // extra field length\n            _localHeader.extraLen = data.readUInt16LE(Constants.LOCEXT);\n\n            // read extra data\n            const extraStart = _offset + Constants.LOCHDR + _localHeader.fnameLen;\n            const extraEnd = extraStart + _localHeader.extraLen;\n            return input.slice(extraStart, extraEnd);\n        },\n\n        loadFromBinary: function (/*Buffer*/ data) {\n            // data should be 46 bytes and start with \"PK 01 02\"\n            if (data.length !== Constants.CENHDR || data.readUInt32LE(0) !== Constants.CENSIG) {\n                throw Utils.Errors.INVALID_CEN();\n            }\n            // version made by\n            _verMade = data.readUInt16LE(Constants.CENVEM);\n            // version needed to extract\n            _version = data.readUInt16LE(Constants.CENVER);\n            // encrypt, decrypt flags\n            _flags = data.readUInt16LE(Constants.CENFLG);\n            // compression method\n            _method = data.readUInt16LE(Constants.CENHOW);\n            // modification time (2 bytes time, 2 bytes date)\n            _time = data.readUInt32LE(Constants.CENTIM);\n            // uncompressed file crc-32 value\n            _crc = data.readUInt32LE(Constants.CENCRC);\n            // compressed size\n            _compressedSize = data.readUInt32LE(Constants.CENSIZ);\n            // uncompressed size\n            _size = data.readUInt32LE(Constants.CENLEN);\n            // filename length\n            _fnameLen = data.readUInt16LE(Constants.CENNAM);\n            // extra field length\n            _extraLen = data.readUInt16LE(Constants.CENEXT);\n            // file comment length\n            _comLen = data.readUInt16LE(Constants.CENCOM);\n            // volume number start\n            _diskStart = data.readUInt16LE(Constants.CENDSK);\n            // internal file attributes\n            _inattr = data.readUInt16LE(Constants.CENATT);\n            // external file attributes\n            _attr = data.readUInt32LE(Constants.CENATX);\n            // LOC header offset\n            _offset = data.readUInt32LE(Constants.CENOFF);\n        },\n\n        localHeaderToBinary: function () {\n            // LOC header size (30 bytes)\n            var data = Buffer.alloc(Constants.LOCHDR);\n            // \"PK\\003\\004\"\n            data.writeUInt32LE(Constants.LOCSIG, 0);\n            // version needed to extract\n            data.writeUInt16LE(_version, Constants.LOCVER);\n            // general purpose bit flag\n            data.writeUInt16LE(_flags, Constants.LOCFLG);\n            // compression method\n            data.writeUInt16LE(_method, Constants.LOCHOW);\n            // modification time (2 bytes time, 2 bytes date)\n            data.writeUInt32LE(_time, Constants.LOCTIM);\n            // uncompressed file crc-32 value\n            data.writeUInt32LE(_crc, Constants.LOCCRC);\n            // compressed size\n            data.writeUInt32LE(_compressedSize, Constants.LOCSIZ);\n            // uncompressed size\n            data.writeUInt32LE(_size, Constants.LOCLEN);\n            // filename length\n            data.writeUInt16LE(_fnameLen, Constants.LOCNAM);\n            // extra field length\n            data.writeUInt16LE(_localHeader.extraLen, Constants.LOCEXT);\n            return data;\n        },\n\n        centralHeaderToBinary: function () {\n            // CEN header size (46 bytes)\n            var data = Buffer.alloc(Constants.CENHDR + _fnameLen + _extraLen + _comLen);\n            // \"PK\\001\\002\"\n            data.writeUInt32LE(Constants.CENSIG, 0);\n            // version made by\n            data.writeUInt16LE(_verMade, Constants.CENVEM);\n            // version needed to extract\n            data.writeUInt16LE(_version, Constants.CENVER);\n            // encrypt, decrypt flags\n            data.writeUInt16LE(_flags, Constants.CENFLG);\n            // compression method\n            data.writeUInt16LE(_method, Constants.CENHOW);\n            // modification time (2 bytes time, 2 bytes date)\n            data.writeUInt32LE(_time, Constants.CENTIM);\n            // uncompressed file crc-32 value\n            data.writeUInt32LE(_crc, Constants.CENCRC);\n            // compressed size\n            data.writeUInt32LE(_compressedSize, Constants.CENSIZ);\n            // uncompressed size\n            data.writeUInt32LE(_size, Constants.CENLEN);\n            // filename length\n            data.writeUInt16LE(_fnameLen, Constants.CENNAM);\n            // extra field length\n            data.writeUInt16LE(_extraLen, Constants.CENEXT);\n            // file comment length\n            data.writeUInt16LE(_comLen, Constants.CENCOM);\n            // volume number start\n            data.writeUInt16LE(_diskStart, Constants.CENDSK);\n            // internal file attributes\n            data.writeUInt16LE(_inattr, Constants.CENATT);\n            // external file attributes\n            data.writeUInt32LE(_attr, Constants.CENATX);\n            // LOC header offset\n            data.writeUInt32LE(_offset, Constants.CENOFF);\n            return data;\n        },\n\n        toJSON: function () {\n            const bytes = function (nr) {\n                return nr + \" bytes\";\n            };\n\n            return {\n                made: _verMade,\n                version: _version,\n                flags: _flags,\n                method: Utils.methodToString(_method),\n                time: this.time,\n                crc: \"0x\" + _crc.toString(16).toUpperCase(),\n                compressedSize: bytes(_compressedSize),\n                size: bytes(_size),\n                fileNameLength: bytes(_fnameLen),\n                extraLength: bytes(_extraLen),\n                commentLength: bytes(_comLen),\n                diskNumStart: _diskStart,\n                inAttr: _inattr,\n                attr: _attr,\n                offset: _offset,\n                centralHeaderSize: bytes(Constants.CENHDR + _fnameLen + _extraLen + _comLen)\n            };\n        },\n\n        toString: function () {\n            return JSON.stringify(this.toJSON(), null, \"\\t\");\n        }\n    };\n};\n", "var Utils = require(\"../util\"),\n    Constants = Utils.Constants;\n\n/* The entries in the end of central directory */\nmodule.exports = function () {\n    var _volumeEntries = 0,\n        _totalEntries = 0,\n        _size = 0,\n        _offset = 0,\n        _commentLength = 0;\n\n    return {\n        get diskEntries() {\n            return _volumeEntries;\n        },\n        set diskEntries(/*Number*/ val) {\n            _volumeEntries = _totalEntries = val;\n        },\n\n        get totalEntries() {\n            return _totalEntries;\n        },\n        set totalEntries(/*Number*/ val) {\n            _totalEntries = _volumeEntries = val;\n        },\n\n        get size() {\n            return _size;\n        },\n        set size(/*Number*/ val) {\n            _size = val;\n        },\n\n        get offset() {\n            return _offset;\n        },\n        set offset(/*Number*/ val) {\n            _offset = val;\n        },\n\n        get commentLength() {\n            return _commentLength;\n        },\n        set commentLength(/*Number*/ val) {\n            _commentLength = val;\n        },\n\n        get mainHeaderSize() {\n            return Constants.ENDHDR + _commentLength;\n        },\n\n        loadFromBinary: function (/*Buffer*/ data) {\n            // data should be 22 bytes and start with \"PK 05 06\"\n            // or be 56+ bytes and start with \"PK 06 06\" for Zip64\n            if (\n                (data.length !== Constants.ENDHDR || data.readUInt32LE(0) !== Constants.ENDSIG) &&\n                (data.length < Constants.ZIP64HDR || data.readUInt32LE(0) !== Constants.ZIP64SIG)\n            ) {\n                throw Utils.Errors.INVALID_END();\n            }\n\n            if (data.readUInt32LE(0) === Constants.ENDSIG) {\n                // number of entries on this volume\n                _volumeEntries = data.readUInt16LE(Constants.ENDSUB);\n                // total number of entries\n                _totalEntries = data.readUInt16LE(Constants.ENDTOT);\n                // central directory size in bytes\n                _size = data.readUInt32LE(Constants.ENDSIZ);\n                // offset of first CEN header\n                _offset = data.readUInt32LE(Constants.ENDOFF);\n                // zip file comment length\n                _commentLength = data.readUInt16LE(Constants.ENDCOM);\n            } else {\n                // number of entries on this volume\n                _volumeEntries = Utils.readBigUInt64LE(data, Constants.ZIP64SUB);\n                // total number of entries\n                _totalEntries = Utils.readBigUInt64LE(data, Constants.ZIP64TOT);\n                // central directory size in bytes\n                _size = Utils.readBigUInt64LE(data, Constants.ZIP64SIZE);\n                // offset of first CEN header\n                _offset = Utils.readBigUInt64LE(data, Constants.ZIP64OFF);\n\n                _commentLength = 0;\n            }\n        },\n\n        toBinary: function () {\n            var b = Buffer.alloc(Constants.ENDHDR + _commentLength);\n            // \"PK 05 06\" signature\n            b.writeUInt32LE(Constants.ENDSIG, 0);\n            b.writeUInt32LE(0, 4);\n            // number of entries on this volume\n            b.writeUInt16LE(_volumeEntries, Constants.ENDSUB);\n            // total number of entries\n            b.writeUInt16LE(_totalEntries, Constants.ENDTOT);\n            // central directory size in bytes\n            b.writeUInt32LE(_size, Constants.ENDSIZ);\n            // offset of first CEN header\n            b.writeUInt32LE(_offset, Constants.ENDOFF);\n            // zip file comment length\n            b.writeUInt16LE(_commentLength, Constants.ENDCOM);\n            // fill comment memory with spaces so no garbage is left there\n            b.fill(\" \", Constants.ENDHDR);\n\n            return b;\n        },\n\n        toJSON: function () {\n            // creates 0x0000 style output\n            const offset = function (nr, len) {\n                let offs = nr.toString(16).toUpperCase();\n                while (offs.length < len) offs = \"0\" + offs;\n                return \"0x\" + offs;\n            };\n\n            return {\n                diskEntries: _volumeEntries,\n                totalEntries: _totalEntries,\n                size: _size + \" bytes\",\n                offset: offset(_offset, 4),\n                commentLength: _commentLength\n            };\n        },\n\n        toString: function () {\n            return JSON.stringify(this.toJSON(), null, \"\\t\");\n        }\n    };\n};\n// Misspelled\n", "exports.EntryHeader = require(\"./entryHeader\");\nexports.MainHeader = require(\"./mainHeader\");\n", "module.exports = function (/*Buffer*/ inbuf) {\n    var zlib = require(\"zlib\");\n\n    var opts = { chunkSize: (parseInt(inbuf.length / 1024) + 1) * 1024 };\n\n    return {\n        deflate: function () {\n            return zlib.deflateRawSync(inbuf, opts);\n        },\n\n        deflateAsync: function (/*Function*/ callback) {\n            var tmp = zlib.createDeflateRaw(opts),\n                parts = [],\n                total = 0;\n            tmp.on(\"data\", function (data) {\n                parts.push(data);\n                total += data.length;\n            });\n            tmp.on(\"end\", function () {\n                var buf = Buffer.alloc(total),\n                    written = 0;\n                buf.fill(0);\n                for (var i = 0; i < parts.length; i++) {\n                    var part = parts[i];\n                    part.copy(buf, written);\n                    written += part.length;\n                }\n                callback && callback(buf);\n            });\n            tmp.end(inbuf);\n        }\n    };\n};\n", "const version = +(process.versions ? process.versions.node : \"\").split(\".\")[0] || 0;\n\nmodule.exports = function (/*Buffer*/ inbuf, /*number*/ expectedLength) {\n    var zlib = require(\"zlib\");\n    const option = version >= 15 && expectedLength > 0 ? { maxOutputLength: expectedLength } : {};\n\n    return {\n        inflate: function () {\n            return zlib.inflateRawSync(inbuf, option);\n        },\n\n        inflateAsync: function (/*Function*/ callback) {\n            var tmp = zlib.createInflateRaw(option),\n                parts = [],\n                total = 0;\n            tmp.on(\"data\", function (data) {\n                parts.push(data);\n                total += data.length;\n            });\n            tmp.on(\"end\", function () {\n                var buf = Buffer.alloc(total),\n                    written = 0;\n                buf.fill(0);\n                for (var i = 0; i < parts.length; i++) {\n                    var part = parts[i];\n                    part.copy(buf, written);\n                    written += part.length;\n                }\n                callback && callback(buf);\n            });\n            tmp.end(inbuf);\n        }\n    };\n};\n", "\"use strict\";\n\n// node crypt, we use it for generate salt\n// eslint-disable-next-line node/no-unsupported-features/node-builtins\nconst { randomFillSync } = require(\"crypto\");\nconst Errors = require(\"../util/errors\");\n\n// generate CRC32 lookup table\nconst crctable = new Uint32Array(256).map((t, crc) => {\n    for (let j = 0; j < 8; j++) {\n        if (0 !== (crc & 1)) {\n            crc = (crc >>> 1) ^ 0xedb88320;\n        } else {\n            crc >>>= 1;\n        }\n    }\n    return crc >>> 0;\n});\n\n// C-style uInt32 Multiply (discards higher bits, when JS multiply discards lower bits)\nconst uMul = (a, b) => Math.imul(a, b) >>> 0;\n\n// crc32 byte single update (actually same function is part of utils.crc32 function :) )\nconst crc32update = (pCrc32, bval) => {\n    return crctable[(pCrc32 ^ bval) & 0xff] ^ (pCrc32 >>> 8);\n};\n\n// function for generating salt for encrytion header\nconst genSalt = () => {\n    if (\"function\" === typeof randomFillSync) {\n        return randomFillSync(Buffer.alloc(12));\n    } else {\n        // fallback if function is not defined\n        return genSalt.node();\n    }\n};\n\n// salt generation with node random function (mainly as fallback)\ngenSalt.node = () => {\n    const salt = Buffer.alloc(12);\n    const len = salt.length;\n    for (let i = 0; i < len; i++) salt[i] = (Math.random() * 256) & 0xff;\n    return salt;\n};\n\n// general config\nconst config = {\n    genSalt\n};\n\n// Class Initkeys handles same basic ops with keys\nfunction Initkeys(pw) {\n    const pass = Buffer.isBuffer(pw) ? pw : Buffer.from(pw);\n    this.keys = new Uint32Array([0x12345678, 0x23456789, 0x34567890]);\n    for (let i = 0; i < pass.length; i++) {\n        this.updateKeys(pass[i]);\n    }\n}\n\nInitkeys.prototype.updateKeys = function (byteValue) {\n    const keys = this.keys;\n    keys[0] = crc32update(keys[0], byteValue);\n    keys[1] += keys[0] & 0xff;\n    keys[1] = uMul(keys[1], 134775813) + 1;\n    keys[2] = crc32update(keys[2], keys[1] >>> 24);\n    return byteValue;\n};\n\nInitkeys.prototype.next = function () {\n    const k = (this.keys[2] | 2) >>> 0; // key\n    return (uMul(k, k ^ 1) >> 8) & 0xff; // decode\n};\n\nfunction make_decrypter(/*Buffer*/ pwd) {\n    // 1. Stage initialize key\n    const keys = new Initkeys(pwd);\n\n    // return decrypter function\n    return function (/*Buffer*/ data) {\n        // result - we create new Buffer for results\n        const result = Buffer.alloc(data.length);\n        let pos = 0;\n        // process input data\n        for (let c of data) {\n            //c ^= keys.next();\n            //result[pos++] = c; // decode & Save Value\n            result[pos++] = keys.updateKeys(c ^ keys.next()); // update keys with decoded byte\n        }\n        return result;\n    };\n}\n\nfunction make_encrypter(/*Buffer*/ pwd) {\n    // 1. Stage initialize key\n    const keys = new Initkeys(pwd);\n\n    // return encrypting function, result and pos is here so we dont have to merge buffers later\n    return function (/*Buffer*/ data, /*Buffer*/ result, /* Number */ pos = 0) {\n        // result - we create new Buffer for results\n        if (!result) result = Buffer.alloc(data.length);\n        // process input data\n        for (let c of data) {\n            const k = keys.next(); // save key byte\n            result[pos++] = c ^ k; // save val\n            keys.updateKeys(c); // update keys with decoded byte\n        }\n        return result;\n    };\n}\n\nfunction decrypt(/*Buffer*/ data, /*Object*/ header, /*String, Buffer*/ pwd) {\n    if (!data || !Buffer.isBuffer(data) || data.length < 12) {\n        return Buffer.alloc(0);\n    }\n\n    // 1. We Initialize and generate decrypting function\n    const decrypter = make_decrypter(pwd);\n\n    // 2. decrypt salt what is always 12 bytes and is a part of file content\n    const salt = decrypter(data.slice(0, 12));\n\n    // if bit 3 (0x08) of the general-purpose flags field is set, check salt[11] with the high byte of the header time\n    // 2 byte data block (as per Info-Zip spec), otherwise check with the high byte of the header entry\n    const verifyByte = (header.flags & 0x8) === 0x8 ? header.timeHighByte : header.crc >>> 24;\n\n    //3. does password meet expectations\n    if (salt[11] !== verifyByte) {\n        throw Errors.WRONG_PASSWORD();\n    }\n\n    // 4. decode content\n    return decrypter(data.slice(12));\n}\n\n// lets add way to populate salt, NOT RECOMMENDED for production but maybe useful for testing general functionality\nfunction _salter(data) {\n    if (Buffer.isBuffer(data) && data.length >= 12) {\n        // be aware - currently salting buffer data is modified\n        config.genSalt = function () {\n            return data.slice(0, 12);\n        };\n    } else if (data === \"node\") {\n        // test salt generation with node random function\n        config.genSalt = genSalt.node;\n    } else {\n        // if value is not acceptable config gets reset.\n        config.genSalt = genSalt;\n    }\n}\n\nfunction encrypt(/*Buffer*/ data, /*Object*/ header, /*String, Buffer*/ pwd, /*Boolean*/ oldlike = false) {\n    // 1. test data if data is not Buffer we make buffer from it\n    if (data == null) data = Buffer.alloc(0);\n    // if data is not buffer be make buffer from it\n    if (!Buffer.isBuffer(data)) data = Buffer.from(data.toString());\n\n    // 2. We Initialize and generate encrypting function\n    const encrypter = make_encrypter(pwd);\n\n    // 3. generate salt (12-bytes of random data)\n    const salt = config.genSalt();\n    salt[11] = (header.crc >>> 24) & 0xff;\n\n    // old implementations (before PKZip 2.04g) used two byte check\n    if (oldlike) salt[10] = (header.crc >>> 16) & 0xff;\n\n    // 4. create output\n    const result = Buffer.alloc(data.length + 12);\n    encrypter(salt, result);\n\n    // finally encode content\n    return encrypter(data, result, 12);\n}\n\nmodule.exports = { decrypt, encrypt, _salter };\n", "exports.Deflater = require(\"./deflater\");\nexports.Inflater = require(\"./inflater\");\nexports.ZipCrypto = require(\"./zipcrypto\");\n", "var Utils = require(\"./util\"),\n    Headers = require(\"./headers\"),\n    Constants = Utils.Constants,\n    Methods = require(\"./methods\");\n\nmodule.exports = function (/** object */ options, /*Buffer*/ input) {\n    var _centralHeader = new Headers.EntryHeader(),\n        _entryName = Buffer.alloc(0),\n        _comment = Buffer.alloc(0),\n        _isDirectory = false,\n        uncompressedData = null,\n        _extra = Buffer.alloc(0),\n        _extralocal = Buffer.alloc(0),\n        _efs = true;\n\n    // assign options\n    const opts = options;\n\n    const decoder = typeof opts.decoder === \"object\" ? opts.decoder : Utils.decoder;\n    _efs = decoder.hasOwnProperty(\"efs\") ? decoder.efs : false;\n\n    function getCompressedDataFromZip() {\n        //if (!input || !Buffer.isBuffer(input)) {\n        if (!input || !(input instanceof Uint8Array)) {\n            return Buffer.alloc(0);\n        }\n        _extralocal = _centralHeader.loadLocalHeaderFromBinary(input);\n        return input.slice(_centralHeader.realDataOffset, _centralHeader.realDataOffset + _centralHeader.compressedSize);\n    }\n\n    function crc32OK(data) {\n        // if bit 3 (0x08) of the general-purpose flags field is set, then the CRC-32 and file sizes are not known when the local header is written\n        if (!_centralHeader.flags_desc) {\n            if (Utils.crc32(data) !== _centralHeader.localHeader.crc) {\n                return false;\n            }\n        } else {\n            const descriptor = {};\n            const dataEndOffset = _centralHeader.realDataOffset + _centralHeader.compressedSize;\n            // no descriptor after compressed data, instead new local header\n            if (input.readUInt32LE(dataEndOffset) == Constants.LOCSIG || input.readUInt32LE(dataEndOffset) == Constants.CENSIG) {\n                throw Utils.Errors.DESCRIPTOR_NOT_EXIST();\n            }\n\n            // get decriptor data\n            if (input.readUInt32LE(dataEndOffset) == Constants.EXTSIG) {\n                // descriptor with signature\n                descriptor.crc = input.readUInt32LE(dataEndOffset + Constants.EXTCRC);\n                descriptor.compressedSize = input.readUInt32LE(dataEndOffset + Constants.EXTSIZ);\n                descriptor.size = input.readUInt32LE(dataEndOffset + Constants.EXTLEN);\n            } else if (input.readUInt16LE(dataEndOffset + 12) === 0x4b50) {\n                // descriptor without signature (we check is new header starting where we expect)\n                descriptor.crc = input.readUInt32LE(dataEndOffset + Constants.EXTCRC - 4);\n                descriptor.compressedSize = input.readUInt32LE(dataEndOffset + Constants.EXTSIZ - 4);\n                descriptor.size = input.readUInt32LE(dataEndOffset + Constants.EXTLEN - 4);\n            } else {\n                throw Utils.Errors.DESCRIPTOR_UNKNOWN();\n            }\n\n            // check data integrity\n            if (descriptor.compressedSize !== _centralHeader.compressedSize || descriptor.size !== _centralHeader.size || descriptor.crc !== _centralHeader.crc) {\n                throw Utils.Errors.DESCRIPTOR_FAULTY();\n            }\n            if (Utils.crc32(data) !== descriptor.crc) {\n                return false;\n            }\n\n            // @TODO: zip64 bit descriptor fields\n            // if bit 3 is set and any value in local header \"zip64 Extended information\" extra field are set 0 (place holder)\n            // then 64-bit descriptor format is used instead of 32-bit\n            // central header - \"zip64 Extended information\" extra field should store real values and not place holders\n        }\n        return true;\n    }\n\n    function decompress(/*Boolean*/ async, /*Function*/ callback, /*String, Buffer*/ pass) {\n        if (typeof callback === \"undefined\" && typeof async === \"string\") {\n            pass = async;\n            async = void 0;\n        }\n        if (_isDirectory) {\n            if (async && callback) {\n                callback(Buffer.alloc(0), Utils.Errors.DIRECTORY_CONTENT_ERROR()); //si added error.\n            }\n            return Buffer.alloc(0);\n        }\n\n        var compressedData = getCompressedDataFromZip();\n\n        if (compressedData.length === 0) {\n            // File is empty, nothing to decompress.\n            if (async && callback) callback(compressedData);\n            return compressedData;\n        }\n\n        if (_centralHeader.encrypted) {\n            if (\"string\" !== typeof pass && !Buffer.isBuffer(pass)) {\n                throw Utils.Errors.INVALID_PASS_PARAM();\n            }\n            compressedData = Methods.ZipCrypto.decrypt(compressedData, _centralHeader, pass);\n        }\n\n        var data = Buffer.alloc(_centralHeader.size);\n\n        switch (_centralHeader.method) {\n            case Utils.Constants.STORED:\n                compressedData.copy(data);\n                if (!crc32OK(data)) {\n                    if (async && callback) callback(data, Utils.Errors.BAD_CRC()); //si added error\n                    throw Utils.Errors.BAD_CRC();\n                } else {\n                    //si added otherwise did not seem to return data.\n                    if (async && callback) callback(data);\n                    return data;\n                }\n            case Utils.Constants.DEFLATED:\n                var inflater = new Methods.Inflater(compressedData, _centralHeader.size);\n                if (!async) {\n                    const result = inflater.inflate(data);\n                    result.copy(data, 0);\n                    if (!crc32OK(data)) {\n                        throw Utils.Errors.BAD_CRC(`\"${decoder.decode(_entryName)}\"`);\n                    }\n                    return data;\n                } else {\n                    inflater.inflateAsync(function (result) {\n                        result.copy(result, 0);\n                        if (callback) {\n                            if (!crc32OK(result)) {\n                                callback(result, Utils.Errors.BAD_CRC()); //si added error\n                            } else {\n                                callback(result);\n                            }\n                        }\n                    });\n                }\n                break;\n            default:\n                if (async && callback) callback(Buffer.alloc(0), Utils.Errors.UNKNOWN_METHOD());\n                throw Utils.Errors.UNKNOWN_METHOD();\n        }\n    }\n\n    function compress(/*Boolean*/ async, /*Function*/ callback) {\n        if ((!uncompressedData || !uncompressedData.length) && Buffer.isBuffer(input)) {\n            // no data set or the data wasn't changed to require recompression\n            if (async && callback) callback(getCompressedDataFromZip());\n            return getCompressedDataFromZip();\n        }\n\n        if (uncompressedData.length && !_isDirectory) {\n            var compressedData;\n            // Local file header\n            switch (_centralHeader.method) {\n                case Utils.Constants.STORED:\n                    _centralHeader.compressedSize = _centralHeader.size;\n\n                    compressedData = Buffer.alloc(uncompressedData.length);\n                    uncompressedData.copy(compressedData);\n\n                    if (async && callback) callback(compressedData);\n                    return compressedData;\n                default:\n                case Utils.Constants.DEFLATED:\n                    var deflater = new Methods.Deflater(uncompressedData);\n                    if (!async) {\n                        var deflated = deflater.deflate();\n                        _centralHeader.compressedSize = deflated.length;\n                        return deflated;\n                    } else {\n                        deflater.deflateAsync(function (data) {\n                            compressedData = Buffer.alloc(data.length);\n                            _centralHeader.compressedSize = data.length;\n                            data.copy(compressedData);\n                            callback && callback(compressedData);\n                        });\n                    }\n                    deflater = null;\n                    break;\n            }\n        } else if (async && callback) {\n            callback(Buffer.alloc(0));\n        } else {\n            return Buffer.alloc(0);\n        }\n    }\n\n    function readUInt64LE(buffer, offset) {\n        return (buffer.readUInt32LE(offset + 4) << 4) + buffer.readUInt32LE(offset);\n    }\n\n    function parseExtra(data) {\n        try {\n            var offset = 0;\n            var signature, size, part;\n            while (offset + 4 < data.length) {\n                signature = data.readUInt16LE(offset);\n                offset += 2;\n                size = data.readUInt16LE(offset);\n                offset += 2;\n                part = data.slice(offset, offset + size);\n                offset += size;\n                if (Constants.ID_ZIP64 === signature) {\n                    parseZip64ExtendedInformation(part);\n                }\n            }\n        } catch (error) {\n            throw Utils.Errors.EXTRA_FIELD_PARSE_ERROR();\n        }\n    }\n\n    //Override header field values with values from the ZIP64 extra field\n    function parseZip64ExtendedInformation(data) {\n        var size, compressedSize, offset, diskNumStart;\n\n        if (data.length >= Constants.EF_ZIP64_SCOMP) {\n            size = readUInt64LE(data, Constants.EF_ZIP64_SUNCOMP);\n            if (_centralHeader.size === Constants.EF_ZIP64_OR_32) {\n                _centralHeader.size = size;\n            }\n        }\n        if (data.length >= Constants.EF_ZIP64_RHO) {\n            compressedSize = readUInt64LE(data, Constants.EF_ZIP64_SCOMP);\n            if (_centralHeader.compressedSize === Constants.EF_ZIP64_OR_32) {\n                _centralHeader.compressedSize = compressedSize;\n            }\n        }\n        if (data.length >= Constants.EF_ZIP64_DSN) {\n            offset = readUInt64LE(data, Constants.EF_ZIP64_RHO);\n            if (_centralHeader.offset === Constants.EF_ZIP64_OR_32) {\n                _centralHeader.offset = offset;\n            }\n        }\n        if (data.length >= Constants.EF_ZIP64_DSN + 4) {\n            diskNumStart = data.readUInt32LE(Constants.EF_ZIP64_DSN);\n            if (_centralHeader.diskNumStart === Constants.EF_ZIP64_OR_16) {\n                _centralHeader.diskNumStart = diskNumStart;\n            }\n        }\n    }\n\n    return {\n        get entryName() {\n            return decoder.decode(_entryName);\n        },\n        get rawEntryName() {\n            return _entryName;\n        },\n        set entryName(val) {\n            _entryName = Utils.toBuffer(val, decoder.encode);\n            var lastChar = _entryName[_entryName.length - 1];\n            _isDirectory = lastChar === 47 || lastChar === 92;\n            _centralHeader.fileNameLength = _entryName.length;\n        },\n\n        get efs() {\n            if (typeof _efs === \"function\") {\n                return _efs(this.entryName);\n            } else {\n                return _efs;\n            }\n        },\n\n        get extra() {\n            return _extra;\n        },\n        set extra(val) {\n            _extra = val;\n            _centralHeader.extraLength = val.length;\n            parseExtra(val);\n        },\n\n        get comment() {\n            return decoder.decode(_comment);\n        },\n        set comment(val) {\n            _comment = Utils.toBuffer(val, decoder.encode);\n            _centralHeader.commentLength = _comment.length;\n            if (_comment.length > 0xffff) throw Utils.Errors.COMMENT_TOO_LONG();\n        },\n\n        get name() {\n            var n = decoder.decode(_entryName);\n            return _isDirectory\n                ? n\n                      .substr(n.length - 1)\n                      .split(\"/\")\n                      .pop()\n                : n.split(\"/\").pop();\n        },\n        get isDirectory() {\n            return _isDirectory;\n        },\n\n        getCompressedData: function () {\n            return compress(false, null);\n        },\n\n        getCompressedDataAsync: function (/*Function*/ callback) {\n            compress(true, callback);\n        },\n\n        setData: function (value) {\n            uncompressedData = Utils.toBuffer(value, Utils.decoder.encode);\n            if (!_isDirectory && uncompressedData.length) {\n                _centralHeader.size = uncompressedData.length;\n                _centralHeader.method = Utils.Constants.DEFLATED;\n                _centralHeader.crc = Utils.crc32(value);\n                _centralHeader.changed = true;\n            } else {\n                // folders and blank files should be stored\n                _centralHeader.method = Utils.Constants.STORED;\n            }\n        },\n\n        getData: function (pass) {\n            if (_centralHeader.changed) {\n                return uncompressedData;\n            } else {\n                return decompress(false, null, pass);\n            }\n        },\n\n        getDataAsync: function (/*Function*/ callback, pass) {\n            if (_centralHeader.changed) {\n                callback(uncompressedData);\n            } else {\n                decompress(true, callback, pass);\n            }\n        },\n\n        set attr(attr) {\n            _centralHeader.attr = attr;\n        },\n        get attr() {\n            return _centralHeader.attr;\n        },\n\n        set header(/*Buffer*/ data) {\n            _centralHeader.loadFromBinary(data);\n        },\n\n        get header() {\n            return _centralHeader;\n        },\n\n        packCentralHeader: function () {\n            _centralHeader.flags_efs = this.efs;\n            _centralHeader.extraLength = _extra.length;\n            // 1. create header (buffer)\n            var header = _centralHeader.centralHeaderToBinary();\n            var addpos = Utils.Constants.CENHDR;\n            // 2. add file name\n            _entryName.copy(header, addpos);\n            addpos += _entryName.length;\n            // 3. add extra data\n            _extra.copy(header, addpos);\n            addpos += _centralHeader.extraLength;\n            // 4. add file comment\n            _comment.copy(header, addpos);\n            return header;\n        },\n\n        packLocalHeader: function () {\n            let addpos = 0;\n            _centralHeader.flags_efs = this.efs;\n            _centralHeader.extraLocalLength = _extralocal.length;\n            // 1. construct local header Buffer\n            const localHeaderBuf = _centralHeader.localHeaderToBinary();\n            // 2. localHeader - crate header buffer\n            const localHeader = Buffer.alloc(localHeaderBuf.length + _entryName.length + _centralHeader.extraLocalLength);\n            // 2.1 add localheader\n            localHeaderBuf.copy(localHeader, addpos);\n            addpos += localHeaderBuf.length;\n            // 2.2 add file name\n            _entryName.copy(localHeader, addpos);\n            addpos += _entryName.length;\n            // 2.3 add extra field\n            _extralocal.copy(localHeader, addpos);\n            addpos += _extralocal.length;\n\n            return localHeader;\n        },\n\n        toJSON: function () {\n            const bytes = function (nr) {\n                return \"<\" + ((nr && nr.length + \" bytes buffer\") || \"null\") + \">\";\n            };\n\n            return {\n                entryName: this.entryName,\n                name: this.name,\n                comment: this.comment,\n                isDirectory: this.isDirectory,\n                header: _centralHeader.toJSON(),\n                compressedData: bytes(input),\n                data: bytes(uncompressedData)\n            };\n        },\n\n        toString: function () {\n            return JSON.stringify(this.toJSON(), null, \"\\t\");\n        }\n    };\n};\n", "const ZipEntry = require(\"./zipEntry\");\nconst Headers = require(\"./headers\");\nconst Utils = require(\"./util\");\n\nmodule.exports = function (/*Buffer|null*/ inBuffer, /** object */ options) {\n    var entryList = [],\n        entryTable = {},\n        _comment = Buffer.alloc(0),\n        mainHeader = new Headers.MainHeader(),\n        loadedEntries = false;\n    var password = null;\n    const temporary = new Set();\n\n    // assign options\n    const opts = options;\n\n    const { noSort, decoder } = opts;\n\n    if (inBuffer) {\n        // is a memory buffer\n        readMainHeader(opts.readEntries);\n    } else {\n        // none. is a new file\n        loadedEntries = true;\n    }\n\n    function makeTemporaryFolders() {\n        const foldersList = new Set();\n\n        // Make list of all folders in file\n        for (const elem of Object.keys(entryTable)) {\n            const elements = elem.split(\"/\");\n            elements.pop(); // filename\n            if (!elements.length) continue; // no folders\n            for (let i = 0; i < elements.length; i++) {\n                const sub = elements.slice(0, i + 1).join(\"/\") + \"/\";\n                foldersList.add(sub);\n            }\n        }\n\n        // create missing folders as temporary\n        for (const elem of foldersList) {\n            if (!(elem in entryTable)) {\n                const tempfolder = new ZipEntry(opts);\n                tempfolder.entryName = elem;\n                tempfolder.attr = 0x10;\n                tempfolder.temporary = true;\n                entryList.push(tempfolder);\n                entryTable[tempfolder.entryName] = tempfolder;\n                temporary.add(tempfolder);\n            }\n        }\n    }\n\n    function readEntries() {\n        loadedEntries = true;\n        entryTable = {};\n        if (mainHeader.diskEntries > (inBuffer.length - mainHeader.offset) / Utils.Constants.CENHDR) {\n            throw Utils.Errors.DISK_ENTRY_TOO_LARGE();\n        }\n        entryList = new Array(mainHeader.diskEntries); // total number of entries\n        var index = mainHeader.offset; // offset of first CEN header\n        for (var i = 0; i < entryList.length; i++) {\n            var tmp = index,\n                entry = new ZipEntry(opts, inBuffer);\n            entry.header = inBuffer.slice(tmp, (tmp += Utils.Constants.CENHDR));\n\n            entry.entryName = inBuffer.slice(tmp, (tmp += entry.header.fileNameLength));\n\n            if (entry.header.extraLength) {\n                entry.extra = inBuffer.slice(tmp, (tmp += entry.header.extraLength));\n            }\n\n            if (entry.header.commentLength) entry.comment = inBuffer.slice(tmp, tmp + entry.header.commentLength);\n\n            index += entry.header.centralHeaderSize;\n\n            entryList[i] = entry;\n            entryTable[entry.entryName] = entry;\n        }\n        temporary.clear();\n        makeTemporaryFolders();\n    }\n\n    function readMainHeader(/*Boolean*/ readNow) {\n        var i = inBuffer.length - Utils.Constants.ENDHDR, // END header size\n            max = Math.max(0, i - 0xffff), // 0xFFFF is the max zip file comment length\n            n = max,\n            endStart = inBuffer.length,\n            endOffset = -1, // Start offset of the END header\n            commentEnd = 0;\n\n        // option to search header form entire file\n        const trailingSpace = typeof opts.trailingSpace === \"boolean\" ? opts.trailingSpace : false;\n        if (trailingSpace) max = 0;\n\n        for (i; i >= n; i--) {\n            if (inBuffer[i] !== 0x50) continue; // quick check that the byte is 'P'\n            if (inBuffer.readUInt32LE(i) === Utils.Constants.ENDSIG) {\n                // \"PK\\005\\006\"\n                endOffset = i;\n                commentEnd = i;\n                endStart = i + Utils.Constants.ENDHDR;\n                // We already found a regular signature, let's look just a bit further to check if there's any zip64 signature\n                n = i - Utils.Constants.END64HDR;\n                continue;\n            }\n\n            if (inBuffer.readUInt32LE(i) === Utils.Constants.END64SIG) {\n                // Found a zip64 signature, let's continue reading the whole zip64 record\n                n = max;\n                continue;\n            }\n\n            if (inBuffer.readUInt32LE(i) === Utils.Constants.ZIP64SIG) {\n                // Found the zip64 record, let's determine it's size\n                endOffset = i;\n                endStart = i + Utils.readBigUInt64LE(inBuffer, i + Utils.Constants.ZIP64SIZE) + Utils.Constants.ZIP64LEAD;\n                break;\n            }\n        }\n\n        if (endOffset == -1) throw Utils.Errors.INVALID_FORMAT();\n\n        mainHeader.loadFromBinary(inBuffer.slice(endOffset, endStart));\n        if (mainHeader.commentLength) {\n            _comment = inBuffer.slice(commentEnd + Utils.Constants.ENDHDR);\n        }\n        if (readNow) readEntries();\n    }\n\n    function sortEntries() {\n        if (entryList.length > 1 && !noSort) {\n            entryList.sort((a, b) => a.entryName.toLowerCase().localeCompare(b.entryName.toLowerCase()));\n        }\n    }\n\n    return {\n        /**\n         * Returns an array of ZipEntry objects existent in the current opened archive\n         * @return Array\n         */\n        get entries() {\n            if (!loadedEntries) {\n                readEntries();\n            }\n            return entryList.filter((e) => !temporary.has(e));\n        },\n\n        /**\n         * Archive comment\n         * @return {String}\n         */\n        get comment() {\n            return decoder.decode(_comment);\n        },\n        set comment(val) {\n            _comment = Utils.toBuffer(val, decoder.encode);\n            mainHeader.commentLength = _comment.length;\n        },\n\n        getEntryCount: function () {\n            if (!loadedEntries) {\n                return mainHeader.diskEntries;\n            }\n\n            return entryList.length;\n        },\n\n        forEach: function (callback) {\n            this.entries.forEach(callback);\n        },\n\n        /**\n         * Returns a reference to the entry with the given name or null if entry is inexistent\n         *\n         * @param entryName\n         * @return ZipEntry\n         */\n        getEntry: function (/*String*/ entryName) {\n            if (!loadedEntries) {\n                readEntries();\n            }\n            return entryTable[entryName] || null;\n        },\n\n        /**\n         * Adds the given entry to the entry list\n         *\n         * @param entry\n         */\n        setEntry: function (/*ZipEntry*/ entry) {\n            if (!loadedEntries) {\n                readEntries();\n            }\n            entryList.push(entry);\n            entryTable[entry.entryName] = entry;\n            mainHeader.totalEntries = entryList.length;\n        },\n\n        /**\n         * Removes the file with the given name from the entry list.\n         *\n         * If the entry is a directory, then all nested files and directories will be removed\n         * @param entryName\n         * @returns {void}\n         */\n        deleteFile: function (/*String*/ entryName, withsubfolders = true) {\n            if (!loadedEntries) {\n                readEntries();\n            }\n            const entry = entryTable[entryName];\n            const list = this.getEntryChildren(entry, withsubfolders).map((child) => child.entryName);\n\n            list.forEach(this.deleteEntry);\n        },\n\n        /**\n         * Removes the entry with the given name from the entry list.\n         *\n         * @param {string} entryName\n         * @returns {void}\n         */\n        deleteEntry: function (/*String*/ entryName) {\n            if (!loadedEntries) {\n                readEntries();\n            }\n            const entry = entryTable[entryName];\n            const index = entryList.indexOf(entry);\n            if (index >= 0) {\n                entryList.splice(index, 1);\n                delete entryTable[entryName];\n                mainHeader.totalEntries = entryList.length;\n            }\n        },\n\n        /**\n         *  Iterates and returns all nested files and directories of the given entry\n         *\n         * @param entry\n         * @return Array\n         */\n        getEntryChildren: function (/*ZipEntry*/ entry, subfolders = true) {\n            if (!loadedEntries) {\n                readEntries();\n            }\n            if (typeof entry === \"object\") {\n                if (entry.isDirectory && subfolders) {\n                    const list = [];\n                    const name = entry.entryName;\n\n                    for (const zipEntry of entryList) {\n                        if (zipEntry.entryName.startsWith(name)) {\n                            list.push(zipEntry);\n                        }\n                    }\n                    return list;\n                } else {\n                    return [entry];\n                }\n            }\n            return [];\n        },\n\n        /**\n         *  How many child elements entry has\n         *\n         * @param {ZipEntry} entry\n         * @return {integer}\n         */\n        getChildCount: function (entry) {\n            if (entry && entry.isDirectory) {\n                const list = this.getEntryChildren(entry);\n                return list.includes(entry) ? list.length - 1 : list.length;\n            }\n            return 0;\n        },\n\n        /**\n         * Returns the zip file\n         *\n         * @return Buffer\n         */\n        compressToBuffer: function () {\n            if (!loadedEntries) {\n                readEntries();\n            }\n            sortEntries();\n\n            const dataBlock = [];\n            const headerBlocks = [];\n            let totalSize = 0;\n            let dindex = 0;\n\n            mainHeader.size = 0;\n            mainHeader.offset = 0;\n            let totalEntries = 0;\n\n            for (const entry of this.entries) {\n                // compress data and set local and entry header accordingly. Reason why is called first\n                const compressedData = entry.getCompressedData();\n                entry.header.offset = dindex;\n\n                // 1. construct local header\n                const localHeader = entry.packLocalHeader();\n\n                // 2. offsets\n                const dataLength = localHeader.length + compressedData.length;\n                dindex += dataLength;\n\n                // 3. store values in sequence\n                dataBlock.push(localHeader);\n                dataBlock.push(compressedData);\n\n                // 4. construct central header\n                const centralHeader = entry.packCentralHeader();\n                headerBlocks.push(centralHeader);\n                // 5. update main header\n                mainHeader.size += centralHeader.length;\n                totalSize += dataLength + centralHeader.length;\n                totalEntries++;\n            }\n\n            totalSize += mainHeader.mainHeaderSize; // also includes zip file comment length\n            // point to end of data and beginning of central directory first record\n            mainHeader.offset = dindex;\n            mainHeader.totalEntries = totalEntries;\n\n            dindex = 0;\n            const outBuffer = Buffer.alloc(totalSize);\n            // write data blocks\n            for (const content of dataBlock) {\n                content.copy(outBuffer, dindex);\n                dindex += content.length;\n            }\n\n            // write central directory entries\n            for (const content of headerBlocks) {\n                content.copy(outBuffer, dindex);\n                dindex += content.length;\n            }\n\n            // write main header\n            const mh = mainHeader.toBinary();\n            if (_comment) {\n                _comment.copy(mh, Utils.Constants.ENDHDR); // add zip file comment\n            }\n            mh.copy(outBuffer, dindex);\n\n            // Since we update entry and main header offsets,\n            // they are no longer valid and we have to reset content\n            // (Issue 64)\n\n            inBuffer = outBuffer;\n            loadedEntries = false;\n\n            return outBuffer;\n        },\n\n        toAsyncBuffer: function (/*Function*/ onSuccess, /*Function*/ onFail, /*Function*/ onItemStart, /*Function*/ onItemEnd) {\n            try {\n                if (!loadedEntries) {\n                    readEntries();\n                }\n                sortEntries();\n\n                const dataBlock = [];\n                const centralHeaders = [];\n                let totalSize = 0;\n                let dindex = 0;\n                let totalEntries = 0;\n\n                mainHeader.size = 0;\n                mainHeader.offset = 0;\n\n                const compress2Buffer = function (entryLists) {\n                    if (entryLists.length > 0) {\n                        const entry = entryLists.shift();\n                        const name = entry.entryName + entry.extra.toString();\n                        if (onItemStart) onItemStart(name);\n                        entry.getCompressedDataAsync(function (compressedData) {\n                            if (onItemEnd) onItemEnd(name);\n                            entry.header.offset = dindex;\n\n                            // 1. construct local header\n                            const localHeader = entry.packLocalHeader();\n\n                            // 2. offsets\n                            const dataLength = localHeader.length + compressedData.length;\n                            dindex += dataLength;\n\n                            // 3. store values in sequence\n                            dataBlock.push(localHeader);\n                            dataBlock.push(compressedData);\n\n                            // central header\n                            const centalHeader = entry.packCentralHeader();\n                            centralHeaders.push(centalHeader);\n                            mainHeader.size += centalHeader.length;\n                            totalSize += dataLength + centalHeader.length;\n                            totalEntries++;\n\n                            compress2Buffer(entryLists);\n                        });\n                    } else {\n                        totalSize += mainHeader.mainHeaderSize; // also includes zip file comment length\n                        // point to end of data and beginning of central directory first record\n                        mainHeader.offset = dindex;\n                        mainHeader.totalEntries = totalEntries;\n\n                        dindex = 0;\n                        const outBuffer = Buffer.alloc(totalSize);\n                        dataBlock.forEach(function (content) {\n                            content.copy(outBuffer, dindex); // write data blocks\n                            dindex += content.length;\n                        });\n                        centralHeaders.forEach(function (content) {\n                            content.copy(outBuffer, dindex); // write central directory entries\n                            dindex += content.length;\n                        });\n\n                        const mh = mainHeader.toBinary();\n                        if (_comment) {\n                            _comment.copy(mh, Utils.Constants.ENDHDR); // add zip file comment\n                        }\n\n                        mh.copy(outBuffer, dindex); // write main header\n\n                        // Since we update entry and main header offsets, they are no\n                        // longer valid and we have to reset content using our new buffer\n                        // (Issue 64)\n\n                        inBuffer = outBuffer;\n                        loadedEntries = false;\n\n                        onSuccess(outBuffer);\n                    }\n                };\n\n                compress2Buffer(Array.from(this.entries));\n            } catch (e) {\n                onFail(e);\n            }\n        }\n    };\n};\n", "const Utils = require(\"./util\");\nconst pth = require(\"path\");\nconst ZipEntry = require(\"./zipEntry\");\nconst ZipFile = require(\"./zipFile\");\n\nconst get_Bool = (...val) => Utils.findLast(val, (c) => typeof c === \"boolean\");\nconst get_Str = (...val) => Utils.findLast(val, (c) => typeof c === \"string\");\nconst get_Fun = (...val) => Utils.findLast(val, (c) => typeof c === \"function\");\n\nconst defaultOptions = {\n    // option \"noSort\" : if true it disables files sorting\n    noSort: false,\n    // read entries during load (initial loading may be slower)\n    readEntries: false,\n    // default method is none\n    method: Utils.Constants.NONE,\n    // file system\n    fs: null\n};\n\nmodule.exports = function (/**String*/ input, /** object */ options) {\n    let inBuffer = null;\n\n    // create object based default options, allowing them to be overwritten\n    const opts = Object.assign(Object.create(null), defaultOptions);\n\n    // test input variable\n    if (input && \"object\" === typeof input) {\n        // if value is not buffer we accept it to be object with options\n        if (!(input instanceof Uint8Array)) {\n            Object.assign(opts, input);\n            input = opts.input ? opts.input : undefined;\n            if (opts.input) delete opts.input;\n        }\n\n        // if input is buffer\n        if (Buffer.isBuffer(input)) {\n            inBuffer = input;\n            opts.method = Utils.Constants.BUFFER;\n            input = undefined;\n        }\n    }\n\n    // assign options\n    Object.assign(opts, options);\n\n    // instanciate utils filesystem\n    const filetools = new Utils(opts);\n\n    if (typeof opts.decoder !== \"object\" || typeof opts.decoder.encode !== \"function\" || typeof opts.decoder.decode !== \"function\") {\n        opts.decoder = Utils.decoder;\n    }\n\n    // if input is file name we retrieve its content\n    if (input && \"string\" === typeof input) {\n        // load zip file\n        if (filetools.fs.existsSync(input)) {\n            opts.method = Utils.Constants.FILE;\n            opts.filename = input;\n            inBuffer = filetools.fs.readFileSync(input);\n        } else {\n            throw Utils.Errors.INVALID_FILENAME();\n        }\n    }\n\n    // create variable\n    const _zip = new ZipFile(inBuffer, opts);\n\n    const { canonical, sanitize, zipnamefix } = Utils;\n\n    function getEntry(/**Object*/ entry) {\n        if (entry && _zip) {\n            var item;\n            // If entry was given as a file name\n            if (typeof entry === \"string\") item = _zip.getEntry(pth.posix.normalize(entry));\n            // if entry was given as a ZipEntry object\n            if (typeof entry === \"object\" && typeof entry.entryName !== \"undefined\" && typeof entry.header !== \"undefined\") item = _zip.getEntry(entry.entryName);\n\n            if (item) {\n                return item;\n            }\n        }\n        return null;\n    }\n\n    function fixPath(zipPath) {\n        const { join, normalize, sep } = pth.posix;\n        // convert windows file separators and normalize\n        return join(\".\", normalize(sep + zipPath.split(\"\\\\\").join(sep) + sep));\n    }\n\n    function filenameFilter(filterfn) {\n        if (filterfn instanceof RegExp) {\n            // if filter is RegExp wrap it\n            return (function (rx) {\n                return function (filename) {\n                    return rx.test(filename);\n                };\n            })(filterfn);\n        } else if (\"function\" !== typeof filterfn) {\n            // if filter is not function we will replace it\n            return () => true;\n        }\n        return filterfn;\n    }\n\n    // keep last character on folders\n    const relativePath = (local, entry) => {\n        let lastChar = entry.slice(-1);\n        lastChar = lastChar === filetools.sep ? filetools.sep : \"\";\n        return pth.relative(local, entry) + lastChar;\n    };\n\n    return {\n        /**\n         * Extracts the given entry from the archive and returns the content as a Buffer object\n         * @param {ZipEntry|string} entry ZipEntry object or String with the full path of the entry\n         * @param {Buffer|string} [pass] - password\n         * @return Buffer or Null in case of error\n         */\n        readFile: function (entry, pass) {\n            var item = getEntry(entry);\n            return (item && item.getData(pass)) || null;\n        },\n\n        /**\n         * Returns how many child elements has on entry (directories) on files it is always 0\n         * @param {ZipEntry|string} entry ZipEntry object or String with the full path of the entry\n         * @returns {integer}\n         */\n        childCount: function (entry) {\n            const item = getEntry(entry);\n            if (item) {\n                return _zip.getChildCount(item);\n            }\n        },\n\n        /**\n         * Asynchronous readFile\n         * @param {ZipEntry|string} entry ZipEntry object or String with the full path of the entry\n         * @param {callback} callback\n         *\n         * @return Buffer or Null in case of error\n         */\n        readFileAsync: function (entry, callback) {\n            var item = getEntry(entry);\n            if (item) {\n                item.getDataAsync(callback);\n            } else {\n                callback(null, \"getEntry failed for:\" + entry);\n            }\n        },\n\n        /**\n         * Extracts the given entry from the archive and returns the content as plain text in the given encoding\n         * @param {ZipEntry|string} entry - ZipEntry object or String with the full path of the entry\n         * @param {string} encoding - Optional. If no encoding is specified utf8 is used\n         *\n         * @return String\n         */\n        readAsText: function (entry, encoding) {\n            var item = getEntry(entry);\n            if (item) {\n                var data = item.getData();\n                if (data && data.length) {\n                    return data.toString(encoding || \"utf8\");\n                }\n            }\n            return \"\";\n        },\n\n        /**\n         * Asynchronous readAsText\n         * @param {ZipEntry|string} entry ZipEntry object or String with the full path of the entry\n         * @param {callback} callback\n         * @param {string} [encoding] - Optional. If no encoding is specified utf8 is used\n         *\n         * @return String\n         */\n        readAsTextAsync: function (entry, callback, encoding) {\n            var item = getEntry(entry);\n            if (item) {\n                item.getDataAsync(function (data, err) {\n                    if (err) {\n                        callback(data, err);\n                        return;\n                    }\n\n                    if (data && data.length) {\n                        callback(data.toString(encoding || \"utf8\"));\n                    } else {\n                        callback(\"\");\n                    }\n                });\n            } else {\n                callback(\"\");\n            }\n        },\n\n        /**\n         * Remove the entry from the file or the entry and all it's nested directories and files if the given entry is a directory\n         *\n         * @param {ZipEntry|string} entry\n         * @returns {void}\n         */\n        deleteFile: function (entry, withsubfolders = true) {\n            // @TODO: test deleteFile\n            var item = getEntry(entry);\n            if (item) {\n                _zip.deleteFile(item.entryName, withsubfolders);\n            }\n        },\n\n        /**\n         * Remove the entry from the file or directory without affecting any nested entries\n         *\n         * @param {ZipEntry|string} entry\n         * @returns {void}\n         */\n        deleteEntry: function (entry) {\n            // @TODO: test deleteEntry\n            var item = getEntry(entry);\n            if (item) {\n                _zip.deleteEntry(item.entryName);\n            }\n        },\n\n        /**\n         * Adds a comment to the zip. The zip must be rewritten after adding the comment.\n         *\n         * @param {string} comment\n         */\n        addZipComment: function (comment) {\n            // @TODO: test addZipComment\n            _zip.comment = comment;\n        },\n\n        /**\n         * Returns the zip comment\n         *\n         * @return String\n         */\n        getZipComment: function () {\n            return _zip.comment || \"\";\n        },\n\n        /**\n         * Adds a comment to a specified zipEntry. The zip must be rewritten after adding the comment\n         * The comment cannot exceed 65535 characters in length\n         *\n         * @param {ZipEntry} entry\n         * @param {string} comment\n         */\n        addZipEntryComment: function (entry, comment) {\n            var item = getEntry(entry);\n            if (item) {\n                item.comment = comment;\n            }\n        },\n\n        /**\n         * Returns the comment of the specified entry\n         *\n         * @param {ZipEntry} entry\n         * @return String\n         */\n        getZipEntryComment: function (entry) {\n            var item = getEntry(entry);\n            if (item) {\n                return item.comment || \"\";\n            }\n            return \"\";\n        },\n\n        /**\n         * Updates the content of an existing entry inside the archive. The zip must be rewritten after updating the content\n         *\n         * @param {ZipEntry} entry\n         * @param {Buffer} content\n         */\n        updateFile: function (entry, content) {\n            var item = getEntry(entry);\n            if (item) {\n                item.setData(content);\n            }\n        },\n\n        /**\n         * Adds a file from the disk to the archive\n         *\n         * @param {string} localPath File to add to zip\n         * @param {string} [zipPath] Optional path inside the zip\n         * @param {string} [zipName] Optional name for the file\n         * @param {string} [comment] Optional file comment\n         */\n        addLocalFile: function (localPath, zipPath, zipName, comment) {\n            if (filetools.fs.existsSync(localPath)) {\n                // fix ZipPath\n                zipPath = zipPath ? fixPath(zipPath) : \"\";\n\n                // p - local file name\n                const p = pth.win32.basename(pth.win32.normalize(localPath));\n\n                // add file name into zippath\n                zipPath += zipName ? zipName : p;\n\n                // read file attributes\n                const _attr = filetools.fs.statSync(localPath);\n\n                // get file content\n                const data = _attr.isFile() ? filetools.fs.readFileSync(localPath) : Buffer.alloc(0);\n\n                // if folder\n                if (_attr.isDirectory()) zipPath += filetools.sep;\n\n                // add file into zip file\n                this.addFile(zipPath, data, comment, _attr);\n            } else {\n                throw Utils.Errors.FILE_NOT_FOUND(localPath);\n            }\n        },\n\n        /**\n         * Callback for showing if everything was done.\n         *\n         * @callback doneCallback\n         * @param {Error} err - Error object\n         * @param {boolean} done - was request fully completed\n         */\n\n        /**\n         * Adds a file from the disk to the archive\n         *\n         * @param {(object|string)} options - options object, if it is string it us used as localPath.\n         * @param {string} options.localPath - Local path to the file.\n         * @param {string} [options.comment] - Optional file comment.\n         * @param {string} [options.zipPath] - Optional path inside the zip\n         * @param {string} [options.zipName] - Optional name for the file\n         * @param {doneCallback} callback - The callback that handles the response.\n         */\n        addLocalFileAsync: function (options, callback) {\n            options = typeof options === \"object\" ? options : { localPath: options };\n            const localPath = pth.resolve(options.localPath);\n            const { comment } = options;\n            let { zipPath, zipName } = options;\n            const self = this;\n\n            filetools.fs.stat(localPath, function (err, stats) {\n                if (err) return callback(err, false);\n                // fix ZipPath\n                zipPath = zipPath ? fixPath(zipPath) : \"\";\n                // p - local file name\n                const p = pth.win32.basename(pth.win32.normalize(localPath));\n                // add file name into zippath\n                zipPath += zipName ? zipName : p;\n\n                if (stats.isFile()) {\n                    filetools.fs.readFile(localPath, function (err, data) {\n                        if (err) return callback(err, false);\n                        self.addFile(zipPath, data, comment, stats);\n                        return setImmediate(callback, undefined, true);\n                    });\n                } else if (stats.isDirectory()) {\n                    zipPath += filetools.sep;\n                    self.addFile(zipPath, Buffer.alloc(0), comment, stats);\n                    return setImmediate(callback, undefined, true);\n                }\n            });\n        },\n\n        /**\n         * Adds a local directory and all its nested files and directories to the archive\n         *\n         * @param {string} localPath - local path to the folder\n         * @param {string} [zipPath] - optional path inside zip\n         * @param {(RegExp|function)} [filter] - optional RegExp or Function if files match will be included.\n         */\n        addLocalFolder: function (localPath, zipPath, filter) {\n            // Prepare filter\n            filter = filenameFilter(filter);\n\n            // fix ZipPath\n            zipPath = zipPath ? fixPath(zipPath) : \"\";\n\n            // normalize the path first\n            localPath = pth.normalize(localPath);\n\n            if (filetools.fs.existsSync(localPath)) {\n                const items = filetools.findFiles(localPath);\n                const self = this;\n\n                if (items.length) {\n                    for (const filepath of items) {\n                        const p = pth.join(zipPath, relativePath(localPath, filepath));\n                        if (filter(p)) {\n                            self.addLocalFile(filepath, pth.dirname(p));\n                        }\n                    }\n                }\n            } else {\n                throw Utils.Errors.FILE_NOT_FOUND(localPath);\n            }\n        },\n\n        /**\n         * Asynchronous addLocalFolder\n         * @param {string} localPath\n         * @param {callback} callback\n         * @param {string} [zipPath] optional path inside zip\n         * @param {RegExp|function} [filter] optional RegExp or Function if files match will\n         *               be included.\n         */\n        addLocalFolderAsync: function (localPath, callback, zipPath, filter) {\n            // Prepare filter\n            filter = filenameFilter(filter);\n\n            // fix ZipPath\n            zipPath = zipPath ? fixPath(zipPath) : \"\";\n\n            // normalize the path first\n            localPath = pth.normalize(localPath);\n\n            var self = this;\n            filetools.fs.open(localPath, \"r\", function (err) {\n                if (err && err.code === \"ENOENT\") {\n                    callback(undefined, Utils.Errors.FILE_NOT_FOUND(localPath));\n                } else if (err) {\n                    callback(undefined, err);\n                } else {\n                    var items = filetools.findFiles(localPath);\n                    var i = -1;\n\n                    var next = function () {\n                        i += 1;\n                        if (i < items.length) {\n                            var filepath = items[i];\n                            var p = relativePath(localPath, filepath).split(\"\\\\\").join(\"/\"); //windows fix\n                            p = p\n                                .normalize(\"NFD\")\n                                .replace(/[\\u0300-\\u036f]/g, \"\")\n                                .replace(/[^\\x20-\\x7E]/g, \"\"); // accent fix\n                            if (filter(p)) {\n                                filetools.fs.stat(filepath, function (er0, stats) {\n                                    if (er0) callback(undefined, er0);\n                                    if (stats.isFile()) {\n                                        filetools.fs.readFile(filepath, function (er1, data) {\n                                            if (er1) {\n                                                callback(undefined, er1);\n                                            } else {\n                                                self.addFile(zipPath + p, data, \"\", stats);\n                                                next();\n                                            }\n                                        });\n                                    } else {\n                                        self.addFile(zipPath + p + \"/\", Buffer.alloc(0), \"\", stats);\n                                        next();\n                                    }\n                                });\n                            } else {\n                                process.nextTick(() => {\n                                    next();\n                                });\n                            }\n                        } else {\n                            callback(true, undefined);\n                        }\n                    };\n\n                    next();\n                }\n            });\n        },\n\n        /**\n         * Adds a local directory and all its nested files and directories to the archive\n         *\n         * @param {object | string} options - options object, if it is string it us used as localPath.\n         * @param {string} options.localPath - Local path to the folder.\n         * @param {string} [options.zipPath] - optional path inside zip.\n         * @param {RegExp|function} [options.filter] - optional RegExp or Function if files match will be included.\n         * @param {function|string} [options.namefix] - optional function to help fix filename\n         * @param {doneCallback} callback - The callback that handles the response.\n         *\n         */\n        addLocalFolderAsync2: function (options, callback) {\n            const self = this;\n            options = typeof options === \"object\" ? options : { localPath: options };\n            localPath = pth.resolve(fixPath(options.localPath));\n            let { zipPath, filter, namefix } = options;\n\n            if (filter instanceof RegExp) {\n                filter = (function (rx) {\n                    return function (filename) {\n                        return rx.test(filename);\n                    };\n                })(filter);\n            } else if (\"function\" !== typeof filter) {\n                filter = function () {\n                    return true;\n                };\n            }\n\n            // fix ZipPath\n            zipPath = zipPath ? fixPath(zipPath) : \"\";\n\n            // Check Namefix function\n            if (namefix == \"latin1\") {\n                namefix = (str) =>\n                    str\n                        .normalize(\"NFD\")\n                        .replace(/[\\u0300-\\u036f]/g, \"\")\n                        .replace(/[^\\x20-\\x7E]/g, \"\"); // accent fix (latin1 characers only)\n            }\n\n            if (typeof namefix !== \"function\") namefix = (str) => str;\n\n            // internal, create relative path + fix the name\n            const relPathFix = (entry) => pth.join(zipPath, namefix(relativePath(localPath, entry)));\n            const fileNameFix = (entry) => pth.win32.basename(pth.win32.normalize(namefix(entry)));\n\n            filetools.fs.open(localPath, \"r\", function (err) {\n                if (err && err.code === \"ENOENT\") {\n                    callback(undefined, Utils.Errors.FILE_NOT_FOUND(localPath));\n                } else if (err) {\n                    callback(undefined, err);\n                } else {\n                    filetools.findFilesAsync(localPath, function (err, fileEntries) {\n                        if (err) return callback(err);\n                        fileEntries = fileEntries.filter((dir) => filter(relPathFix(dir)));\n                        if (!fileEntries.length) callback(undefined, false);\n\n                        setImmediate(\n                            fileEntries.reverse().reduce(function (next, entry) {\n                                return function (err, done) {\n                                    if (err || done === false) return setImmediate(next, err, false);\n\n                                    self.addLocalFileAsync(\n                                        {\n                                            localPath: entry,\n                                            zipPath: pth.dirname(relPathFix(entry)),\n                                            zipName: fileNameFix(entry)\n                                        },\n                                        next\n                                    );\n                                };\n                            }, callback)\n                        );\n                    });\n                }\n            });\n        },\n\n        /**\n         * Adds a local directory and all its nested files and directories to the archive\n         *\n         * @param {string} localPath - path where files will be extracted\n         * @param {object} props - optional properties\n         * @param {string} [props.zipPath] - optional path inside zip\n         * @param {RegExp|function} [props.filter] - optional RegExp or Function if files match will be included.\n         * @param {function|string} [props.namefix] - optional function to help fix filename\n         */\n        addLocalFolderPromise: function (localPath, props) {\n            return new Promise((resolve, reject) => {\n                this.addLocalFolderAsync2(Object.assign({ localPath }, props), (err, done) => {\n                    if (err) reject(err);\n                    if (done) resolve(this);\n                });\n            });\n        },\n\n        /**\n         * Allows you to create a entry (file or directory) in the zip file.\n         * If you want to create a directory the entryName must end in / and a null buffer should be provided.\n         * Comment and attributes are optional\n         *\n         * @param {string} entryName\n         * @param {Buffer | string} content - file content as buffer or utf8 coded string\n         * @param {string} [comment] - file comment\n         * @param {number | object} [attr] - number as unix file permissions, object as filesystem Stats object\n         */\n        addFile: function (entryName, content, comment, attr) {\n            entryName = zipnamefix(entryName);\n            let entry = getEntry(entryName);\n            const update = entry != null;\n\n            // prepare new entry\n            if (!update) {\n                entry = new ZipEntry(opts);\n                entry.entryName = entryName;\n            }\n            entry.comment = comment || \"\";\n\n            const isStat = \"object\" === typeof attr && attr instanceof filetools.fs.Stats;\n\n            // last modification time from file stats\n            if (isStat) {\n                entry.header.time = attr.mtime;\n            }\n\n            // Set file attribute\n            var fileattr = entry.isDirectory ? 0x10 : 0; // (MS-DOS directory flag)\n\n            // extended attributes field for Unix\n            // set file type either S_IFDIR / S_IFREG\n            let unix = entry.isDirectory ? 0x4000 : 0x8000;\n\n            if (isStat) {\n                // File attributes from file stats\n                unix |= 0xfff & attr.mode;\n            } else if (\"number\" === typeof attr) {\n                // attr from given attr values\n                unix |= 0xfff & attr;\n            } else {\n                // Default values:\n                unix |= entry.isDirectory ? 0o755 : 0o644; // permissions (drwxr-xr-x) or (-r-wr--r--)\n            }\n\n            fileattr = (fileattr | (unix << 16)) >>> 0; // add attributes\n\n            entry.attr = fileattr;\n\n            entry.setData(content);\n            if (!update) _zip.setEntry(entry);\n\n            return entry;\n        },\n\n        /**\n         * Returns an array of ZipEntry objects representing the files and folders inside the archive\n         *\n         * @param {string} [password]\n         * @returns Array\n         */\n        getEntries: function (password) {\n            _zip.password = password;\n            return _zip ? _zip.entries : [];\n        },\n\n        /**\n         * Returns a ZipEntry object representing the file or folder specified by ``name``.\n         *\n         * @param {string} name\n         * @return ZipEntry\n         */\n        getEntry: function (/**String*/ name) {\n            return getEntry(name);\n        },\n\n        getEntryCount: function () {\n            return _zip.getEntryCount();\n        },\n\n        forEach: function (callback) {\n            return _zip.forEach(callback);\n        },\n\n        /**\n         * Extracts the given entry to the given targetPath\n         * If the entry is a directory inside the archive, the entire directory and it's subdirectories will be extracted\n         *\n         * @param {string|ZipEntry} entry - ZipEntry object or String with the full path of the entry\n         * @param {string} targetPath - Target folder where to write the file\n         * @param {boolean} [maintainEntryPath=true] - If maintainEntryPath is true and the entry is inside a folder, the entry folder will be created in targetPath as well. Default is TRUE\n         * @param {boolean} [overwrite=false] - If the file already exists at the target path, the file will be overwriten if this is true.\n         * @param {boolean} [keepOriginalPermission=false] - The file will be set as the permission from the entry if this is true.\n         * @param {string} [outFileName] - String If set will override the filename of the extracted file (Only works if the entry is a file)\n         *\n         * @return Boolean\n         */\n        extractEntryTo: function (entry, targetPath, maintainEntryPath, overwrite, keepOriginalPermission, outFileName) {\n            overwrite = get_Bool(false, overwrite);\n            keepOriginalPermission = get_Bool(false, keepOriginalPermission);\n            maintainEntryPath = get_Bool(true, maintainEntryPath);\n            outFileName = get_Str(keepOriginalPermission, outFileName);\n\n            var item = getEntry(entry);\n            if (!item) {\n                throw Utils.Errors.NO_ENTRY();\n            }\n\n            var entryName = canonical(item.entryName);\n\n            var target = sanitize(targetPath, outFileName && !item.isDirectory ? outFileName : maintainEntryPath ? entryName : pth.basename(entryName));\n\n            if (item.isDirectory) {\n                var children = _zip.getEntryChildren(item);\n                children.forEach(function (child) {\n                    if (child.isDirectory) return;\n                    var content = child.getData();\n                    if (!content) {\n                        throw Utils.Errors.CANT_EXTRACT_FILE();\n                    }\n                    var name = canonical(child.entryName);\n                    var childName = sanitize(targetPath, maintainEntryPath ? name : pth.basename(name));\n                    // The reverse operation for attr depend on method addFile()\n                    const fileAttr = keepOriginalPermission ? child.header.fileAttr : undefined;\n                    filetools.writeFileTo(childName, content, overwrite, fileAttr);\n                });\n                return true;\n            }\n\n            var content = item.getData(_zip.password);\n            if (!content) throw Utils.Errors.CANT_EXTRACT_FILE();\n\n            if (filetools.fs.existsSync(target) && !overwrite) {\n                throw Utils.Errors.CANT_OVERRIDE();\n            }\n            // The reverse operation for attr depend on method addFile()\n            const fileAttr = keepOriginalPermission ? entry.header.fileAttr : undefined;\n            filetools.writeFileTo(target, content, overwrite, fileAttr);\n\n            return true;\n        },\n\n        /**\n         * Test the archive\n         * @param {string} [pass]\n         */\n        test: function (pass) {\n            if (!_zip) {\n                return false;\n            }\n\n            for (var entry in _zip.entries) {\n                try {\n                    if (entry.isDirectory) {\n                        continue;\n                    }\n                    var content = _zip.entries[entry].getData(pass);\n                    if (!content) {\n                        return false;\n                    }\n                } catch (err) {\n                    return false;\n                }\n            }\n            return true;\n        },\n\n        /**\n         * Extracts the entire archive to the given location\n         *\n         * @param {string} targetPath Target location\n         * @param {boolean} [overwrite=false] If the file already exists at the target path, the file will be overwriten if this is true.\n         *                  Default is FALSE\n         * @param {boolean} [keepOriginalPermission=false] The file will be set as the permission from the entry if this is true.\n         *                  Default is FALSE\n         * @param {string|Buffer} [pass] password\n         */\n        extractAllTo: function (targetPath, overwrite, keepOriginalPermission, pass) {\n            keepOriginalPermission = get_Bool(false, keepOriginalPermission);\n            pass = get_Str(keepOriginalPermission, pass);\n            overwrite = get_Bool(false, overwrite);\n            if (!_zip) throw Utils.Errors.NO_ZIP();\n\n            _zip.entries.forEach(function (entry) {\n                var entryName = sanitize(targetPath, canonical(entry.entryName));\n                if (entry.isDirectory) {\n                    filetools.makeDir(entryName);\n                    return;\n                }\n                var content = entry.getData(pass);\n                if (!content) {\n                    throw Utils.Errors.CANT_EXTRACT_FILE();\n                }\n                // The reverse operation for attr depend on method addFile()\n                const fileAttr = keepOriginalPermission ? entry.header.fileAttr : undefined;\n                filetools.writeFileTo(entryName, content, overwrite, fileAttr);\n                try {\n                    filetools.fs.utimesSync(entryName, entry.header.time, entry.header.time);\n                } catch (err) {\n                    throw Utils.Errors.CANT_EXTRACT_FILE();\n                }\n            });\n        },\n\n        /**\n         * Asynchronous extractAllTo\n         *\n         * @param {string} targetPath Target location\n         * @param {boolean} [overwrite=false] If the file already exists at the target path, the file will be overwriten if this is true.\n         *                  Default is FALSE\n         * @param {boolean} [keepOriginalPermission=false] The file will be set as the permission from the entry if this is true.\n         *                  Default is FALSE\n         * @param {function} callback The callback will be executed when all entries are extracted successfully or any error is thrown.\n         */\n        extractAllToAsync: function (targetPath, overwrite, keepOriginalPermission, callback) {\n            callback = get_Fun(overwrite, keepOriginalPermission, callback);\n            keepOriginalPermission = get_Bool(false, keepOriginalPermission);\n            overwrite = get_Bool(false, overwrite);\n            if (!callback) {\n                return new Promise((resolve, reject) => {\n                    this.extractAllToAsync(targetPath, overwrite, keepOriginalPermission, function (err) {\n                        if (err) {\n                            reject(err);\n                        } else {\n                            resolve(this);\n                        }\n                    });\n                });\n            }\n            if (!_zip) {\n                callback(Utils.Errors.NO_ZIP());\n                return;\n            }\n\n            targetPath = pth.resolve(targetPath);\n            // convert entryName to\n            const getPath = (entry) => sanitize(targetPath, pth.normalize(canonical(entry.entryName)));\n            const getError = (msg, file) => new Error(msg + ': \"' + file + '\"');\n\n            // separate directories from files\n            const dirEntries = [];\n            const fileEntries = [];\n            _zip.entries.forEach((e) => {\n                if (e.isDirectory) {\n                    dirEntries.push(e);\n                } else {\n                    fileEntries.push(e);\n                }\n            });\n\n            // Create directory entries first synchronously\n            // this prevents race condition and assures folders are there before writing files\n            for (const entry of dirEntries) {\n                const dirPath = getPath(entry);\n                // The reverse operation for attr depend on method addFile()\n                const dirAttr = keepOriginalPermission ? entry.header.fileAttr : undefined;\n                try {\n                    filetools.makeDir(dirPath);\n                    if (dirAttr) filetools.fs.chmodSync(dirPath, dirAttr);\n                    // in unix timestamp will change if files are later added to folder, but still\n                    filetools.fs.utimesSync(dirPath, entry.header.time, entry.header.time);\n                } catch (er) {\n                    callback(getError(\"Unable to create folder\", dirPath));\n                }\n            }\n\n            fileEntries.reverse().reduce(function (next, entry) {\n                return function (err) {\n                    if (err) {\n                        next(err);\n                    } else {\n                        const entryName = pth.normalize(canonical(entry.entryName));\n                        const filePath = sanitize(targetPath, entryName);\n                        entry.getDataAsync(function (content, err_1) {\n                            if (err_1) {\n                                next(err_1);\n                            } else if (!content) {\n                                next(Utils.Errors.CANT_EXTRACT_FILE());\n                            } else {\n                                // The reverse operation for attr depend on method addFile()\n                                const fileAttr = keepOriginalPermission ? entry.header.fileAttr : undefined;\n                                filetools.writeFileToAsync(filePath, content, overwrite, fileAttr, function (succ) {\n                                    if (!succ) {\n                                        next(getError(\"Unable to write file\", filePath));\n                                    }\n                                    filetools.fs.utimes(filePath, entry.header.time, entry.header.time, function (err_2) {\n                                        if (err_2) {\n                                            next(getError(\"Unable to set times\", filePath));\n                                        } else {\n                                            next();\n                                        }\n                                    });\n                                });\n                            }\n                        });\n                    }\n                };\n            }, callback)();\n        },\n\n        /**\n         * Writes the newly created zip file to disk at the specified location or if a zip was opened and no ``targetFileName`` is provided, it will overwrite the opened zip\n         *\n         * @param {string} targetFileName\n         * @param {function} callback\n         */\n        writeZip: function (targetFileName, callback) {\n            if (arguments.length === 1) {\n                if (typeof targetFileName === \"function\") {\n                    callback = targetFileName;\n                    targetFileName = \"\";\n                }\n            }\n\n            if (!targetFileName && opts.filename) {\n                targetFileName = opts.filename;\n            }\n            if (!targetFileName) return;\n\n            var zipData = _zip.compressToBuffer();\n            if (zipData) {\n                var ok = filetools.writeFileTo(targetFileName, zipData, true);\n                if (typeof callback === \"function\") callback(!ok ? new Error(\"failed\") : null, \"\");\n            }\n        },\n\n        /**\n         *\n         * @param {string} targetFileName\n         * @param {object} [props]\n         * @param {boolean} [props.overwrite=true] If the file already exists at the target path, the file will be overwriten if this is true.\n         * @param {boolean} [props.perm] The file will be set as the permission from the entry if this is true.\n\n         * @returns {Promise<void>}\n         */\n        writeZipPromise: function (/**String*/ targetFileName, /* object */ props) {\n            const { overwrite, perm } = Object.assign({ overwrite: true }, props);\n\n            return new Promise((resolve, reject) => {\n                // find file name\n                if (!targetFileName && opts.filename) targetFileName = opts.filename;\n                if (!targetFileName) reject(\"ADM-ZIP: ZIP File Name Missing\");\n\n                this.toBufferPromise().then((zipData) => {\n                    const ret = (done) => (done ? resolve(done) : reject(\"ADM-ZIP: Wasn't able to write zip file\"));\n                    filetools.writeFileToAsync(targetFileName, zipData, overwrite, perm, ret);\n                }, reject);\n            });\n        },\n\n        /**\n         * @returns {Promise<Buffer>} A promise to the Buffer.\n         */\n        toBufferPromise: function () {\n            return new Promise((resolve, reject) => {\n                _zip.toAsyncBuffer(resolve, reject);\n            });\n        },\n\n        /**\n         * Returns the content of the entire zip file as a Buffer object\n         *\n         * @prop {function} [onSuccess]\n         * @prop {function} [onFail]\n         * @prop {function} [onItemStart]\n         * @prop {function} [onItemEnd]\n         * @returns {Buffer}\n         */\n        toBuffer: function (onSuccess, onFail, onItemStart, onItemEnd) {\n            if (typeof onSuccess === \"function\") {\n                _zip.toAsyncBuffer(onSuccess, onFail, onItemStart, onItemEnd);\n                return null;\n            }\n            return _zip.compressToBuffer();\n        }\n    };\n};\n", "import { app, BrowserWindow, ipcMain, globalShortcut } from 'electron';\nimport path from 'node:path';\n\n// Add command line switches before app is ready\napp.commandLine.appendSwitch('no-sandbox');\napp.commandLine.appendSwitch('ozone-platform-hint', 'auto');\n\nimport { Logger } from './handlers/Logger.js';\nimport { GameHandler } from './handlers/GameHandler.js';\nimport { ModHandler } from './handlers/ModHandler.js';\nimport { OverlayHandler } from './handlers/OverlayHandler.js';\n\n// Initialize logger as early as possible (after imports)\n// Note: Full init happens in app.whenReady() when userData is available\nconst gameHandler = new GameHandler();\ngameHandler.init();\n\nconst modHandler = new ModHandler();\nmodHandler.init();\n\n// Overlay handler is initialized in app.whenReady() since it needs screen API\nlet overlayHandler: OverlayHandler | null = null;\n\n// Export overlayHandler for use in GameHandler\nexport function getOverlayHandler(): OverlayHandler | null {\n    return overlayHandler;\n}\n\nconsole.log('=== BlockyCRAFT Launcher Starting ===');\n\nconsole.log('Electron version:', process.versions.electron);\n\nlet mainWindow: BrowserWindow | null = null;\nconst VITE_DEV_SERVER_URL = process.env['VITE_DEV_SERVER_URL'];\n\nfunction createWindow(): void {\n    console.log('Creating main window...');\n    mainWindow = new BrowserWindow({\n        width: 900,\n        height: 600,\n        minWidth: 800,\n        minHeight: 500,\n        frame: true,\n        resizable: true,\n        webPreferences: {\n            nodeIntegration: false,\n            contextIsolation: true,\n            preload: path.join(__dirname, 'preload.cjs'),\n            sandbox: false,\n        },\n        backgroundColor: '#0f0f0f',\n        show: true,\n        autoHideMenuBar: true, // Hide menu bar\n    });\n\n    mainWindow.setMenu(null); // Explicitly remove menu\n\n    // Open external links - use system browser on Windows/macOS, internal window on Linux\n    // Open external links - use system browser for all platforms\n    ipcMain.handle('open-external', async (event, url) => {\n        console.log('Opening external URL:', url);\n\n        try {\n            const { shell } = await import('electron');\n            await shell.openExternal(url);\n        } catch (err) {\n            console.error('Failed to open external URL:', err);\n        }\n    });\n\n    // Proxy fetch requests to bypass CORS\n    ipcMain.handle('fetch-url', async (event, url) => {\n        Logger.info('Main', `Proxying fetch request to: ${url}`);\n        const { net } = await import('electron');\n        try {\n            const response = await net.fetch(url);\n            if (!response.ok) {\n                throw new Error(`HTTP ${response.status} ${response.statusText}`);\n            }\n            const text = await response.text();\n            return { success: true, data: text };\n        } catch (e: any) {\n            Logger.error('Main', `Fetch failed for ${url}: ${e.message}`);\n            return { success: false, error: e.message };\n        }\n    });\n\n    console.log('Window created, loading content...');\n\n    if (VITE_DEV_SERVER_URL) {\n        mainWindow.loadURL(VITE_DEV_SERVER_URL);\n    } else {\n        const filePath = path.join(__dirname, '../dist/index.html');\n        mainWindow.loadFile(filePath);\n    }\n\n    mainWindow.webContents.on('did-finish-load', () => {\n        console.log('Create Window: did-finish-load');\n    });\n\n    mainWindow.webContents.on('did-fail-load', (event, errorCode, errorDescription, validatedURL) => {\n        console.error('Create Window: did-fail-load', errorCode, errorDescription, validatedURL);\n    });\n\n    mainWindow.webContents.on('render-process-gone', (event, details) => {\n        console.error('Create Window: render-process-gone', details);\n    });\n\n\n\n    mainWindow.webContents.on('unresponsive', () => {\n        console.error('Create Window: unresponsive');\n    });\n\n    mainWindow.on('closed', () => {\n        mainWindow = null;\n    });\n}\n\napp.whenReady().then(() => {\n    // Initialize persistent logger\n    Logger.init();\n    Logger.info('Main', `Electron version: ${process.versions.electron}`);\n    Logger.info('Main', `Node version: ${process.versions.node}`);\n    Logger.info('Main', `Platform: ${process.platform} ${process.arch}`);\n\n    // Initialize overlay handler (needs screen API which is ready now)\n    overlayHandler = new OverlayHandler();\n    overlayHandler.init();\n\n    createWindow();\n});\n\n// Cleanup shortcuts on quit\napp.on('will-quit', () => {\n    if (overlayHandler) {\n        overlayHandler.cleanup();\n    }\n    globalShortcut.unregisterAll();\n});\n\napp.on('window-all-closed', () => {\n    if (process.platform !== 'darwin') {\n        app.quit();\n    }\n});\n\napp.on('activate', () => {\n    if (BrowserWindow.getAllWindows().length === 0) {\n        createWindow();\n    }\n});\n\n\n\n", "import { app } from 'electron';\nimport path from 'path';\nimport fs from 'fs';\n\n/**\n * Persistent logger that writes to files in userData/logs/\n * Features:\n * - Auto-rotation (keeps last 7 days)\n * - Timestamp prefixes\n * - Separate game log file\n * - Global console interception\n */\nclass PersistentLogger {\n    private logsDir: string;\n    private launcherLogPath: string;\n    private gameLogPath: string;\n    private initialized: boolean = false;\n    private readonly MAX_LOG_DAYS = 7;\n\n    constructor() {\n        // Will be set properly in init()\n        this.logsDir = '';\n        this.launcherLogPath = '';\n        this.gameLogPath = '';\n    }\n\n    /**\n     * Initialize the logger. Must be called after app is ready.\n     */\n    public init(): void {\n        if (this.initialized) return;\n\n        this.logsDir = path.join(app.getPath('userData'), 'logs');\n        fs.mkdirSync(this.logsDir, { recursive: true });\n\n        const dateStr = this.getDateString();\n        this.launcherLogPath = path.join(this.logsDir, `launcher-${dateStr}.log`);\n        this.gameLogPath = path.join(this.logsDir, `game-${dateStr}.log`);\n\n        // Clean old logs\n        this.rotateOldLogs();\n\n        // Intercept console methods\n        this.interceptConsole();\n\n        this.initialized = true;\n        this.info('Logger', '=== BlockyCRAFT Launcher Log Started ===');\n        this.info('Logger', `Log file: ${this.launcherLogPath}`);\n    }\n\n    /**\n     * Gets current date string in YYYY-MM-DD format\n     */\n    private getDateString(): string {\n        const now = new Date();\n        return now.toISOString().split('T')[0];\n    }\n\n    /**\n     * Gets current timestamp in ISO format\n     */\n    private getTimestamp(): string {\n        return new Date().toISOString();\n    }\n\n    /**\n     * Formats a log message with timestamp and level\n     */\n    private formatMessage(level: string, tag: string, message: string): string {\n        return `[${this.getTimestamp()}] [${level}] [${tag}] ${message}`;\n    }\n\n    /**\n     * Writes a line to the launcher log file\n     */\n    private writeToLauncherLog(line: string): void {\n        if (!this.initialized) return;\n        try {\n            fs.appendFileSync(this.launcherLogPath, line + '\\n');\n        } catch (e) {\n            // Fallback to original console if file write fails\n            process.stdout.write(`[LOG WRITE ERROR] ${e}\\n`);\n        }\n    }\n\n    /**\n     * Writes a line to the game log file\n     */\n    public writeToGameLog(line: string): void {\n        if (!this.initialized) return;\n        try {\n            fs.appendFileSync(this.gameLogPath, `[${this.getTimestamp()}] ${line}\\n`);\n        } catch (e) {\n            process.stdout.write(`[GAME LOG WRITE ERROR] ${e}\\n`);\n        }\n    }\n\n    /**\n     * Removes log files older than MAX_LOG_DAYS\n     */\n    private rotateOldLogs(): void {\n        try {\n            const files = fs.readdirSync(this.logsDir);\n            const now = Date.now();\n            const maxAge = this.MAX_LOG_DAYS * 24 * 60 * 60 * 1000;\n\n            for (const file of files) {\n                if (!file.endsWith('.log')) continue;\n\n                const filePath = path.join(this.logsDir, file);\n                const stats = fs.statSync(filePath);\n                const age = now - stats.mtimeMs;\n\n                if (age > maxAge) {\n                    fs.unlinkSync(filePath);\n                    process.stdout.write(`[Logger] Deleted old log: ${file}\\n`);\n                }\n            }\n        } catch (e) {\n            process.stdout.write(`[Logger] Error rotating logs: ${e}\\n`);\n        }\n    }\n\n    /**\n     * Intercepts console.log, console.error, console.warn\n     */\n    private interceptConsole(): void {\n        const originalLog = console.log;\n        const originalError = console.error;\n        const originalWarn = console.warn;\n\n        const self = this;\n\n        console.log = function (...args: any[]) {\n            const message = args.map(a => typeof a === 'object' ? JSON.stringify(a) : String(a)).join(' ');\n            self.writeToLauncherLog(self.formatMessage('INFO', 'Console', message));\n            originalLog.apply(console, args);\n        };\n\n        console.error = function (...args: any[]) {\n            const message = args.map(a => typeof a === 'object' ? JSON.stringify(a) : String(a)).join(' ');\n            self.writeToLauncherLog(self.formatMessage('ERROR', 'Console', message));\n            originalError.apply(console, args);\n        };\n\n        console.warn = function (...args: any[]) {\n            const message = args.map(a => typeof a === 'object' ? JSON.stringify(a) : String(a)).join(' ');\n            self.writeToLauncherLog(self.formatMessage('WARN', 'Console', message));\n            originalWarn.apply(console, args);\n        };\n    }\n\n    // Public logging methods with tags\n\n    public info(tag: string, message: string): void {\n        const formatted = this.formatMessage('INFO', tag, message);\n        this.writeToLauncherLog(formatted);\n        process.stdout.write(formatted + '\\n');\n    }\n\n    public error(tag: string, message: string): void {\n        const formatted = this.formatMessage('ERROR', tag, message);\n        this.writeToLauncherLog(formatted);\n        process.stderr.write(formatted + '\\n');\n    }\n\n    public warn(tag: string, message: string): void {\n        const formatted = this.formatMessage('WARN', tag, message);\n        this.writeToLauncherLog(formatted);\n        process.stdout.write(formatted + '\\n');\n    }\n\n    public debug(tag: string, message: string): void {\n        const formatted = this.formatMessage('DEBUG', tag, message);\n        this.writeToLauncherLog(formatted);\n        // Debug only goes to file, not console (to reduce noise)\n    }\n\n    /**\n     * Logs game output (stdout/stderr) to game log file\n     */\n    public game(stream: 'stdout' | 'stderr', line: string): void {\n        const prefix = stream === 'stderr' ? '[ERR]' : '[OUT]';\n        this.writeToGameLog(`${prefix} ${line}`);\n    }\n\n    /**\n     * Returns the path to the logs directory\n     */\n    public getLogsDir(): string {\n        return this.logsDir;\n    }\n}\n\n// Singleton instance\nexport const Logger = new PersistentLogger();\n", "import { app, ipcMain, IpcMainInvokeEvent } from 'electron';\nimport path from 'path';\nimport fs from 'fs';\nimport { spawn, exec } from 'child_process';\nimport { promisify } from 'util';\nimport AdmZip from 'adm-zip';\nimport { createWriteStream } from 'fs';\nimport { JavaManager } from './JavaManager.js';\nimport { UpdateManager } from './UpdateManager.js';\nimport { Logger } from './Logger.js';\nimport { getOverlayHandler } from '../main.js';\n\nconst execAsync = promisify(exec);\n\n/**\n * Validates that a file is a valid ZIP before extraction\n */\nfunction validateZipFile(zipPath: string): boolean {\n    if (!fs.existsSync(zipPath)) return false;\n    const buffer = fs.readFileSync(zipPath);\n    // Check ZIP magic bytes (PK\\x03\\x04)\n    return buffer.length >= 4 && buffer[0] === 0x50 && buffer[1] === 0x4B;\n}\n\n/**\n * Safely extract ZIP with validation\n */\nfunction safeExtractZip(zipPath: string, destDir: string): void {\n    if (!validateZipFile(zipPath)) {\n        const buffer = fs.existsSync(zipPath) ? fs.readFileSync(zipPath) : Buffer.alloc(0);\n        console.error(`[GameHandler] Invalid ZIP file: ${zipPath}. First bytes: ${buffer.slice(0, 20).toString('hex')}`);\n        throw new Error(`Invalid ZIP file. The download may have failed.`);\n    }\n    fs.mkdirSync(destDir, { recursive: true });\n    const zip = new AdmZip(zipPath);\n    zip.extractAllTo(destDir, true);\n}\n\n/**\n * Sleep helper for retry delays\n */\nfunction sleep(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n/**\n * Extract ZIP with retry logic for Windows file system race conditions\n * Uses exponential backoff: 500ms, 1000ms, 2000ms\n */\nasync function safeExtractZipWithRetry(zipPath: string, destDir: string, maxRetries: number = 3): Promise<void> {\n    const delays = [500, 1000, 2000];\n    let lastError: Error | null = null;\n\n    for (let attempt = 0; attempt <= maxRetries; attempt++) {\n        try {\n            safeExtractZip(zipPath, destDir);\n            return; // Success\n        } catch (e: any) {\n            lastError = e;\n\n            if (attempt < maxRetries) {\n                const delay = delays[attempt] || 2000;\n                console.warn(`[GameHandler] Extraction failed (attempt ${attempt + 1}/${maxRetries + 1}), retrying in ${delay}ms...`);\n                await sleep(delay);\n            }\n        }\n    }\n\n    // All retries failed\n    throw lastError || new Error(`Failed to extract ${zipPath} after ${maxRetries + 1} attempts`);\n}\n\n// Beta 1.7.3 Configuration\nconst VERSION_MANIFEST_URL = 'https://piston-meta.mojang.com/mc/game/version_manifest_v2.json';\nconst TARGET_VERSION_ID = 'b1.7.3';\n\ninterface GameSettings {\n    minMemory: string;\n    maxMemory: string;\n    javaArgs: string;\n}\n\ninterface GameOptions {\n    username: string;\n    gamePath?: string;\n    javaPath?: string;\n    settings?: GameSettings;\n}\n\nexport class GameHandler {\n    private gamePath: string;\n    private javaPath: string;\n    private javaManager: JavaManager;\n    private updateManager: UpdateManager;\n    private gameProcess: any = null; // ChildProcess type but avoiding import issues for now if needed, or better explicit.\n\n    constructor() {\n        this.gamePath = path.join(app.getPath('userData'), 'gamedata');\n        this.javaPath = 'java'; // Will be set by JavaManager\n        this.javaManager = new JavaManager();\n        this.updateManager = new UpdateManager();\n    }\n\n    public init() {\n        ipcMain.handle('launch-game', async (event, options: GameOptions) => {\n            return this.handleLaunch(event, options);\n        });\n\n        ipcMain.handle('kill-game', async () => {\n            if (this.gameProcess) {\n                console.log('Killing game process...');\n                this.gameProcess.kill();\n                this.gameProcess = null;\n                return { success: true };\n            }\n            return { success: false, error: 'No game running' };\n        });\n\n        ipcMain.handle('check-custom-instance', async () => {\n            const instanceZipPath = path.resolve('instance.zip');\n            const instanceDir = path.join(app.getPath('userData'), 'instances', 'default', 'instance.cfg');\n            return fs.existsSync(instanceZipPath) || fs.existsSync(instanceDir);\n        });\n\n        ipcMain.handle('check-update-status', async () => {\n            return this.handleUpdateCheck();\n        });\n\n        ipcMain.handle('perform-update', async (event) => {\n            return this.handlePerformUpdate(event);\n        });\n    }\n\n    private sendProgress(sender: Electron.WebContents, status: string, progress: number) {\n        sender.send('launch-progress', { status, progress });\n    }\n\n    private async checkJava(path: string): Promise<boolean> {\n        try {\n            await execAsync(`\"${path}\" -version`);\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n\n    private async checkAndExtractInstance(): Promise<string | null> {\n        const instanceDir = path.join(app.getPath('userData'), 'instances', 'default');\n        const dataDir = app.getPath('userData');\n\n        // Check if instance already exists\n        if (fs.existsSync(path.join(instanceDir, 'instance.cfg'))) {\n            console.log('Instance already exists, skipping extraction.');\n            return instanceDir;\n        }\n\n        // Download instance.zip to userData if not present\n        const instanceZip = path.join(dataDir, 'instance.zip');\n\n        if (!fs.existsSync(instanceZip)) {\n            console.log('instance.zip not found. Attempting to download from VPS...');\n            // We need a sender to show progress, but checkAndExtractInstance doesn't have it passed usually.\n            // For now, we'll log it. Ideally we refactor to pass sender.\n            // Note: Since this is called before typical progress events, we might want to just blocking download.\n\n            const vpsUrls = [\n                'https://craft.blocky.com.br/launcher-assets/instance.zip'\n            ];\n\n            for (const vpsUrl of vpsUrls) {\n                try {\n                    console.log(`Trying to download instance.zip from ${vpsUrl}...`);\n                    const response = await fetch(vpsUrl, { signal: AbortSignal.timeout(60000) }); // Increased timeout\n                    if (response.ok) {\n                        const arrayBuffer = await response.arrayBuffer();\n                        const buffer = Buffer.from(arrayBuffer);\n\n                        // Validate ZIP magic bytes (PK\\x03\\x04)\n                        if (buffer.length >= 4 && buffer[0] === 0x50 && buffer[1] === 0x4B) {\n                            fs.writeFileSync(instanceZip, buffer);\n                            console.log('instance.zip downloaded successfully from', vpsUrl);\n                            break; // Success, exit loop\n                        } else {\n                            console.warn(`Downloaded content from ${vpsUrl} is not a valid ZIP (got ${buffer.length} bytes, first bytes: ${buffer.slice(0, 20).toString('hex')})`);\n                            // Continue to next URL\n                        }\n                    }\n                } catch (e) {\n                    console.warn(`Failed to download instance.zip from ${vpsUrl}:`, e);\n                    // Continue to next URL\n                }\n            }\n        }\n\n        if (fs.existsSync(instanceZip) && validateZipFile(instanceZip)) {\n            console.log('Extracting instance.zip...');\n            safeExtractZip(instanceZip, instanceDir);\n            return instanceDir;\n        }\n\n        return null;\n    }\n\n    private async downloadFile(url: string, dest: string, filename: string, sender: Electron.WebContents) {\n        this.sendProgress(sender, `Baixando ${filename}...`, 0);\n        // Ensure directory exists\n        fs.mkdirSync(dest, { recursive: true });\n        const filePath = path.join(dest, filename);\n\n        try {\n\n            // If file exists, skip download (unless invalid size, checked later)\n            if (fs.existsSync(filePath)) {\n                return filePath;\n            }\n\n            const response = await fetch(url);\n            if (!response.ok) throw new Error(`Failed to download ${url}: ${response.statusText}`);\n\n            const total = Number(response.headers.get('content-length')) || 0;\n            const fileStream = createWriteStream(filePath);\n\n            if (!response.body) throw new Error('No body');\n\n            // @ts-ignore - ReadableStream/Node stream mismatch\n            const reader = response.body.getReader();\n            let downloaded = 0;\n\n            while (true) {\n                const { done, value } = await reader.read();\n                if (done) break;\n\n                fileStream.write(Buffer.from(value));\n                downloaded += value.length;\n                if (total > 0) {\n                    this.sendProgress(sender, `Baixando ${filename}`, Math.round((downloaded / total) * 100));\n                }\n            }\n\n            // Wait for the file stream to fully close (important for Windows)\n            await new Promise<void>((resolve, reject) => {\n                fileStream.on('finish', resolve);\n                fileStream.on('error', reject);\n                fileStream.end();\n            });\n\n            // Validate file size for jars (sanity check)\n            const stats = fs.statSync(filePath);\n            if (filename.endsWith('.jar') && stats.size < 100) {\n                fs.unlinkSync(filePath);\n                throw new Error(`Downloaded file ${filename} is too small (${stats.size} bytes). Likely invalid.`);\n            }\n\n            // Validate ZIP files\n            if (filename.endsWith('.zip') && !validateZipFile(filePath)) {\n                const buffer = fs.readFileSync(filePath);\n                const firstBytes = buffer.slice(0, 20).toString('hex');\n                fs.unlinkSync(filePath);\n                throw new Error(`Downloaded file ${filename} is not a valid ZIP (first bytes: ${firstBytes}). Server may have returned an error page.`);\n            }\n\n            return filePath;\n        } catch (e) {\n            if (fs.existsSync(filePath)) {\n                try { fs.unlinkSync(filePath); } catch (delErr) { /* ignore */ }\n            }\n            throw new Error(`Download failed: ${e}`);\n        }\n    }\n\n    private async handleLaunch(event: IpcMainInvokeEvent, options: GameOptions) {\n        console.log('Requesting game launch...', options);\n\n        // 0. Check for updates first\n        this.sendProgress(event.sender, 'Verificando atualiza\u00E7\u00F5es...', 2);\n        try {\n            const updateResult = await this.updateManager.performAllUpdates((status, percent) => {\n                // Map update progress to 2-15% of total progress\n                const mappedPercent = 2 + (percent / 100) * 13;\n                this.sendProgress(event.sender, status, Math.round(mappedPercent));\n            });\n\n            if (!updateResult.success) {\n                console.warn('Update check failed, continuing anyway:', updateResult.error);\n            }\n        } catch (e) {\n            console.warn('Update check failed, continuing anyway:', e);\n        }\n\n        // 1. Check & Extract Custom Instance\n        const instanceDir = await this.checkAndExtractInstance();\n        const isCustomInstance = !!instanceDir;\n\n        // Determine game Root\n        // If Custom Instance, the game root is the extracted dir.\n        // If Vanilla, it's userData/gamedata\n        const gameRoot = instanceDir || this.gamePath;\n        const dotMinecraft = isCustomInstance ? path.join(gameRoot, '.minecraft') : gameRoot;\n\n        // Ensure .minecraft exists (created by zip or we create it)\n        if (!fs.existsSync(dotMinecraft)) fs.mkdirSync(dotMinecraft, { recursive: true });\n\n        // FORCE CACHE CLEAR: Delete .fabric/remappedJars to ensure fresh remapping\n        const sensitiveCache = path.join(dotMinecraft, '.fabric', 'remappedJars');\n        if (fs.existsSync(sensitiveCache)) {\n            console.log('Clearing remappedJars cache to force fresh map...');\n            fs.rmSync(sensitiveCache, { recursive: true, force: true });\n        }\n\n        const binDir = path.join(dotMinecraft, 'bin');\n        // IMPORTANT: Match PrismLauncher - natives at instance root, NOT inside .minecraft/bin/\n        // The .minecraft path with dot may cause issues with LWJGL native loading on Windows\n        const nativesDir = path.join(gameRoot, 'natives');\n        const librariesDir = path.join(gameRoot, 'libraries'); // Store libs outside .minecraft usually, or inside\n\n        try {\n            // 2a. Download Vanilla Assets (Required for both)\n            if (!options.username) throw new Error('Username required');\n\n            // Ensure Java is available (auto-download if needed)\n            this.sendProgress(event.sender, 'Verificando Java...', 5);\n            try {\n                this.javaPath = options.javaPath || await this.javaManager.ensureJava(event.sender);\n            } catch (e: any) {\n                throw new Error('Falha ao configurar Java: ' + e.message);\n            }\n\n            // Fetch Manifest (Vanilla)\n            this.sendProgress(event.sender, 'Verificando vers\u00E3o...', 65);\n            const manifestRes = await fetch(VERSION_MANIFEST_URL);\n            const manifest = await manifestRes.json() as any;\n            const versionData = manifest.versions.find((v: any) => v.id === TARGET_VERSION_ID);\n            if (!versionData) throw new Error(`Version ${TARGET_VERSION_ID} not found`);\n\n            const versionDetailsRes = await fetch(versionData.url);\n            const versionDetails = await versionDetailsRes.json() as any;\n\n            // Download Minecraft Jar\n            const clientUrl = versionDetails.downloads.client.url;\n            const mcJarPath = await this.downloadFile(clientUrl, binDir, 'minecraft.jar', event.sender);\n\n            // Download LWJGL Natives (Simplified: just download standard b1.7.3 natives)\n            // Note: Real launchers extract these from libraries. \n            // For b1.7.3, they are often in the version json libraries with \"natives\" classifier.\n            // We will try to find and download them.\n            if (!isCustomInstance) {\n                this.sendProgress(event.sender, 'Baixando bibliotecas...', 70);\n\n                // Determine platform-specific natives classifier\n                let nativesClassifier = 'natives-linux';\n                if (process.platform === 'win32') nativesClassifier = 'natives-windows';\n                else if (process.platform === 'darwin') nativesClassifier = 'natives-osx';\n\n                // Iterate libraries for natives\n                for (const lib of versionDetails.libraries) {\n                    if (lib.downloads && lib.downloads.classifiers && lib.downloads.classifiers[nativesClassifier]) {\n                        const native = lib.downloads.classifiers[nativesClassifier];\n                        // Download and unzip\n                        // For simplicity in this demo, we assume we need to unzip them to bin/natives\n                        // Implementation: Download zip to temp, unzip to nativesDir.\n\n                        const tempNativePath = await this.downloadFile(native.url, path.join(gameRoot, 'temp_natives'), path.basename(native.path), event.sender);\n                        // Validate and extract the native jar\n                        if (validateZipFile(tempNativePath)) {\n                            const zip = new AdmZip(tempNativePath);\n                            zip.extractAllTo(nativesDir, true);\n                        } else {\n                            console.warn(`[GameHandler] Skipping invalid native file: ${tempNativePath}`);\n                        }\n                    }\n                }\n\n                // Ensure OpenAL is available (fallback for vanilla mode)\n                // Legacy Fabric LWJGL uses OpenAL-amd64.dll / OpenAL-i386.dll naming\n                const openalPath = path.join(nativesDir, process.platform === 'win32' ? 'OpenAL-amd64.dll' : 'libopenal.so');\n                if (!fs.existsSync(openalPath)) {\n                    console.log('[GameHandler] OpenAL not found, downloading from Legacy Fabric...');\n                    this.sendProgress(event.sender, 'Baixando OpenAL...', 72);\n\n                    let lwjglClassifier = 'natives-linux';\n                    if (process.platform === 'win32') lwjglClassifier = 'natives-windows';\n                    else if (process.platform === 'darwin') lwjglClassifier = 'natives-osx';\n\n                    const lwjglNativeUrl = `https://repo.legacyfabric.net/repository/legacyfabric/org/lwjgl/lwjgl/lwjgl-platform/2.9.4+legacyfabric.9/lwjgl-platform-2.9.4+legacyfabric.9-${lwjglClassifier}.jar`;\n\n                    try {\n                        const tempLwjglPath = await this.downloadFile(lwjglNativeUrl, path.join(gameRoot, 'temp_natives'), `lwjgl-platform-${lwjglClassifier}.jar`, event.sender);\n                        if (validateZipFile(tempLwjglPath)) {\n                            const zip = new AdmZip(tempLwjglPath);\n                            zip.extractAllTo(nativesDir, true);\n                            console.log('[GameHandler] OpenAL natives extracted successfully');\n\n                        }\n                    } catch (e) {\n                        console.warn('[GameHandler] Failed to download OpenAL natives:', e);\n                    }\n                }\n            }\n\n            // 2b. Handle Fabric/Custom Dependencies\n            let classpath = [mcJarPath];\n            let mainClass = 'net.minecraft.client.Minecraft';\n            let tweakClass = '';\n\n            if (isCustomInstance) {\n                // Check mmc-pack.json for Fabric\n                const mmcPath = path.join(instanceDir, 'mmc-pack.json');\n                if (fs.existsSync(mmcPath)) {\n                    const mmcPack = JSON.parse(fs.readFileSync(mmcPath, 'utf-8'));\n                    const fabricComponent = mmcPack.components.find((c: any) => c.uid === 'net.fabricmc.fabric-loader');\n\n                    if (fabricComponent) {\n                        this.sendProgress(event.sender, 'Configurando Fabric/StationAPI...', 75);\n\n                        const fabricLibs = [\n                            // ASM (Required by Mixin)\n                            { name: 'asm:9.7.1', group: 'org.ow2.asm', artifact: 'asm', version: '9.7.1' },\n                            { name: 'asm-analysis:9.7.1', group: 'org.ow2.asm', artifact: 'asm-analysis', version: '9.7.1' },\n                            { name: 'asm-commons:9.7.1', group: 'org.ow2.asm', artifact: 'asm-commons', version: '9.7.1' },\n                            { name: 'asm-tree:9.7.1', group: 'org.ow2.asm', artifact: 'asm-tree', version: '9.7.1' },\n                            { name: 'asm-util:9.7.1', group: 'org.ow2.asm', artifact: 'asm-util', version: '9.7.1' },\n                            // Mixin\n                            { name: 'sponge-mixin:0.15.3+mixin.0.8.7', group: 'net.fabricmc', artifact: 'sponge-mixin', version: '0.15.3+mixin.0.8.7' },\n                            { name: 'mixinextras-fabric:0.4.1', group: 'io.github.llamalad7', artifact: 'mixinextras-fabric', version: '0.4.1' },\n                            // Commons (Required by StationAPI/Fabric)\n                            { name: 'commons-lang3:3.12.0', group: 'org.apache.commons', artifact: 'commons-lang3', version: '3.12.0' },\n                            { name: 'commons-io:2.11.0', group: 'commons-io', artifact: 'commons-io', version: '2.11.0' },\n                            { name: 'commons-codec:1.15', group: 'commons-codec', artifact: 'commons-codec', version: '1.15' },\n                            // LWJGL/JInput (Prism/Babric Specific Versions)\n                            { name: 'jutils:1.0.0', group: 'net.java.jutils', artifact: 'jutils', version: '1.0.0' },\n                            { name: 'jinput:2.0.5', group: 'net.java.jinput', artifact: 'jinput', version: '2.0.5' },\n                            { name: 'lwjgl:2.9.4+legacyfabric.9', group: 'org.lwjgl.lwjgl', artifact: 'lwjgl', version: '2.9.4+legacyfabric.9' },\n                            { name: 'lwjgl_util:2.9.4+legacyfabric.9', group: 'org.lwjgl.lwjgl', artifact: 'lwjgl_util', version: '2.9.4+legacyfabric.9' },\n                            // Logging (Prism uses these exact versions)\n                            { name: 'log4j-api:2.16.0', group: 'org.apache.logging.log4j', artifact: 'log4j-api', version: '2.16.0' },\n                            { name: 'log4j-core:2.16.0', group: 'org.apache.logging.log4j', artifact: 'log4j-core', version: '2.16.0' },\n                            { name: 'log4j-slf4j18-impl:2.16.0', group: 'org.apache.logging.log4j', artifact: 'log4j-slf4j18-impl', version: '2.16.0' },\n                            { name: 'terminalconsoleappender:1.2.0', group: 'net.minecrell', artifact: 'terminalconsoleappender', version: '1.2.0' },\n                            // SLF4J (Prism uses 1.8.0-beta4)\n                            { name: 'slf4j-api:1.8.0-beta4', group: 'org.slf4j', artifact: 'slf4j-api', version: '1.8.0-beta4' },\n                            // Guava (Critical for modern Fabric/Mixin on older MC)\n                            { name: 'guava:31.0.1-jre', group: 'com.google.guava', artifact: 'guava', version: '31.0.1-jre' },\n                            { name: 'failureaccess:1.0.1', group: 'com.google.guava', artifact: 'failureaccess', version: '1.0.1' },\n                            // GSON (Required by Fabric)\n                            { name: 'gson:2.8.9', group: 'com.google.code.gson', artifact: 'gson', version: '2.8.9' },\n                            // Babric Log4j Config (from Prism log)\n                            { name: 'log4j-config:1.0.0', group: 'babric', artifact: 'log4j-config', version: '1.0.0' }\n                        ];\n\n                        const fabricBase = 'https://maven.fabricmc.net/';\n                        const mavenCentral = 'https://repo1.maven.org/maven2/';\n                        const legacyFabricRepo = 'https://repo.legacyfabric.net/repository/legacyfabric/';\n                        const babricRepo = 'https://maven.glass-launcher.net/babric/';\n\n                        // Libraries are downloaded directly from Maven repos (no VPS libraries.zip)\n                        console.log('[GameHandler] Using Maven-based library downloads');\n                        if (!fs.existsSync(librariesDir)) {\n                            fs.mkdirSync(librariesDir, { recursive: true });\n                        }\n\n                        for (const lib of fabricLibs) {\n                            const pathStr = `${lib.group.replace(/\\./g, '/')}/${lib.artifact}/${lib.version}/${lib.artifact}-${lib.version}.jar`;\n                            const localPath = path.join(librariesDir, `${lib.artifact}-${lib.version}.jar`);\n\n                            // Check if already downloaded\n                            if (fs.existsSync(localPath)) {\n                                classpath.push(localPath);\n                                continue;\n                            }\n\n                            // 2. Fallback to Download (Offline Mode fallback to online)\n                            // Route to correct Maven repository based on group\n                            let url = fabricBase + pathStr;\n\n                            // Maven Central hosted libraries\n                            const mavenCentralGroups = [\n                                'org.apache', 'commons-io', 'commons-codec',\n                                'net.java.jutils', 'net.java.jinput', 'org.ow2.asm',\n                                'com.google.guava', 'com.google.code.gson', 'org.slf4j',\n                                'io.github.llamalad7', 'net.minecrell'\n                            ];\n                            const isMavenCentral = mavenCentralGroups.some(g => lib.group.startsWith(g) || lib.group === g);\n\n                            if (isMavenCentral) {\n                                url = mavenCentral + pathStr;\n                            } else if (lib.group.startsWith('org.lwjgl')) {\n                                url = legacyFabricRepo + pathStr;\n                            } else if (lib.group === 'babric') {\n                                url = babricRepo + pathStr;\n                            }\n\n                            const libPath = await this.downloadFile(url, librariesDir, `${lib.artifact}-${lib.version}.jar`, event.sender);\n                            classpath.push(libPath);\n                        }\n\n                        // Download Legacy Fabric Natives (Crucial for LWJGL 2.9.4+legacyfabric.9)\n                        this.sendProgress(event.sender, 'Baixando nativos...', 78);\n\n                        // Clear natives folder to ensure fresh extraction (fixes issues with renamed/corrupted files)\n                        if (fs.existsSync(nativesDir)) {\n                            console.log('[GameHandler] Clearing natives folder for fresh extraction...');\n                            fs.rmSync(nativesDir, { recursive: true, force: true });\n                        }\n                        fs.mkdirSync(nativesDir, { recursive: true });\n\n                        let classifier = 'natives-linux';\n                        if (process.platform === 'win32') classifier = 'natives-windows';\n                        else if (process.platform === 'darwin') classifier = 'natives-osx';\n\n                        const nativesList = [\n                            { group: 'org.lwjgl.lwjgl', artifact: 'lwjgl-platform', version: '2.9.4+legacyfabric.9', classifier: classifier },\n                            { group: 'net.java.jinput', artifact: 'jinput-platform', version: '2.0.5', classifier: classifier }\n                        ];\n\n                        for (const native of nativesList) {\n                            const filename = `${native.artifact}-${native.version}-${native.classifier}.jar`;\n                            const pathStr = `${native.group.replace(/\\./g, '/')}/${native.artifact}/${native.version}/${filename}`;\n                            const localPath = path.join(librariesDir, filename);\n\n                            // Check if already downloaded\n                            if (fs.existsSync(localPath)) {\n                                console.log(`[Cache] Found native library locally: ${filename}`);\n                                await safeExtractZipWithRetry(localPath, nativesDir);\n                                continue;\n                            }\n\n                            // 2. Download if missing\n                            let url = legacyFabricRepo + pathStr;\n                            if (native.group === 'net.java.jinput') {\n                                url = mavenCentral + pathStr;\n                            }\n\n                            // Download to temp\n                            const tempPath = await this.downloadFile(url, path.join(gameRoot, 'temp_natives'), filename, event.sender);\n\n                            // Extract to nativesDir\n                            await safeExtractZipWithRetry(tempPath, nativesDir);\n                        }\n\n                        // FIX: macOS .jnilib to .dylib renaming (Prism behavior)\n                        if (process.platform === 'darwin') {\n                            try {\n                                const files = fs.readdirSync(nativesDir);\n                                for (const file of files) {\n                                    if (file.endsWith('.jnilib')) {\n                                        const oldPath = path.join(nativesDir, file);\n                                        const newPath = path.join(nativesDir, file.replace('.jnilib', '.dylib'));\n                                        if (fs.existsSync(oldPath)) {\n                                            console.log(`[GameHandler] Renaming ${file} to .dylib`);\n                                            try {\n                                                if (fs.existsSync(newPath)) fs.unlinkSync(newPath);\n                                                fs.renameSync(oldPath, newPath);\n                                            } catch (renameErr) {\n                                                console.warn(`[GameHandler] Failed to rename ${file}:`, renameErr);\n                                            }\n                                        }\n                                    }\n                                }\n                            } catch (e) {\n                                console.warn('[GameHandler] Failed to process macOS natives:', e);\n                            }\n                        }\n\n                        // NOTE: PrismLauncher works with the original OpenAL-amd64.dll files\n                        // No need to download or rename. The fix is in using forward slashes\n                        // in java.library.path and NOT using -Dorg.lwjgl.librarypath/openal.libname\n\n                        // Log the contents of natives folder for debugging\n                        try {\n                            const nativesContents = fs.readdirSync(nativesDir);\n                            console.log(`[GameHandler] Natives folder contents (${nativesDir}):`, nativesContents);\n                        } catch (e) {\n                            console.error('[GameHandler] Failed to read natives folder:', e);\n                        }\n\n\n                        // Download Fabric Loader (0.16.7)\n                        const loaderUrl = 'https://maven.fabricmc.net/net/fabricmc/fabric-loader/0.16.7/fabric-loader-0.16.7.jar';\n                        const loaderPath = await this.downloadFile(loaderUrl, librariesDir, 'fabric-loader-0.16.7.jar', event.sender);\n\n                        // Intermediary b1.7.3 (Use Upstream to match Prism)\n                        const intermediaryUrl = 'https://maven.glass-launcher.net/babric/babric/intermediary-upstream/b1.7.3/intermediary-upstream-b1.7.3.jar';\n                        const intermediaryPath = await this.downloadFile(intermediaryUrl, librariesDir, 'intermediary-upstream-b1.7.3.jar', event.sender);\n\n                        // Add to classpath\n                        classpath.push(loaderPath);\n                        classpath.push(intermediaryPath);\n\n                        // Overwrite Main Class\n                        mainClass = 'net.fabricmc.loader.impl.launch.knot.KnotClient';\n\n                        // REORDERING CLASSPATH TO MATCH PRISM\n                        // We want: [Libraries..., Loader, Intermediary, ClientJar]\n                        // Remove mcJarPath from its current position (ignoring where it is) and append it to end.\n                        const newClasspath = [];\n                        for (const p of classpath) {\n                            if (p !== mcJarPath) newClasspath.push(p);\n                        }\n                        newClasspath.push(mcJarPath);\n                        classpath = newClasspath;\n\n\n\n\n\n\n                    }\n                }\n            }\n\n            // Add LWJGL to classpath\n            // Note: For Beta 1.7.3, we need jinput, lwjgl, lwjgl_util. \n            // We need to fetch these jars.\n            // Simplified: use versionDetails to find them.\n            if (!isCustomInstance) {\n                for (const lib of versionDetails.libraries) {\n                    if (lib.downloads && lib.downloads.artifact) {\n                        const art = lib.downloads.artifact;\n                        if (art.path.includes('lwjgl') || art.path.includes('jinput')) {\n                            const libPath = await this.downloadFile(art.url, binDir, path.basename(art.path), event.sender);\n                            classpath.push(libPath);\n                        }\n                    }\n                }\n            }\n\n            // 3. Launch\n            this.sendProgress(event.sender, 'Iniciando Jogo...', 95);\n\n            // Memory settings from user config\n            const minMem = options.settings?.minMemory || '512';\n            const maxMem = options.settings?.maxMemory || '2048';\n            const customArgs = options.settings?.javaArgs || '';\n\n            // Find OpenAL library for -Dorg.lwjgl.openal.libname property\n            let openalLibPath = '';\n            try {\n                if (fs.existsSync(nativesDir)) {\n                    const nativesFiles = fs.readdirSync(nativesDir);\n                    // Prioritize specific names based on platform\n                    const priorities = process.platform === 'win32'\n                        ? ['OpenAL64.dll', 'OpenAL32.dll', 'OpenAL-amd64.dll', 'OpenAL-i386.dll', 'OpenAL.dll']\n                        : process.platform === 'darwin'\n                            ? ['libopenal.dylib', 'openal.dylib']\n                            : ['libopenal.so', 'libopenal-amd64.so', 'libopenal-i386.so'];\n\n                    for (const p of priorities) {\n                        if (nativesFiles.includes(p)) {\n                            // Use native path separators - don't convert to forward slashes on Windows\n                            openalLibPath = path.join(nativesDir, p);\n                            console.log(`[GameHandler] Found OpenAL library: ${openalLibPath}`);\n                            break;\n                        }\n                    }\n\n                    // Fallback: search for anything containing \"openal\"\n                    if (!openalLibPath) {\n                        const found = nativesFiles.find(f => f.toLowerCase().includes('openal') && (f.endsWith('.dll') || f.endsWith('.so') || f.endsWith('.dylib')));\n                        if (found) {\n                            openalLibPath = path.join(nativesDir, found);\n                            console.log(`[GameHandler] Found OpenAL library (fallback): ${openalLibPath}`);\n                        }\n                    }\n                }\n            } catch (e) {\n                console.warn('[GameHandler] Failed to scan for OpenAL lib:', e);\n            }\n\n            // Base launch args - Matching PrismLauncher configuration\n            // IMPORTANT: Use NATIVE path separators (Backslashes on Windows)\n            // PrismLauncher logs show forward slashes but likely uses backslashes internally for the actual process spawn on Windows\n            const resourcesPath = path.join(dotMinecraft, 'resources');\n\n            const launchArgs: string[] = [\n                `-Xms${minMem}M`,\n                `-Xmx${maxMem}M`,\n                // Use native path separators\n                '-Djava.library.path=' + nativesDir,\n                '-Dfabric.gameJarPath=' + mcJarPath,\n                '-Dfabric.gameVersion=b1.7.3',\n                '-Dfabric.envType=client',\n                // Suppress SLF4J \"no providers\" warning\n                '-Dslf4j.internal.verbosity=ERROR',\n                // Disable legacy resource downloads from defunct S3 bucket\n                '-Dminecraft.resources.index=' + resourcesPath,\n                '-Dminecraft.applet.TargetDirectory=' + dotMinecraft,\n                '-Dminecraft.applet.BaseURL=file:///',\n            ];\n\n            // Add custom JVM arguments from settings (if any)\n            if (customArgs.trim()) {\n                const customArgsArray = customArgs.trim().split(/\\s+/).filter(arg => arg.length > 0);\n                launchArgs.push(...customArgsArray);\n            }\n\n            // Add classpath and main class\n            launchArgs.push('-cp', classpath.join(path.delimiter));\n            launchArgs.push(mainClass);\n\n            // Game Args\n            launchArgs.push('--username', options.username);\n            launchArgs.push('--gameDir', dotMinecraft);\n            launchArgs.push('--assetsDir', path.join(dotMinecraft, 'resources')); // Old resources logic\n\n            if (isCustomInstance && mainClass.includes('KnotClient')) {\n                launchArgs.push('--assetIndex', 'truly_legacy'); // Babric often uses 'truly_legacy' or 'legacy'?\n                // Actually, standard b1.7.3 uses 'legacy' assets, but Fabric might want an index argument.\n                // Let's guess 'legacy' for now.\n            }\n\n            // Auto-connect to BlockyCRAFT server\n            launchArgs.push('--server', '185.100.215.195');\n            launchArgs.push('--port', '25565');\n\n\n\n            console.log('Spawning java:', this.javaPath);\n            console.log('Args:', launchArgs);\n\n            // Prepare environment variables\n            const gameEnv = { ...process.env };\n\n            // Configure OpenAL Soft for Linux ONLY\n            // Setting this on Windows breaks OpenAL if openal-soft tries to load linux backends\n            if (process.platform === 'linux') {\n                // Increase OpenAL buffer size to prevent timing warnings\n                gameEnv.ALSOFT_CONF = 'period_size=2048';\n                // Prefer PulseAudio/PipeWire backend\n                gameEnv.ALSOFT_DRIVERS = 'pulse,alsa,oss';\n            }\n\n            // On Windows, add natives to PATH to help LWJGL find the DLLs\n            if (process.platform === 'win32') {\n                // Find existing Path key (case-insensitive)\n                const pathKey = Object.keys(gameEnv).find(k => k.toLowerCase() === 'path') || 'Path';\n                // Append nativesDir to PATH\n                gameEnv[pathKey] = nativesDir + path.delimiter + (gameEnv[pathKey] || '');\n                console.log('[GameHandler] Updated PATH with natives:', nativesDir);\n            }\n\n            this.gameProcess = spawn(this.javaPath, launchArgs, {\n                cwd: dotMinecraft,\n                env: gameEnv\n            });\n\n            // Notify overlay that game is now running\n            const overlayHandler = getOverlayHandler();\n            if (overlayHandler) {\n                overlayHandler.setGameRunning(true);\n            }\n\n            // Filter patterns for known harmless messages\n            const suppressedPatterns = [\n                's3.amazonaws.com/MinecraftResources',\n                'Failed to add pack.mcmeta',\n                'Failed to add READ_ME_I_AM_VERY_IMPORTANT'\n            ];\n\n            this.gameProcess.stdout.on('data', (data: any) => {\n                const log = data.toString().trim();\n                if (!log) return;\n\n                // Always log to game file\n                Logger.game('stdout', log);\n\n                // Skip suppressed messages for console\n                if (suppressedPatterns.some(pattern => log.includes(pattern))) {\n                    return;\n                }\n\n                console.log(`[MC]: ${log}`);\n\n                // Check for successful client startup/connection to switch UI\n                if (log.includes('Connecting to')) {\n                    event.sender.send('game-connected');\n                }\n            });\n\n            this.gameProcess.stderr.on('data', (data: any) => {\n                const log = data.toString().trim();\n                if (!log) return;\n\n                // Always log to game file\n                Logger.game('stderr', log);\n\n                // Skip suppressed messages for console\n                if (suppressedPatterns.some(pattern => log.includes(pattern))) {\n                    return;\n                }\n\n                console.error(`[MC-Err]: ${log}`);\n            });\n\n            this.gameProcess.on('close', (code: any) => {\n                Logger.info('GameHandler', `Minecraft exited with code ${code}`);\n                console.log(`Minecraft exited with code ${code}`);\n                this.sendProgress(event.sender, 'Jogo fechado', 100);\n                this.gameProcess = null;\n                event.sender.send('game-closed', code);\n\n                // Notify overlay that game has stopped\n                const overlayHandler = getOverlayHandler();\n                if (overlayHandler) {\n                    overlayHandler.setGameRunning(false);\n                }\n            });\n\n            return { success: true };\n\n        } catch (e: any) {\n            console.error('Launch failed:', e);\n            this.sendProgress(event.sender, `Erro: ${e.message}`, 0);\n            return { success: false, error: e.message, stack: e.stack };\n        }\n    }\n\n\n    // End of class (Removed unused methods: getVersionDetails, downloadLibraries, spawnGameProcess, old downloadFile)\n    private async handleUpdateCheck() {\n        try {\n            const updateCheck = await this.updateManager.checkForUpdates();\n\n            if (!updateCheck.remoteVersions) {\n                return { available: false, error: 'Failed to fetch version info' };\n            }\n\n            const hasUpdates = updateCheck.instanceUpdate ||\n                updateCheck.librariesUpdate ||\n                updateCheck.modsUpdate;\n\n            if (hasUpdates) {\n                return {\n                    available: true,\n                    instanceUpdate: updateCheck.instanceUpdate,\n                    librariesUpdate: updateCheck.librariesUpdate,\n                    modsUpdate: updateCheck.modsUpdate,\n                    notes: updateCheck.remoteVersions.mods?.notes || 'Atualiza\u00E7\u00F5es dispon\u00EDveis'\n                };\n            }\n\n            return { available: false };\n        } catch (e) {\n            console.error('Update check failed:', e);\n            return { available: false, error: String(e) };\n        }\n    }\n\n    private async handlePerformUpdate(event: IpcMainInvokeEvent) {\n        try {\n            const result = await this.updateManager.performAllUpdates((status, percent) => {\n                this.sendProgress(event.sender, status, percent);\n            });\n\n            return result;\n        } catch (e) {\n            console.error('Update failed:', e);\n            this.sendProgress(event.sender, `Erro na atualiza\u00E7\u00E3o: ${e}`, 0);\n            return { success: false, error: String(e) };\n        }\n    }\n}\n", "import { app } from 'electron';\nimport path from 'path';\nimport fs from 'fs';\nimport { createWriteStream } from 'fs';\nimport { exec } from 'child_process';\nimport { promisify } from 'util';\nimport AdmZip from 'adm-zip';\n\nconst execAsync = promisify(exec);\n\n// Adoptium API base URL for Eclipse Temurin\nconst ADOPTIUM_API_BASE = 'https://api.adoptium.net/v3/binary/latest';\nconst JAVA_VERSION = '17';\nconst JVM_IMPL = 'hotspot';\nconst VENDOR = 'eclipse';\n\ninterface PlatformInfo {\n    os: string;\n    arch: string;\n    extension: string;\n    executablePath: string;\n}\n\nexport class JavaManager {\n    private javaDir: string;\n    private markerFile: string;\n\n    constructor() {\n        this.javaDir = path.join(app.getPath('userData'), 'java');\n        this.markerFile = path.join(this.javaDir, '.java17_installed');\n    }\n\n    /**\n     * Ensures Java 17 is available, downloading it if necessary.\n     * Returns the path to the java executable.\n     */\n    public async ensureJava(sender?: Electron.WebContents): Promise<string> {\n        // 1. Check if we already have Java installed locally\n        const localJavaPath = this.getLocalJavaPath();\n        if (localJavaPath && fs.existsSync(localJavaPath)) {\n            console.log('[JavaManager] Using locally installed Java:', localJavaPath);\n            return localJavaPath;\n        }\n\n        // 2. Try to detect system Java\n        const systemJava = await this.detectSystemJava();\n        if (systemJava) {\n            console.log('[JavaManager] Using system Java:', systemJava);\n            return systemJava;\n        }\n\n        // 3. Download Java\n        console.log('[JavaManager] No Java found, downloading...');\n        return this.downloadAndInstallJava(sender);\n    }\n\n    /**\n     * Detects if Java 17+ is available on the system PATH or common locations.\n     */\n    private async detectSystemJava(): Promise<string | null> {\n        const javaPaths = this.getCommonJavaPaths();\n        \n        for (const javaPath of javaPaths) {\n            if (await this.isValidJava17(javaPath)) {\n                return javaPath;\n            }\n        }\n        \n        return null;\n    }\n\n    /**\n     * Returns common Java installation paths based on OS.\n     */\n    private getCommonJavaPaths(): string[] {\n        const paths: string[] = ['java']; // Try PATH first\n        \n        const platform = process.platform;\n        \n        if (platform === 'win32') {\n            const programFiles = process.env['ProgramFiles'] || 'C:\\\\Program Files';\n            const programFilesX86 = process.env['ProgramFiles(x86)'] || 'C:\\\\Program Files (x86)';\n            \n            // Common Windows Java locations\n            paths.push(\n                path.join(programFiles, 'Eclipse Adoptium', 'jdk-17*', 'bin', 'java.exe'),\n                path.join(programFiles, 'Java', 'jdk-17*', 'bin', 'java.exe'),\n                path.join(programFiles, 'Java', 'jre-17*', 'bin', 'java.exe'),\n                path.join(programFiles, 'Temurin', 'jdk-17*', 'bin', 'java.exe'),\n                path.join(programFilesX86, 'Java', 'jdk-17*', 'bin', 'java.exe'),\n            );\n        } else if (platform === 'darwin') {\n            // macOS Java locations\n            paths.push(\n                '/Library/Java/JavaVirtualMachines/temurin-17.jdk/Contents/Home/bin/java',\n                '/Library/Java/JavaVirtualMachines/adoptopenjdk-17.jdk/Contents/Home/bin/java',\n                '/usr/local/opt/openjdk@17/bin/java',\n                '/opt/homebrew/opt/openjdk@17/bin/java',\n            );\n        } else {\n            // Linux Java locations\n            paths.push(\n                '/usr/lib/jvm/temurin-17-jdk/bin/java',\n                '/usr/lib/jvm/java-17-openjdk/bin/java',\n                '/usr/lib/jvm/java-17-openjdk-amd64/bin/java',\n                '/usr/lib/jvm/java-17-temurin/bin/java',\n                '/opt/java/openjdk/bin/java',\n            );\n        }\n        \n        return paths;\n    }\n\n    /**\n     * Checks if the given Java path is valid and is Java 17+.\n     */\n    private async isValidJava17(javaPath: string): Promise<boolean> {\n        try {\n            const { stdout, stderr } = await execAsync(`\"${javaPath}\" -version`);\n            const output = stdout + stderr; // Java writes version to stderr\n            \n            // Check for version 17 or higher\n            const versionMatch = output.match(/version \"(\\d+)/);\n            if (versionMatch) {\n                const majorVersion = parseInt(versionMatch[1], 10);\n                return majorVersion >= 17;\n            }\n            \n            return false;\n        } catch {\n            return false;\n        }\n    }\n\n    /**\n     * Gets platform info for Adoptium API.\n     */\n    private getPlatformInfo(): PlatformInfo {\n        const platform = process.platform;\n        const arch = process.arch;\n        \n        let os: string;\n        let extension: string;\n        let executablePath: string;\n        \n        switch (platform) {\n            case 'win32':\n                os = 'windows';\n                extension = 'zip';\n                executablePath = 'bin/java.exe';\n                break;\n            case 'darwin':\n                os = 'mac';\n                extension = 'tar.gz';\n                executablePath = 'Contents/Home/bin/java';\n                break;\n            default:\n                os = 'linux';\n                extension = 'tar.gz';\n                executablePath = 'bin/java';\n        }\n        \n        let archStr: string;\n        switch (arch) {\n            case 'arm64':\n                archStr = 'aarch64';\n                break;\n            case 'x64':\n            default:\n                archStr = 'x64';\n        }\n        \n        return { os, arch: archStr, extension, executablePath };\n    }\n\n    /**\n     * Gets the download URL for Adoptium JRE 17.\n     */\n    private getDownloadUrl(): { url: string; filename: string } {\n        const info = this.getPlatformInfo();\n        \n        // Adoptium API URL pattern\n        const url = `${ADOPTIUM_API_BASE}/${JAVA_VERSION}/ga/${info.os}/${info.arch}/jre/${JVM_IMPL}/normal/${VENDOR}`;\n        const filename = `temurin-17-jre.${info.extension}`;\n        \n        return { url, filename };\n    }\n\n    /**\n     * Gets the path to the locally installed Java executable.\n     */\n    private getLocalJavaPath(): string | null {\n        if (!fs.existsSync(this.markerFile)) {\n            return null;\n        }\n        \n        const info = this.getPlatformInfo();\n        \n        // Find the extracted JRE directory\n        if (!fs.existsSync(this.javaDir)) {\n            return null;\n        }\n        \n        const entries = fs.readdirSync(this.javaDir);\n        const jreDir = entries.find(e => \n            e.startsWith('jdk-17') && \n            fs.statSync(path.join(this.javaDir, e)).isDirectory()\n        );\n        \n        if (!jreDir) {\n            return null;\n        }\n        \n        const javaPath = path.join(this.javaDir, jreDir, info.executablePath);\n        \n        if (fs.existsSync(javaPath)) {\n            return javaPath;\n        }\n        \n        return null;\n    }\n\n    /**\n     * Downloads and installs Java 17 JRE.\n     */\n    private async downloadAndInstallJava(sender?: Electron.WebContents): Promise<string> {\n        const { url, filename } = this.getDownloadUrl();\n        const info = this.getPlatformInfo();\n        \n        // Ensure java directory exists\n        fs.mkdirSync(this.javaDir, { recursive: true });\n        \n        const archivePath = path.join(this.javaDir, filename);\n        \n        // Download the JRE\n        this.sendProgress(sender, 'Baixando Java 17...', 0);\n        console.log('[JavaManager] Downloading from:', url);\n        \n        try {\n            const response = await fetch(url, { redirect: 'follow' });\n            \n            if (!response.ok) {\n                throw new Error(`Failed to download Java: ${response.status} ${response.statusText}`);\n            }\n            \n            const total = Number(response.headers.get('content-length')) || 0;\n            const fileStream = createWriteStream(archivePath);\n            \n            if (!response.body) {\n                throw new Error('No response body');\n            }\n            \n            const reader = response.body.getReader();\n            let downloaded = 0;\n            \n            while (true) {\n                const { done, value } = await reader.read();\n                if (done) break;\n                \n                fileStream.write(Buffer.from(value));\n                downloaded += value.length;\n                \n                if (total > 0) {\n                    const percent = Math.round((downloaded / total) * 50); // 0-50% for download\n                    this.sendProgress(sender, `Baixando Java 17... (${this.formatSize(downloaded)}/${this.formatSize(total)})`, percent);\n                }\n            }\n            \n            fileStream.end();\n            \n            // Wait for file to be fully written\n            await new Promise<void>((resolve, reject) => {\n                fileStream.on('finish', resolve);\n                fileStream.on('error', reject);\n            });\n            \n            console.log('[JavaManager] Download complete:', archivePath);\n            \n        } catch (e: any) {\n            // Cleanup on failure\n            if (fs.existsSync(archivePath)) {\n                fs.unlinkSync(archivePath);\n            }\n            throw new Error(`Failed to download Java: ${e.message}`);\n        }\n        \n        // Extract the archive\n        this.sendProgress(sender, 'Extraindo Java 17...', 55);\n        console.log('[JavaManager] Extracting...');\n        \n        try {\n            if (info.extension === 'zip') {\n                // Windows: Use AdmZip\n                const zip = new AdmZip(archivePath);\n                zip.extractAllTo(this.javaDir, true);\n            } else {\n                // Linux/macOS: Use tar\n                await execAsync(`tar -xzf \"${archivePath}\" -C \"${this.javaDir}\"`);\n            }\n            \n            // Create marker file\n            fs.writeFileSync(this.markerFile, new Date().toISOString());\n            \n            // Cleanup archive\n            fs.unlinkSync(archivePath);\n            \n        } catch (e: any) {\n            throw new Error(`Failed to extract Java: ${e.message}`);\n        }\n        \n        // Find and return the java executable path\n        const javaPath = this.getLocalJavaPath();\n        \n        if (!javaPath) {\n            throw new Error('Java extraction failed: executable not found');\n        }\n        \n        // Make executable on Unix systems\n        if (process.platform !== 'win32') {\n            await execAsync(`chmod +x \"${javaPath}\"`);\n        }\n        \n        this.sendProgress(sender, 'Java 17 instalado!', 60);\n        console.log('[JavaManager] Java installed at:', javaPath);\n        \n        return javaPath;\n    }\n\n    /**\n     * Sends progress update to the renderer.\n     */\n    private sendProgress(sender: Electron.WebContents | undefined, status: string, progress: number) {\n        if (sender) {\n            sender.send('launch-progress', { status, progress });\n        }\n    }\n\n    /**\n     * Formats bytes to human-readable size.\n     */\n    private formatSize(bytes: number): string {\n        if (bytes < 1024) return bytes + ' B';\n        if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';\n        return (bytes / (1024 * 1024)).toFixed(1) + ' MB';\n    }\n}\n", "import { app } from 'electron';\nimport path from 'path';\nimport fs from 'fs';\nimport { createWriteStream } from 'fs';\nimport AdmZip from 'adm-zip';\n\n// VPS Configuration - Primary and Fallback URLs for version.json\nconst VERSION_JSON_URLS = [\n    'https://craft.blocky.com.br/launcher-assets/version.json'\n];\n\n// Type for URL that can be a single string or array of strings\ntype UrlOrUrls = string | string[];\n\ninterface RemoteVersionInfo {\n    launcher_version: string;\n    instance: {\n        version: string;\n        url: UrlOrUrls;  // Can be string or string[] for fallback URLs\n    };\n    libraries?: {  // Optional - libraries are now downloaded from Maven repos\n        version: string;\n        url: UrlOrUrls;\n    };\n    mods?: {\n        version: string;\n        url: UrlOrUrls;  // Can be string or string[] for fallback URLs\n        notes?: string;\n    };\n}\n\ninterface LocalVersionInfo {\n    instance: string;\n    libraries: string;\n    mods: string;\n}\n\ninterface UpdateCheckResult {\n    instanceUpdate: boolean;\n    librariesUpdate: boolean;\n    modsUpdate: boolean;\n    remoteVersions: RemoteVersionInfo | null;\n    error?: string;\n}\n\nexport class UpdateManager {\n    private dataPath: string;\n    private localVersionsPath: string;\n    private instanceDir: string;\n    private librariesDir: string;\n\n    constructor() {\n        this.dataPath = app.getPath('userData');\n        this.localVersionsPath = path.join(this.dataPath, 'versions.json');\n        this.instanceDir = path.join(this.dataPath, 'instances', 'default');\n        this.librariesDir = path.join(this.instanceDir, 'libraries');\n    }\n\n    /**\n     * Normalizes URL to array format\n     */\n    private normalizeUrls(urlOrUrls: UrlOrUrls): string[] {\n        if (Array.isArray(urlOrUrls)) {\n            return urlOrUrls;\n        }\n        return [urlOrUrls];\n    }\n\n    /**\n     * Gets local version info, creating default if it doesn't exist\n     */\n    private getLocalVersions(): LocalVersionInfo {\n        try {\n            if (fs.existsSync(this.localVersionsPath)) {\n                const content = fs.readFileSync(this.localVersionsPath, 'utf-8');\n                return JSON.parse(content);\n            }\n        } catch (e) {\n            console.error('[UpdateManager] Failed to read local versions:', e);\n        }\n\n        // Default versions (never updated)\n        return {\n            instance: '0.0.0',\n            libraries: '0.0.0',\n            mods: '0.0.0'\n        };\n    }\n\n    /**\n     * Saves local version info\n     */\n    private saveLocalVersions(versions: LocalVersionInfo): void {\n        try {\n            fs.writeFileSync(this.localVersionsPath, JSON.stringify(versions, null, 2));\n            console.log('[UpdateManager] Saved local versions:', versions);\n        } catch (e) {\n            console.error('[UpdateManager] Failed to save local versions:', e);\n        }\n    }\n\n    /**\n     * Fetches remote version info from VPS with fallback support\n     */\n    private async fetchRemoteVersions(): Promise<RemoteVersionInfo | null> {\n        for (const url of VERSION_JSON_URLS) {\n            try {\n                console.log('[UpdateManager] Trying to fetch versions from:', url);\n                const response = await fetch(url, { \n                    signal: AbortSignal.timeout(10000) // 10 second timeout\n                });\n\n                if (!response.ok) {\n                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n                }\n\n                const data = await response.json() as RemoteVersionInfo;\n                console.log('[UpdateManager] Successfully fetched from:', url);\n                console.log('[UpdateManager] Remote versions:', data);\n\n                return data;\n            } catch (e) {\n                console.warn(`[UpdateManager] Failed to fetch from ${url}:`, e);\n                // Continue to next URL\n            }\n        }\n\n        console.error('[UpdateManager] All version URLs failed');\n        return null;\n    }\n\n    /**\n     * Checks what updates are available\n     */\n    public async checkForUpdates(): Promise<UpdateCheckResult> {\n        const localVersions = this.getLocalVersions();\n        const remoteVersions = await this.fetchRemoteVersions();\n\n        if (!remoteVersions) {\n            return {\n                instanceUpdate: false,\n                librariesUpdate: false,\n                modsUpdate: false,\n                remoteVersions: null,\n                error: 'Failed to fetch remote version info'\n            };\n        }\n\n        const instanceUpdate = remoteVersions.instance.version !== localVersions.instance;\n        // Libraries are now downloaded directly from Maven repos, not from VPS\n        const librariesUpdate = false; // Disabled - see GameHandler for Maven-based downloads\n        const modsUpdate = remoteVersions.mods ?\n            remoteVersions.mods.version !== localVersions.mods : false;\n\n        console.log('[UpdateManager] Update check result:', {\n            instanceUpdate,\n            librariesUpdate: 'DISABLED (Maven-based)',\n            modsUpdate,\n            local: localVersions,\n            remote: {\n                instance: remoteVersions.instance.version,\n                libraries: remoteVersions.libraries?.version ?? 'N/A (Maven-based)',\n                mods: remoteVersions.mods?.version\n            }\n        });\n\n        return {\n            instanceUpdate,\n            librariesUpdate,\n            modsUpdate,\n            remoteVersions\n        };\n    }\n\n    /**\n     * Downloads a file with progress reporting and multi-URL fallback support\n     */\n    private async downloadFile(\n        urlOrUrls: UrlOrUrls,\n        destPath: string,\n        progressCallback?: (status: string, percent: number) => void\n    ): Promise<void> {\n        const filename = path.basename(destPath);\n        progressCallback?.(`Baixando ${filename}...`, 0);\n\n        // Normalize to array of URLs\n        const urls = this.normalizeUrls(urlOrUrls);\n\n        let lastError: Error | null = null;\n\n        for (let i = 0; i < urls.length; i++) {\n            const tryUrl = urls[i];\n            try {\n                console.log(`[UpdateManager] Downloading from URL ${i + 1}/${urls.length}: ${tryUrl}`);\n\n                const response = await fetch(tryUrl, {\n                    signal: AbortSignal.timeout(60000) // 60 second timeout for downloads\n                });\n\n                if (!response.ok) {\n                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n                }\n\n                const total = Number(response.headers.get('content-length')) || 0;\n\n                // Ensure directory exists\n                fs.mkdirSync(path.dirname(destPath), { recursive: true });\n\n                const fileStream = createWriteStream(destPath);\n\n                if (!response.body) {\n                    throw new Error('No response body');\n                }\n\n                const reader = response.body.getReader();\n                let downloaded = 0;\n\n                while (true) {\n                    const { done, value } = await reader.read();\n                    if (done) break;\n\n                    fileStream.write(Buffer.from(value));\n                    downloaded += value.length;\n\n                    if (total > 0) {\n                        const percent = Math.round((downloaded / total) * 100);\n                        progressCallback?.(`Baixando ${filename}...`, percent);\n                    }\n                }\n\n                fileStream.end();\n\n                // Wait for file to finish writing\n                await new Promise<void>((resolve, reject) => {\n                    fileStream.on('finish', resolve);\n                    fileStream.on('error', reject);\n                });\n\n                console.log(`[UpdateManager] Downloaded ${filename} (${this.formatSize(downloaded)}) from ${tryUrl}`);\n                return; // Success, exit function\n\n            } catch (e: any) {\n                console.warn(`[UpdateManager] Failed to download from ${tryUrl}:`, e.message);\n                lastError = e;\n                // Continue to next URL\n            }\n        }\n\n        // All URLs failed\n        throw lastError || new Error(`Failed to download ${filename} from all ${urls.length} sources`);\n    }\n\n    /**\n     * Extracts a zip file to a directory\n     */\n    private extractZip(zipPath: string, destDir: string): void {\n        console.log(`[UpdateManager] Extracting ${zipPath} to ${destDir}`);\n\n        // Validate ZIP file before extraction\n        if (!fs.existsSync(zipPath)) {\n            throw new Error(`ZIP file not found: ${zipPath}`);\n        }\n\n        const fileBuffer = fs.readFileSync(zipPath);\n\n        // Check ZIP magic bytes (PK\\x03\\x04)\n        if (fileBuffer.length < 4 || fileBuffer[0] !== 0x50 || fileBuffer[1] !== 0x4B) {\n            // Not a valid ZIP, log first bytes for debugging\n            console.error(`[UpdateManager] Invalid ZIP file. First bytes: ${fileBuffer.slice(0, 20).toString('hex')}`);\n            throw new Error(`Invalid ZIP file: ${zipPath}. The download may have failed or returned an error page.`);\n        }\n\n        fs.mkdirSync(destDir, { recursive: true });\n        const zip = new AdmZip(zipPath);\n        zip.extractAllTo(destDir, true);\n\n        console.log(`[UpdateManager] Extraction complete`);\n    }\n\n    /**\n     * Backs up user data before update\n     */\n    private backupUserData(): void {\n        const backupDir = path.join(this.dataPath, 'update_backup');\n        const dotMinecraft = path.join(this.instanceDir, '.minecraft');\n        \n        // Ensure clean backup dir\n        if (fs.existsSync(backupDir)) {\n            fs.rmSync(backupDir, { recursive: true, force: true });\n        }\n        fs.mkdirSync(backupDir, { recursive: true });\n\n        const itemsToBackup = [\n            'options.txt',\n            'servers.dat',\n            'screenshots',\n            'stats',\n            'lastlogin', // Some old versions use this\n            'config' // Mod configs\n        ];\n\n        console.log('[UpdateManager] Backing up user data...');\n        \n        for (const item of itemsToBackup) {\n            const src = path.join(dotMinecraft, item);\n            const dest = path.join(backupDir, item);\n\n            if (fs.existsSync(src)) {\n                try {\n                    console.log(`[UpdateManager] Backing up: ${item}`);\n                    fs.cpSync(src, dest, { recursive: true });\n                } catch (e) {\n                    console.warn(`[UpdateManager] Failed to backup ${item}:`, e);\n                }\n            }\n        }\n    }\n\n    /**\n     * Restores user data after update\n     */\n    private restoreUserData(): void {\n        const backupDir = path.join(this.dataPath, 'update_backup');\n        const dotMinecraft = path.join(this.instanceDir, '.minecraft');\n\n        if (!fs.existsSync(backupDir)) return;\n\n        console.log('[UpdateManager] Restoring user data...');\n        \n        const items = fs.readdirSync(backupDir);\n        for (const item of items) {\n            const src = path.join(backupDir, item);\n            const dest = path.join(dotMinecraft, item);\n\n            try {\n                console.log(`[UpdateManager] Restoring: ${item}`);\n                // Remove default file/dir if it exists to allow restore\n                if (fs.existsSync(dest)) {\n                    fs.rmSync(dest, { recursive: true, force: true });\n                }\n                fs.cpSync(src, dest, { recursive: true });\n            } catch (e) {\n                console.warn(`[UpdateManager] Failed to restore ${item}:`, e);\n            }\n        }\n\n        // Cleanup backup\n        try {\n            fs.rmSync(backupDir, { recursive: true, force: true });\n        } catch (e) {\n            console.warn('[UpdateManager] Failed to cleanup backup:', e);\n        }\n    }\n\n    /**\n     * Performs instance update\n     */\n    public async updateInstance(\n        remoteVersions: RemoteVersionInfo,\n        progressCallback?: (status: string, percent: number) => void\n    ): Promise<void> {\n        const tempZip = path.join(this.dataPath, 'temp_instance.zip');\n\n        try {\n            // Download - now supports multiple URLs from version.json\n            await this.downloadFile(remoteVersions.instance.url, tempZip, progressCallback);\n\n            progressCallback?.('Preparando atualiza\u00E7\u00E3o da inst\u00E2ncia...', 0);\n\n            // 1. Backup User Data\n            this.backupUserData();\n\n            // 2. Clear old instance\n            // We can now safely clear everything since we have a backup\n            if (fs.existsSync(this.instanceDir)) {\n                 // Try to keep libraries if possible to save bandwidth, but for simplicity\n                 // and robustness, let's trust the backup. \n                 // Actually, libraries are separate now or inside?\n                 // In this codebase, libraries are in instanceDir/libraries.\n                 // We should NOT delete libraries if possible, or we rely on Maven.\n                 // Ideally, we only clear .minecraft and other config files.\n                 // But cleaning the whole dir ensures no leftover junk.\n                 // Given we don't backup libraries (they are re-downloaded/checked), \n                 // we might want to check if we should preserve them.\n                 // But wait, updateLibraries is effectively disabled/Maven based.\n                 // So re-downloading them is fine/expected if missing.\n                 \n                 // However, let's just clear .minecraft mostly.\n            }\n\n            // Extract\n            progressCallback?.('Extraindo inst\u00E2ncia...', 50);\n            \n            // If we want to be safe, we can just extract over.\n            // But deleting ensures clean state.\n            // Let's rely on extraction overwriting, but for instance.zip which contains a full setup,\n            // it's often better to start clean.\n            // BUT, to avoid issues with open files etc., let's just overwrite for now + backup restore?\n            // No, the user issue implies \"resetting\", likely because the previous logic CLEARED it or overwrote it.\n            // The previous logic had:\n            // if (fs.existsSync(optionsPath)) fs.copyFileSync(optionsPath, optionsBackup);\n            // This was extremely limited.\n            \n            // Let's clear properly.\n            // But we must NOT delete the libraries folder if it exists and we want to keep it?\n            // Actually, GameHandler manages libraries now via Maven.\n            \n            this.extractZip(tempZip, this.instanceDir);\n\n            // 3. Restore User Data\n            this.restoreUserData();\n\n            // Update local version\n            const localVersions = this.getLocalVersions();\n            localVersions.instance = remoteVersions.instance.version;\n            this.saveLocalVersions(localVersions);\n\n            progressCallback?.('Inst\u00E2ncia atualizada!', 100);\n\n        } finally {\n            // Cleanup temp file\n            if (fs.existsSync(tempZip)) {\n                fs.unlinkSync(tempZip);\n            }\n        }\n    }\n    /**\n     * Performs libraries update\n     * @deprecated Libraries are now downloaded from Maven repos directly in GameHandler\n     */\n    public async updateLibraries(\n        remoteVersions: RemoteVersionInfo,\n        progressCallback?: (status: string, percent: number) => void\n    ): Promise<void> {\n        // Libraries are now downloaded from Maven repos, this function is deprecated\n        if (!remoteVersions.libraries) {\n            console.log('[UpdateManager] Libraries update skipped - using Maven repos');\n            return;\n        }\n\n        const tempZip = path.join(this.dataPath, 'temp_libraries.zip');\n\n        try {\n            // Download - now supports multiple URLs from version.json\n            await this.downloadFile(remoteVersions.libraries.url, tempZip, progressCallback);\n\n            // Clear old libraries\n            progressCallback?.('Preparando atualiza\u00E7\u00E3o das bibliotecas...', 0);\n\n            // Remove old marker\n            const oldMarker = path.join(this.librariesDir, '.bundled_extracted_v1');\n            if (fs.existsSync(oldMarker)) {\n                fs.unlinkSync(oldMarker);\n            }\n\n            // Remove old libraries directory\n            if (fs.existsSync(this.librariesDir)) {\n                fs.rmSync(this.librariesDir, { recursive: true, force: true });\n            }\n\n            // Extract\n            progressCallback?.('Extraindo bibliotecas...', 50);\n            this.extractZip(tempZip, this.librariesDir);\n\n            // Create new marker\n            fs.writeFileSync(path.join(this.librariesDir, '.bundled_extracted_v2'), 'extracted');\n\n            // Update local version\n            const localVersions = this.getLocalVersions();\n            localVersions.libraries = remoteVersions.libraries.version;\n            this.saveLocalVersions(localVersions);\n\n            progressCallback?.('Bibliotecas atualizadas!', 100);\n\n        } finally {\n            // Cleanup temp file\n            if (fs.existsSync(tempZip)) {\n                fs.unlinkSync(tempZip);\n            }\n        }\n    }\n\n    /**\n     * Performs mods update\n     */\n    public async updateMods(\n        remoteVersions: RemoteVersionInfo,\n        progressCallback?: (status: string, percent: number) => void\n    ): Promise<void> {\n        if (!remoteVersions.mods) {\n            console.log('[UpdateManager] No mods update available');\n            return;\n        }\n\n        const tempZip = path.join(this.dataPath, 'temp_mods.zip');\n        const modsDir = path.join(this.instanceDir, '.minecraft', 'mods');\n\n        try {\n            // Download - now supports multiple URLs from version.json\n            await this.downloadFile(remoteVersions.mods.url, tempZip, progressCallback);\n\n            // Clear old mods\n            progressCallback?.('Removendo mods antigos...', 0);\n            if (fs.existsSync(modsDir)) {\n                fs.rmSync(modsDir, { recursive: true, force: true });\n            }\n\n            // Extract to .minecraft directory\n            progressCallback?.('Instalando novos mods...', 50);\n            this.extractZip(tempZip, path.join(this.instanceDir, '.minecraft'));\n\n            // Update local version\n            const localVersions = this.getLocalVersions();\n            localVersions.mods = remoteVersions.mods.version;\n            this.saveLocalVersions(localVersions);\n\n            progressCallback?.('Mods atualizados!', 100);\n\n        } finally {\n            // Cleanup temp file\n            if (fs.existsSync(tempZip)) {\n                fs.unlinkSync(tempZip);\n            }\n        }\n    }\n\n    /**\n     * Performs all necessary updates\n     */\n    public async performAllUpdates(\n        progressCallback?: (status: string, percent: number) => void\n    ): Promise<{ success: boolean; error?: string }> {\n        try {\n            progressCallback?.('Verificando atualiza\u00E7\u00F5es...', 0);\n\n            const updateCheck = await this.checkForUpdates();\n\n            if (!updateCheck.remoteVersions) {\n                // No remote versions available, proceed without updates\n                console.log('[UpdateManager] Could not fetch remote versions, skipping updates');\n                return { success: true };\n            }\n\n            const totalUpdates = [\n                updateCheck.instanceUpdate,\n                updateCheck.librariesUpdate,\n                updateCheck.modsUpdate\n            ].filter(Boolean).length;\n\n            if (totalUpdates === 0) {\n                console.log('[UpdateManager] All components are up to date');\n                progressCallback?.('Tudo atualizado!', 100);\n                return { success: true };\n            }\n\n            let currentUpdate = 0;\n\n            // Instance update\n            if (updateCheck.instanceUpdate) {\n                currentUpdate++;\n                const baseProgress = ((currentUpdate - 1) / totalUpdates) * 100;\n                const progressRange = 100 / totalUpdates;\n\n                await this.updateInstance(\n                    updateCheck.remoteVersions,\n                    (status, percent) => {\n                        const totalPercent = baseProgress + (percent / 100) * progressRange;\n                        progressCallback?.(status, Math.round(totalPercent));\n                    }\n                );\n            }\n\n            // Libraries update\n            if (updateCheck.librariesUpdate) {\n                currentUpdate++;\n                const baseProgress = ((currentUpdate - 1) / totalUpdates) * 100;\n                const progressRange = 100 / totalUpdates;\n\n                await this.updateLibraries(\n                    updateCheck.remoteVersions,\n                    (status, percent) => {\n                        const totalPercent = baseProgress + (percent / 100) * progressRange;\n                        progressCallback?.(status, Math.round(totalPercent));\n                    }\n                );\n            }\n\n            // Mods update\n            if (updateCheck.modsUpdate) {\n                currentUpdate++;\n                const baseProgress = ((currentUpdate - 1) / totalUpdates) * 100;\n                const progressRange = 100 / totalUpdates;\n\n                await this.updateMods(\n                    updateCheck.remoteVersions,\n                    (status, percent) => {\n                        const totalPercent = baseProgress + (percent / 100) * progressRange;\n                        progressCallback?.(status, Math.round(totalPercent));\n                    }\n                );\n            }\n\n            progressCallback?.('Todas as atualiza\u00E7\u00F5es conclu\u00EDdas!', 100);\n            return { success: true };\n\n        } catch (e: any) {\n            console.error('[UpdateManager] Update failed:', e);\n            return { success: false, error: e.message };\n        }\n    }\n\n    /**\n     * Format bytes to human readable\n     */\n    private formatSize(bytes: number): string {\n        if (bytes < 1024) return bytes + ' B';\n        if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';\n        return (bytes / (1024 * 1024)).toFixed(1) + ' MB';\n    }\n}\n", "import { ipcMain, app } from 'electron';\nimport fs from 'fs';\nimport path from 'path';\nimport AdmZip from 'adm-zip';\nimport { Logger } from './Logger.js';\n\nexport interface Mod {\n    fileName: string;\n    name: string;\n    description: string;\n    version: string;\n    enabled: boolean;\n}\n\nexport class ModHandler {\n    private userDataPath: string;\n    private activeModsDir: string = '';\n\n    constructor() {\n        // Use standard Electron userData path resolution\n        // This is robust across platforms and matches GameHandler logic\n        this.userDataPath = app.getPath('userData');\n    }\n\n    public init() {\n        ipcMain.handle('get-mods', async () => {\n            Logger.info('ModHandler', 'Fetching mods list...');\n            return this.getMods();\n        });\n\n        ipcMain.handle('toggle-mod', async (event, { fileName, enable }) => {\n            Logger.info('ModHandler', `Toggling mod ${fileName} to ${enable}`);\n            return this.toggleMod(fileName, enable);\n        });\n    }\n\n    private async toggleMod(fileName: string, enable: boolean): Promise<{ success: boolean; error?: string }> {\n        if (!this.activeModsDir) {\n            const msg = 'Cannot toggle mod: No active mods directory found.';\n            Logger.error('ModHandler', msg);\n            return { success: false, error: msg };\n        }\n\n        const disabledDir = path.join(this.activeModsDir, 'disabled');\n        // Ensure disabled directory exists\n        if (!fs.existsSync(disabledDir)) {\n            try {\n                await fs.promises.mkdir(disabledDir, { recursive: true });\n            } catch (e: any) {\n                const msg = `Failed to create disabled directory: ${e.message}`;\n                Logger.error('ModHandler', msg);\n                return { success: false, error: msg };\n            }\n        }\n\n        try {\n            if (enable) {\n                // Enabling: Move from 'disabled' folder to main folder\n                const sourcePath = path.join(disabledDir, fileName);\n                const destPath = path.join(this.activeModsDir, fileName);\n\n                if (fs.existsSync(sourcePath)) {\n                    if (fs.existsSync(destPath)) {\n                        const msg = `Destination file already exists: ${destPath}`;\n                        Logger.warn('ModHandler', msg);\n                        return { success: false, error: msg };\n                    }\n\n                    const success = await this.moveFile(sourcePath, destPath);\n                    if (success) {\n                        Logger.info('ModHandler', `Enabled mod: Moved ${fileName} to active folder`);\n                        return { success: true };\n                    } else {\n                        return { success: false, error: 'Move operation failed (check logs)' };\n                    }\n                } else {\n                    const msg = `Cannot enable: File not found in disabled folder: ${sourcePath}`;\n                    Logger.warn('ModHandler', msg);\n                    return { success: false, error: msg };\n                }\n            } else {\n                // Disabling: Move from main folder to 'disabled' folder\n                const sourcePath = path.join(this.activeModsDir, fileName);\n                const destPath = path.join(disabledDir, fileName);\n\n                if (fs.existsSync(sourcePath)) {\n                    // Check if destination exists, if so, maybe we should delete it or overwrite?\n                    // Safe approach: overwrite if copy+unlink\n\n                    const success = await this.moveFile(sourcePath, destPath);\n                    if (success) {\n                        Logger.info('ModHandler', `Disabled mod: Moved ${fileName} to disabled folder`);\n                        return { success: true };\n                    } else {\n                        return { success: false, error: 'Move operation failed (check logs)' };\n                    }\n                } else {\n                    const msg = `Cannot disable: File not found in active folder: ${sourcePath}`;\n                    Logger.warn('ModHandler', msg);\n                    return { success: false, error: msg };\n                }\n            }\n        } catch (e: any) {\n            Logger.error('ModHandler', `Failed to toggle mod ${fileName}: ${e.message}`);\n            return { success: false, error: e.message };\n        }\n    }\n\n    /**\n     * Robust move helper: Try rename, fallback to copy+unlink\n     */\n    private async moveFile(src: string, dest: string): Promise<boolean> {\n        try {\n            await fs.promises.rename(src, dest);\n            return true;\n        } catch (e) {\n            Logger.warn('ModHandler', `Rename failed for ${path.basename(src)}, trying copy+unlink: ${e}`);\n            try {\n                await fs.promises.copyFile(src, dest);\n                await fs.promises.unlink(src);\n                return true;\n            } catch (e2) {\n                Logger.error('ModHandler', `Move failed completely for ${path.basename(src)}: ${e2}`);\n                return false;\n            }\n        }\n    }\n\n    private async getMods(): Promise<Mod[]> {\n        // Try multiple potential locations for the mods folder\n        // 1. instances/default/.minecraft/mods (Standard for custom instances with Prism/Vanilla structure)\n        // 2. instances/default/mods (Simplified structure)\n        // 3. gamedata/mods (Fallback for vanilla structure used by GameHandler)\n        const possiblePaths = [\n            path.join(this.userDataPath, 'instances', 'default', '.minecraft', 'mods'),\n            path.join(this.userDataPath, 'instances', 'default', 'mods'),\n            path.join(this.userDataPath, 'gamedata', 'mods')\n        ];\n\n        let modsDir = '';\n        for (const p of possiblePaths) {\n            if (fs.existsSync(p)) {\n                modsDir = p;\n                Logger.info('ModHandler', `Found mods directory at: ${modsDir}`);\n                break;\n            }\n        }\n\n        if (!modsDir) {\n            Logger.warn('ModHandler', 'No valid mods directory found in standard locations.');\n            return []; // No mods found\n        }\n\n        this.activeModsDir = modsDir; // Store for toggling\n        const disabledDir = path.join(modsDir, 'disabled');\n\n        const mods: Mod[] = [];\n\n        // Helper to process files in a directory\n        const processDirectory = async (dir: string, isEnabled: boolean) => {\n            if (!fs.existsSync(dir)) return;\n\n            try {\n                const files = await fs.promises.readdir(dir);\n                for (const file of files) {\n                    if (!file.endsWith('.jar')) continue; // Ignore non-jars in this new strategy (and ignore subdirs like 'disabled')\n\n                    // In main dir, 'disabled' is a folder, so file.endsWith('.jar') filters it out automatically basically (folders don't end in .jar usually)\n                    // But good to be safe: check stat? readdir returns names only.\n                    // Just catch stat errors or rely on extension.\n\n                    const filePath = path.join(dir, file);\n                    // Check if it's a directory\n                    const stat = await fs.promises.stat(filePath);\n                    if (stat.isDirectory()) continue;\n\n                    let modInfo: Mod = {\n                        fileName: file,\n                        enabled: isEnabled,\n                        name: file, // Default to filename\n                        description: '',\n                        version: ''\n                    };\n\n                    // Attempt to read metadata from fabric.mod.json\n                    try {\n                        const zip = new AdmZip(filePath);\n                        const zipEntries = zip.getEntries();\n                        const fabricModJson = zipEntries.find(entry => entry.entryName === 'fabric.mod.json');\n                        const legacyModJson = zipEntries.find(entry => entry.entryName === 'mod.json');\n\n                        const metadataEntry = fabricModJson || legacyModJson;\n\n                        if (metadataEntry) {\n                            const content = metadataEntry.getData().toString('utf8');\n                            const json = JSON.parse(content);\n\n                            if (json.name) modInfo.name = json.name;\n                            if (json.description) modInfo.description = json.description;\n                            if (json.version) modInfo.version = json.version;\n                        }\n                    } catch (e) {\n                        Logger.warn('ModHandler', `Could not read metadata for ${file}: ${e}`);\n                    }\n\n                    mods.push(modInfo);\n                }\n            } catch (e) {\n                Logger.error('ModHandler', `Error scanning directory ${dir}: ${e}`);\n            }\n        };\n\n        // 1. Scan Enabled Mods (in modsDir)\n        await processDirectory(modsDir, true);\n\n        // 2. Scan Disabled Mods (in modsDir/disabled)\n        await processDirectory(disabledDir, false);\n\n        // Sort by enabled state then name\n        return mods.sort((a, b) => {\n            if (a.enabled === b.enabled) {\n                return a.name.localeCompare(b.name);\n            }\n            return a.enabled ? -1 : 1;\n        });\n    }\n}\n", "import { BrowserWindow, BrowserView, globalShortcut, screen, ipcMain } from 'electron';\nimport { Logger } from './Logger.js';\nimport path from 'path';\n\n/**\n * Handles the in-game browser overlay functionality.\n * Uses a BrowserView for the website content to prevent layout issues.\n */\nexport class OverlayHandler {\n    private overlayWindow: BrowserWindow | null = null;\n    private browserView: BrowserView | null = null;\n    private isVisible: boolean = false;\n    private isGameRunning: boolean = false;\n    private hotkeyRegistered: boolean = false;\n\n    private readonly OVERLAY_URL = 'https://craft.blocky.com.br';\n    private readonly HEADER_HEIGHT = 48;\n\n    /**\n     * Initialize the overlay handler\n     * Called after app is ready\n     */\n    public init(): void {\n        Logger.info('OverlayHandler', 'Initializing overlay handler');\n        this.registerHotkey();\n        this.setupIPC();\n    }\n\n    /**\n     * Setup IPC handlers for overlay navigation\n     */\n    private setupIPC(): void {\n        ipcMain.on('overlay-go-back', () => {\n            if (this.browserView && !this.browserView.webContents.isDestroyed()) {\n                if (this.browserView.webContents.canGoBack()) {\n                    this.browserView.webContents.goBack();\n                    Logger.info('OverlayHandler', 'Navigated back');\n                }\n            }\n        });\n\n        ipcMain.on('overlay-go-home', () => {\n            if (this.browserView && !this.browserView.webContents.isDestroyed()) {\n                this.browserView.webContents.loadURL(this.OVERLAY_URL);\n                Logger.info('OverlayHandler', 'Navigated to home');\n            }\n        });\n\n        ipcMain.on('overlay-close', () => {\n            this.hideOverlay();\n            Logger.info('OverlayHandler', 'Closed via IPC');\n        });\n    }\n\n    /**\n     * Register the Shift+Tab global hotkey\n     */\n    private registerHotkey(): void {\n        try {\n            const registered = globalShortcut.register('Shift+Tab', () => {\n                Logger.info('OverlayHandler', 'Shift+Tab pressed');\n                this.toggleOverlay();\n            });\n\n            if (registered) {\n                this.hotkeyRegistered = true;\n                Logger.info('OverlayHandler', 'Shift+Tab hotkey registered successfully');\n            } else {\n                Logger.error('OverlayHandler', 'Failed to register Shift+Tab hotkey');\n            }\n        } catch (e: any) {\n            Logger.error('OverlayHandler', `Failed to register hotkey: ${e.message}`);\n        }\n    }\n\n    /**\n     * Unregister all shortcuts - call on app quit\n     */\n    public cleanup(): void {\n        if (this.hotkeyRegistered) {\n            globalShortcut.unregister('Shift+Tab');\n            this.hotkeyRegistered = false;\n            Logger.info('OverlayHandler', 'Hotkey unregistered');\n        }\n\n        if (this.overlayWindow && !this.overlayWindow.isDestroyed()) {\n            // Remove view first\n            this.overlayWindow.setBrowserView(null);\n\n            if (this.browserView && !this.browserView.webContents.isDestroyed()) {\n                // BrowserView doesn't have a destroy method in all versions, \n                // but setting it to null from window detaches it.\n                // We rely on garbage collection after detachment.\n                (this.browserView.webContents as any).destroy();\n            }\n\n            this.overlayWindow.destroy();\n            this.overlayWindow = null;\n            this.browserView = null;\n        }\n    }\n\n    /**\n     * Create the overlay window containing the header and the BrowserView\n     */\n    private createOverlayWindow(): void {\n        if (this.overlayWindow && !this.overlayWindow.isDestroyed()) {\n            Logger.info('OverlayHandler', 'Overlay window already exists');\n            return;\n        }\n\n        // Get primary display dimensions\n        const primaryDisplay = screen.getPrimaryDisplay();\n        const { width: screenWidth, height: screenHeight } = primaryDisplay.size;\n\n        // Overlay window size (85% of screen, max 1400x900)\n        const windowWidth = Math.min(Math.floor(screenWidth * 0.85), 1400);\n        const windowHeight = Math.min(Math.floor(screenHeight * 0.85), 900);\n\n        // Center position\n        const x = Math.floor((screenWidth - windowWidth) / 2);\n        const y = Math.floor((screenHeight - windowHeight) / 2);\n\n        Logger.info('OverlayHandler', `Creating overlay: ${windowWidth}x${windowHeight} at (${x}, ${y})`);\n\n        // Create the main window (container)\n        this.overlayWindow = new BrowserWindow({\n            width: windowWidth,\n            height: windowHeight,\n            x: x,\n            y: y,\n            frame: false,\n            transparent: false,\n            alwaysOnTop: true,\n            skipTaskbar: true,\n            show: false,\n            resizable: false,\n            movable: false,\n            focusable: true,\n            hasShadow: true,\n            backgroundColor: '#1e1e1e', // Match header background\n            webPreferences: {\n                nodeIntegration: true,\n                contextIsolation: false,\n                sandbox: false,\n            },\n        });\n\n        // HTML for the header\n        const headerHtml = `\n<!DOCTYPE html>\n<html>\n<head>\n    <style>\n        * { margin: 0; padding: 0; box-sizing: border-box; }\n        body { margin: 0; overflow: hidden; background: #1e1e1e; font-family: 'Inter', system-ui, -apple-system, sans-serif; }\n        #blockycraft-nav-bar {\n            height: ${this.HEADER_HEIGHT}px;\n            background: #1e1e1e;\n            border-bottom: 1px solid #333333;\n            display: flex;\n            align-items: center;\n            padding: 0 16px;\n            gap: 8px;\n            color: white;\n            user-select: none;\n        }\n        #blockycraft-nav-bar button {\n            background: #2a2a2a;\n            border: 1px solid #333333;\n            color: #ffffff;\n            width: 36px;\n            height: 36px;\n            padding: 0;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            border-radius: 8px;\n            cursor: pointer;\n            transition: all 0.2s;\n        }\n        #blockycraft-nav-bar button:hover {\n            background: #333333;\n            border-color: #444444;\n        }\n        #blockycraft-nav-bar button svg {\n            width: 20px;\n            height: 20px;\n            stroke: currentColor;\n            stroke-width: 2;\n            stroke-linecap: round;\n            stroke-linejoin: round;\n            fill: none;\n        }\n        #blockycraft-nav-bar .nav-title {\n            color: #a1a1aa;\n            font-size: 13px;\n            margin-left: auto;\n            font-weight: 500;\n        }\n        #blockycraft-nav-bar .close-btn {\n            background: transparent;\n            border-color: transparent;\n            color: #ffffff;\n            margin-left: 8px;\n        }\n        #blockycraft-nav-bar .close-btn:hover {\n            background: #ef4444;\n            border-color: #ef4444;\n            color: #ffffff;\n        }\n    </style>\n</head>\n<body>\n    <div id=\"blockycraft-nav-bar\">\n        <button id=\"bc-back-btn\" title=\"Voltar\" onclick=\"window.overlayAPI.goBack()\">\n            <svg viewBox=\"0 0 24 24\"><path d=\"m15 18-6-6 6-6\"/></svg>\n        </button>\n        <button id=\"bc-home-btn\" title=\"In\u00EDcio\" onclick=\"window.overlayAPI.goHome()\">\n            <svg viewBox=\"0 0 24 24\"><path d=\"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\"/><polyline points=\"9 22 9 12 15 12 15 22\"/></svg>\n        </button>\n        <span class=\"nav-title\">BlockyCRAFT Overlay</span>\n        <button class=\"close-btn\" id=\"bc-close-btn\" title=\"Fechar (Shift+Tab)\" onclick=\"window.overlayAPI.close()\">\n            <svg viewBox=\"0 0 24 24\"><path d=\"M18 6 6 18\"/><path d=\"m6 6 12 12\"/></svg>\n        </button>\n    </div>\n    <script>\n        const { ipcRenderer } = require('electron');\n        window.overlayAPI = {\n            goBack: () => ipcRenderer.send('overlay-go-back'),\n            goHome: () => ipcRenderer.send('overlay-go-home'),\n            close: () => ipcRenderer.send('overlay-close')\n        };\n    </script>\n</body>\n</html>`;\n\n        this.overlayWindow.loadURL(`data:text/html;charset=utf-8,${encodeURIComponent(headerHtml)}`);\n\n        // Create the BrowserView for the content\n        this.browserView = new BrowserView({\n            webPreferences: {\n                nodeIntegration: false,\n                contextIsolation: true,\n                sandbox: process.platform !== 'linux',\n            }\n        });\n\n        this.overlayWindow.setBrowserView(this.browserView);\n\n        // Position the view below the header\n        // BrowserView bounds are relative to the window content area\n        this.browserView.setBounds({\n            x: 0,\n            y: this.HEADER_HEIGHT,\n            width: windowWidth,\n            height: windowHeight - this.HEADER_HEIGHT\n        });\n\n        // Disable auto-resize since our window is fixed size\n        this.browserView.setAutoResize({ width: true, height: true });\n\n        // Setup browser view events\n        this.browserView.webContents.on('did-start-loading', () => {\n            Logger.info('OverlayHandler', 'Browser started loading');\n        });\n\n        this.browserView.webContents.on('did-fail-load', (event, errorCode, errorDescription) => {\n            Logger.error('OverlayHandler', `Failed to load: ${errorCode} - ${errorDescription}`);\n        });\n\n        // Handle new windows in overlay\n        this.browserView.webContents.setWindowOpenHandler(({ url }) => {\n            Logger.info('OverlayHandler', `Intercepted new window request: ${url}`);\n            if (this.browserView && !this.browserView.webContents.isDestroyed()) {\n                this.browserView.webContents.loadURL(url);\n            }\n            return { action: 'deny' };\n        });\n\n        // Handle escape key in the browser view too\n        this.browserView.webContents.on('before-input-event', (event, input) => {\n            if (input.key === 'Escape' && input.type === 'keyDown') {\n                this.hideOverlay();\n            }\n        });\n\n        // Handle escape key in the header (overlay window)\n        this.overlayWindow.webContents.on('before-input-event', (event, input) => {\n            if (input.key === 'Escape' && input.type === 'keyDown') {\n                this.hideOverlay();\n            }\n        });\n\n        // Load content\n        Logger.info('OverlayHandler', `Loading URL: ${this.OVERLAY_URL}`);\n        this.browserView.webContents.loadURL(this.OVERLAY_URL);\n\n        // Handle window close\n        this.overlayWindow.on('close', (event) => {\n            if (this.overlayWindow && !this.overlayWindow.isDestroyed()) {\n                event.preventDefault();\n                this.hideOverlay();\n            }\n        });\n\n        Logger.info('OverlayHandler', 'Overlay window created with BrowserView');\n    }\n\n    /**\n     * Toggle overlay visibility\n     */\n    public toggleOverlay(): void {\n        if (!this.isGameRunning) {\n            Logger.info('OverlayHandler', 'Game not running - overlay disabled');\n            return;\n        }\n\n        if (this.isVisible) {\n            this.hideOverlay();\n        } else {\n            this.showOverlay();\n        }\n    }\n\n    /**\n     * Show the overlay\n     */\n    private showOverlay(): void {\n        // Create windows lazily if needed\n        if (!this.overlayWindow || this.overlayWindow.isDestroyed()) {\n            Logger.info('OverlayHandler', 'Creating overlay window on first use...');\n            this.createOverlayWindow();\n        }\n\n        if (this.overlayWindow) {\n            this.overlayWindow.show();\n            this.overlayWindow.focus();\n            this.overlayWindow.setAlwaysOnTop(true, 'screen-saver');\n            this.isVisible = true;\n            Logger.info('OverlayHandler', 'Overlay shown');\n        }\n    }\n\n    /**\n     * Hide the overlay\n     */\n    private hideOverlay(): void {\n        if (this.overlayWindow && !this.overlayWindow.isDestroyed()) {\n            this.overlayWindow.hide();\n            this.isVisible = false;\n            Logger.info('OverlayHandler', 'Overlay hidden');\n        }\n    }\n\n    /**\n     * Set game running state - called by GameHandler\n     */\n    public setGameRunning(running: boolean): void {\n        this.isGameRunning = running;\n        Logger.info('OverlayHandler', `Game running state: ${running}`);\n\n        // Hide overlay if game closes while it's open\n        if (!running && this.isVisible) {\n            this.hideOverlay();\n        }\n    }\n\n    /**\n     * Check if game is currently running\n     */\n    public isGameActive(): boolean {\n        return this.isGameRunning;\n    }\n\n    /**\n     * Check if overlay is currently visible\n     */\n    public isOverlayVisible(): boolean {\n        return this.isVisible;\n    }\n}\n"],
  "mappings": "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",
  "names": ["exports", "module", "exports", "exports", "module", "path", "err", "fd", "exports", "module", "path", "fs", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "exports", "module", "exports", "module", "exports", "module", "exports", "exports", "module", "exports", "module", "exports", "module", "localPath", "options", "err", "content", "fileAttr", "import_electron", "path", "fs", "import_electron", "import_path", "import_fs", "import_child_process", "import_util", "import_adm_zip", "import_electron", "import_path", "import_fs", "path", "fs", "AdmZip", "import_electron", "import_path", "import_fs", "import_adm_zip", "path", "fs", "AdmZip", "execAsync", "fs", "AdmZip", "path", "localPath", "overlayHandler", "import_electron", "import_fs", "import_path", "import_adm_zip", "path", "fs", "AdmZip", "import_electron", "path"]
}
