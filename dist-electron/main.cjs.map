{
  "version": 3,
  "sources": ["../electron/main.ts"],
  "sourcesContent": ["import { app, BrowserWindow, ipcMain } from 'electron';\nimport path from 'node:path';\n\n// Add command line switches before app is ready\napp.commandLine.appendSwitch('no-sandbox');\napp.commandLine.appendSwitch('disable-gpu');\napp.commandLine.appendSwitch('disable-software-rasterizer');\napp.commandLine.appendSwitch('disable-dev-shm-usage');\n\nconsole.log('=== BlockyCRAFT Launcher Starting ===');\nconsole.log('Electron version:', process.versions.electron);\n\nlet mainWindow: BrowserWindow | null = null;\nconst VITE_DEV_SERVER_URL = process.env['VITE_DEV_SERVER_URL'];\n\nfunction createWindow(): void {\n    console.log('Creating main window...');\n    mainWindow = new BrowserWindow({\n        width: 900,\n        height: 600,\n        minWidth: 800,\n        minHeight: 500,\n        frame: true,\n        resizable: true,\n        webPreferences: {\n            nodeIntegration: false,\n            contextIsolation: true,\n            preload: path.join(__dirname, 'preload.cjs'),\n            sandbox: false,\n        },\n        backgroundColor: '#0f0f0f',\n        show: true,\n    });\n\n    if (VITE_DEV_SERVER_URL) {\n        mainWindow.loadURL(VITE_DEV_SERVER_URL);\n        mainWindow.webContents.openDevTools();\n    } else {\n        const filePath = path.join(__dirname, '../dist/index.html');\n        mainWindow.loadFile(filePath);\n    }\n\n    mainWindow.on('closed', () => {\n        mainWindow = null;\n    });\n}\n\napp.whenReady().then(() => {\n    createWindow();\n    setupIPC();\n});\n\napp.on('window-all-closed', () => {\n    if (process.platform !== 'darwin') {\n        app.quit();\n    }\n});\n\napp.on('activate', () => {\n    if (BrowserWindow.getAllWindows().length === 0) {\n        createWindow();\n    }\n});\n\nfunction setupIPC() {\n    ipcMain.on('launch-game', (event, options) => {\n        console.log('[Main] Launch requested for:', options.username);\n\n        const sender = event.sender;\n        let progress = 0;\n\n        // Simulating Backend Process (Java Download, Assets, etc.)\n        const interval = setInterval(() => {\n            progress += 5;\n\n            // Send Progress Object\n            const totalSize = 100 * 1024 * 1024; // 100MB\n            const currentSize = (progress / 100) * totalSize;\n\n            sender.send('download-progress', {\n                type: 'download',\n                current: currentSize,\n                total: totalSize\n            });\n\n            // Send Logs\n            if (progress % 20 === 0) {\n                const logs = [\n                    'Downloading lwjgl.jar...',\n                    'Verifying assets index...',\n                    'Unpacking natives...',\n                    'Checking game hash...'\n                ];\n                const log = logs[Math.floor(Math.random() * logs.length)];\n                sender.send('log-message', `[Backend] ${log}`);\n            }\n\n            if (progress >= 100) {\n                clearInterval(interval);\n                sender.send('log-message', '[Backend] Launching java process...');\n                // In real app, we would spawn the child process here\n                setTimeout(() => {\n                    sender.send('game-launched');\n                }, 1000);\n            }\n        }, 200);\n    });\n}\n\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;AAAA,sBAA4C;AAC5C,uBAAiB;AAGjB,oBAAI,YAAY,aAAa,YAAY;AACzC,oBAAI,YAAY,aAAa,aAAa;AAC1C,oBAAI,YAAY,aAAa,6BAA6B;AAC1D,oBAAI,YAAY,aAAa,uBAAuB;AAEpD,QAAQ,IAAI,uCAAuC;AACnD,QAAQ,IAAI,qBAAqB,QAAQ,SAAS,QAAQ;AAE1D,IAAI,aAAmC;AACvC,IAAM,sBAAsB,QAAQ,IAAI,qBAAqB;AAE7D,SAAS,eAAqB;AAC1B,UAAQ,IAAI,yBAAyB;AACrC,eAAa,IAAI,8BAAc;AAAA,IAC3B,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,UAAU;AAAA,IACV,WAAW;AAAA,IACX,OAAO;AAAA,IACP,WAAW;AAAA,IACX,gBAAgB;AAAA,MACZ,iBAAiB;AAAA,MACjB,kBAAkB;AAAA,MAClB,SAAS,iBAAAA,QAAK,KAAK,WAAW,aAAa;AAAA,MAC3C,SAAS;AAAA,IACb;AAAA,IACA,iBAAiB;AAAA,IACjB,MAAM;AAAA,EACV,CAAC;AAED,MAAI,qBAAqB;AACrB,eAAW,QAAQ,mBAAmB;AACtC,eAAW,YAAY,aAAa;AAAA,EACxC,OAAO;AACH,UAAM,WAAW,iBAAAA,QAAK,KAAK,WAAW,oBAAoB;AAC1D,eAAW,SAAS,QAAQ;AAAA,EAChC;AAEA,aAAW,GAAG,UAAU,MAAM;AAC1B,iBAAa;AAAA,EACjB,CAAC;AACL;AAEA,oBAAI,UAAU,EAAE,KAAK,MAAM;AACvB,eAAa;AACb,WAAS;AACb,CAAC;AAED,oBAAI,GAAG,qBAAqB,MAAM;AAC9B,MAAI,QAAQ,aAAa,UAAU;AAC/B,wBAAI,KAAK;AAAA,EACb;AACJ,CAAC;AAED,oBAAI,GAAG,YAAY,MAAM;AACrB,MAAI,8BAAc,cAAc,EAAE,WAAW,GAAG;AAC5C,iBAAa;AAAA,EACjB;AACJ,CAAC;AAED,SAAS,WAAW;AAChB,0BAAQ,GAAG,eAAe,CAAC,OAAO,YAAY;AAC1C,YAAQ,IAAI,gCAAgC,QAAQ,QAAQ;AAE5D,UAAM,SAAS,MAAM;AACrB,QAAI,WAAW;AAGf,UAAM,WAAW,YAAY,MAAM;AAC/B,kBAAY;AAGZ,YAAM,YAAY,MAAM,OAAO;AAC/B,YAAM,cAAe,WAAW,MAAO;AAEvC,aAAO,KAAK,qBAAqB;AAAA,QAC7B,MAAM;AAAA,QACN,SAAS;AAAA,QACT,OAAO;AAAA,MACX,CAAC;AAGD,UAAI,WAAW,OAAO,GAAG;AACrB,cAAM,OAAO;AAAA,UACT;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACJ;AACA,cAAM,MAAM,KAAK,KAAK,MAAM,KAAK,OAAO,IAAI,KAAK,MAAM,CAAC;AACxD,eAAO,KAAK,eAAe,aAAa,GAAG,EAAE;AAAA,MACjD;AAEA,UAAI,YAAY,KAAK;AACjB,sBAAc,QAAQ;AACtB,eAAO,KAAK,eAAe,qCAAqC;AAEhE,mBAAW,MAAM;AACb,iBAAO,KAAK,eAAe;AAAA,QAC/B,GAAG,GAAI;AAAA,MACX;AAAA,IACJ,GAAG,GAAG;AAAA,EACV,CAAC;AACL;",
  "names": ["path"]
}
